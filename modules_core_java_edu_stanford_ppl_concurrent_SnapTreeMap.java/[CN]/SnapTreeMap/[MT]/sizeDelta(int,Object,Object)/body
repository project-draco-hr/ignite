{
switch (func) {
case UpdateAlways:
{
      return (result != null ? -1 : 0) + (newValue != null ? 1 : 0);
    }
case UpdateIfAbsent:
{
    assert(newValue != null);
    return result != null ? 0 : 1;
  }
case UpdateIfPresent:
{
  return result == null ? 0 : (newValue != null ? 0 : -1);
}
default :
{
return !((Boolean)result) ? 0 : (newValue != null ? 0 : -1);
}
}
}
