{
  IgniteConfiguration cfg=super.getConfiguration(gridName);
  cfg.setPeerClassLoadingEnabled(false);
  ((TcpDiscoverySpi)cfg.getDiscoverySpi()).setIpFinder(ipFinder);
  ((TcpCommunicationSpi)cfg.getCommunicationSpi()).setSharedMemoryPort(-1);
  CacheConfiguration ccfg=new CacheConfiguration();
  ccfg.setCacheMode(REPLICATED);
  ccfg.setRebalanceMode(SYNC);
  ccfg.setWriteSynchronizationMode(FULL_SYNC);
  cfg.setCacheConfiguration(ccfg);
  return cfg;
}
