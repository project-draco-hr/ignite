{
  if (!state(PREPARING)) {
    if (log.isDebugEnabled())     log.debug("Invalid transaction state for prepare: " + this);
    return;
  }
  try {
    cctx.tm().prepareTx(this);
    state(PREPARED);
  }
 catch (  GridException e) {
    setRollbackOnly();
    throw e;
  }
}
