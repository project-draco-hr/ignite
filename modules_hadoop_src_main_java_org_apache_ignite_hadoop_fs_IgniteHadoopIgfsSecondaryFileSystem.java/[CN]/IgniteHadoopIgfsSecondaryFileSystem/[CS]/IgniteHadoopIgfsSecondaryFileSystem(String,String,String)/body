{
  if (F.isEmpty(uri))   uri=null;
  if (F.isEmpty(userName))   userName=null;
  try {
    SecondaryFileSystemProvider secProvider=new SecondaryFileSystemProvider(uri,cfgPath,userName);
    fileSys=secProvider.createFileSystem();
    uri=secProvider.uri().toString();
    if (!uri.endsWith("/"))     uri+="/";
    if (cfgPath != null)     props.put(SECONDARY_FS_CONFIG_PATH,cfgPath);
    if (userName != null)     props.put(SECONDARY_FS_USER_NAME,userName);
    props.put(SECONDARY_FS_URI,uri);
  }
 catch (  IOException e) {
    throw new IgniteCheckedException(e);
  }
}
