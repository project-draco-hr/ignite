{
  if (fileInfo.affinityKey() != null)   return new IgfsBlockKey(fileInfo.id(),fileInfo.affinityKey(),fileInfo.evictExclude(),blockIdx);
  if (fileInfo.fileMap() != null) {
    IgniteUuid affKey=fileInfo.fileMap().affinityKey(blockIdx * fileInfo.blockSize(),false);
    return new IgfsBlockKey(fileInfo.id(),affKey,fileInfo.evictExclude(),blockIdx);
  }
  return new IgfsBlockKey(fileInfo.id(),null,fileInfo.evictExclude(),blockIdx);
}
