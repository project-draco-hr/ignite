{
  GridCache<String,Integer> cache=cache();
  Collection<String> keys=primaryKeysForCache(cache,2);
  for (  String key : keys)   assertNull(cache.peek(key));
  Map<String,Integer> vals=new HashMap<>(keys.size());
  int i=0;
  for (  String key : keys) {
    cache.put(key,i);
    vals.put(key,i);
    i++;
  }
  for (  String key : keys)   assertEquals(vals.get(key),cache.peek(key));
  cache.clearLocally();
  for (  String key : keys)   assertNull(cache.peek(key));
  cache.reloadAllAsync(keys).get();
  for (  String key : keys)   assertEquals(vals.get(key),cache.peek(key));
  cache.clearLocally();
  for (  String key : keys)   assertNull(cache.peek(key));
  String[] keysArr=new String[keys.size()];
  keys.toArray(keysArr);
  cache.reloadAllAsync(F.asList(keysArr)).get();
  for (  String key : keys)   assertEquals(vals.get(key),cache.peek(key));
  for (  String key : keys) {
    assertEquals(vals.get(key),cache.peek(key));
    cache.clearLocally(key);
  }
  cache.reloadAllAsync(keys).get();
  for (  String key : keys)   assertEquals(vals.get(key),cache.peek(key));
}
