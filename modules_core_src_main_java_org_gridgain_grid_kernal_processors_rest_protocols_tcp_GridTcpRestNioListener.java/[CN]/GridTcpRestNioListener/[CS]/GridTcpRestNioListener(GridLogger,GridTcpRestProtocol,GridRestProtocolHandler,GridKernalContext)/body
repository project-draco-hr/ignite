{
  memcachedLsnr=new GridTcpMemcachedNioListener(log,hnd,ctx);
  this.log=log;
  this.proto=proto;
  this.hnd=hnd;
  Map<Byte,GridClientMarshaller> tmpMap=new GridLeanMap<>(3);
  tmpMap.put(U.JDK_CLIENT_PROTO_ID,new GridClientJdkMarshaller());
  addProtobufMarshaller(tmpMap);
  tmpMap.put(U.PORTABLE_OBJECT_PROTO_ID,proto.portableMarshaller());
  try {
    tmpMap.put(U.OPTIMIZED_CLIENT_PROTO_ID,new GridClientOptimizedMarshaller());
  }
 catch (  Exception e) {
    U.warn(log,"Failed to create " + GridClientOptimizedMarshaller.class.getSimpleName() + " for handling client communication ("+ e.getMessage()+ "). Local node will operate without this marshaller.","Failed to create " + GridClientOptimizedMarshaller.class.getSimpleName() + '.');
  }
  suppMarshMap=Collections.unmodifiableMap(tmpMap);
}
