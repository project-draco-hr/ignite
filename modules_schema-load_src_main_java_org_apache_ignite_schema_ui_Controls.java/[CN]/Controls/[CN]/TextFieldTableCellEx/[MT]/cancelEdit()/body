{
  if (!cancelling) {
    try {
      cancelling=true;
      if (hardCancel || curTxt.trim().isEmpty())       super.cancelEdit();
 else       commitEdit(curTxt);
    }
  finally {
      cancelling=false;
    }
  }
 else   super.cancelEdit();
}
