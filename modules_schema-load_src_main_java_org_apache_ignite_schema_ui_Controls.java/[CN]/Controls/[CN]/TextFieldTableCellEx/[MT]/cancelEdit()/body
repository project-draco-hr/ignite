{
  if (cancelling)   super.cancelEdit();
 else   try {
    cancelling=true;
    if (hardCancel || curTxt.trim().isEmpty())     super.cancelEdit();
 else     if (validator.valid(getTableView().getSelectionModel().getSelectedItem(),curTxt))     commitEdit(curTxt);
 else     super.cancelEdit();
  }
  finally {
    cancelling=false;
  }
}
