{
  if (cancelling)   super.cancelEdit();
 else   try {
    cancelling=true;
    if (hardCancel || curTxt.trim().isEmpty())     super.cancelEdit();
 else     commitEdit(curTxt);
  }
  finally {
    cancelling=false;
  }
}
