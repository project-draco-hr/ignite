{
  IgniteConfiguration cfg=super.getConfiguration(gridName);
  TcpDiscoverySpiAdapter discoSpi=client ? new TcpClientDiscoverySpi() : new TcpDiscoverySpi();
  discoSpi.setIpFinder(ipFinder);
  cfg.setDiscoverySpi(discoSpi);
  cfg.setCacheConfiguration();
  cfg.setClientMode(client);
  return cfg;
}
