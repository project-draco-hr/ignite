{
  try {
    checkpointSpi=new TestCheckpointSpi("task-checkpoints",cntr);
    Grid taskGrid=startGrid(0);
    checkpointSpi=new TestCheckpointSpi("job-checkpoints",cntr);
    Grid jobGrid=startGrid(1);
    taskGrid.compute().execute(new CheckpointCountingTestTask(),jobGrid.cluster().localNode());
  }
  finally {
    stopAllGrids();
  }
  assertEquals(cntr.get(),0);
}
