{
  if (!config().isPortableEnabled())   return o;
  if (o instanceof Map.Entry) {
    Map.Entry entry=(Map.Entry)o;
    Object key=entry.getKey();
    if (key instanceof GridPortableObject && !portableKeys)     key=((GridPortableObject<Object>)key).deserialize();
    Object val=entry.getValue();
    if (val instanceof GridPortableObject && !portableVals)     val=((GridPortableObject<Object>)val).deserialize();
    return F.t(key,val);
  }
 else   if (!portableKeys || !portableVals) {
    if (o instanceof Collection)     return unwrapPortablesIfNeeded((Collection<Object>)o,portableKeys,portableVals);
 else     if (o instanceof GridPortableObject)     return ((GridPortableObject<Object>)o).deserialize();
 else     return o;
  }
 else   return o;
}
