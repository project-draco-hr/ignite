{
  ApplicationContext springCtx;
  try {
    springCtx=U.applicationContext(springCfgUrl);
  }
 catch (  BeansException e) {
    throw new GridException("Failed to instantiate Spring XML application context [springUrl=" + springCfgUrl + ", err="+ e.getMessage()+ ']',e);
  }
  Map<String,GridConfiguration> cfgMap;
  try {
    cfgMap=springCtx.getBeansOfType(GridConfiguration.class);
  }
 catch (  BeansException e) {
    throw new GridException("Failed to instantiate bean [type=" + GridConfiguration.class + ", err="+ e.getMessage()+ ']',e);
  }
  if (cfgMap == null || cfgMap.isEmpty())   throw new GridException("Failed to find grid configuration in: " + springCfgUrl);
  return F.t(cfgMap.values(),springCtx);
}
