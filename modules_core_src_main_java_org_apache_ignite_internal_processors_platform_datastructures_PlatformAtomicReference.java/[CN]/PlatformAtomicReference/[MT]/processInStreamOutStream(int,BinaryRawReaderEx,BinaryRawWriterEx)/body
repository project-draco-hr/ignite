{
  if (type == OP_COMPARE_AND_SET_AND_GET) {
    Object val=reader.readObjectDetached();
    final Object cmp=reader.readObjectDetached();
    Object res=atomicRef.compareAndSetAndGet(val,cmp);
    if (cmp == res)     writer.writeBoolean(true);
 else {
      writer.writeBoolean(false);
      writer.writeObject(res);
    }
  }
 else   super.processInStreamOutStream(type,reader,writer);
}
