{
  IgniteCache<Object,Object> cache=grid(0).jcache(null);
  QueryCursor<List<?>> qry=null;
  int maximumQueryIteratorCount=cache.getConfiguration(CacheConfiguration.class).getMaximumQueryIteratorCount();
  for (int i=0; i < maximumQueryIteratorCount + 1; i++) {
    QueryCursor<List<?>> q=cache.queryFields(new QuerySqlPredicate("select _key from Integer where _key >= 0 order by _key"));
    assertEquals(0,q.iterator().next().get(0));
    if (qry == null)     qry=q;
  }
  final QueryCursor<List<?>> qry0=qry;
  GridTestUtils.assertThrows(log,new Callable<Object>(){
    @Override public Object call() throws Exception {
      int i=0;
      for (      List<?> row : qry0)       assertEquals(++i % 50,row.get(0));
      return null;
    }
  }
,IgniteException.class,null);
}
