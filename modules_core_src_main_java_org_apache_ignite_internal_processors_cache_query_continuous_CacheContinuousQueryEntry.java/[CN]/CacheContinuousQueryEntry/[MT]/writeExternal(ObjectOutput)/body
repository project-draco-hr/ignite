{
  boolean b=keyBytes != null;
  out.writeBoolean(b);
  if (b) {
    IgniteByteUtils.writeByteArray(out,keyBytes);
    if (newValBytes != null && !newValBytes.isNull()) {
      out.writeBoolean(true);
      out.writeBoolean(newValBytes.isPlain());
      IgniteByteUtils.writeByteArray(out,newValBytes.get());
    }
 else     out.writeBoolean(false);
    if (oldValBytes != null && !oldValBytes.isNull()) {
      out.writeBoolean(true);
      out.writeBoolean(oldValBytes.isPlain());
      IgniteByteUtils.writeByteArray(out,oldValBytes.get());
    }
 else     out.writeBoolean(false);
    U.writeString(out,cacheName);
    out.writeObject(depInfo);
  }
 else {
    out.writeObject(key);
    out.writeObject(newVal);
    out.writeObject(oldVal);
  }
}
