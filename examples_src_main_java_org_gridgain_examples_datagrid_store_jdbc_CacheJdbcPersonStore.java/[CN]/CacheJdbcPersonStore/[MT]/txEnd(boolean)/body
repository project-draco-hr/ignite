{
  IgniteTx tx=transaction();
  Map<Object,Object> props=session().properties();
  try (Connection conn=(Connection)props.remove(ATTR_NAME)){
    if (conn != null) {
      if (commit)       conn.commit();
 else       conn.rollback();
    }
    System.out.println(">>> Transaction ended [xid=" + tx.xid() + ", commit="+ commit+ ']');
  }
 catch (  SQLException e) {
    throw new CacheWriterException("Failed to end transaction [xid=" + tx.xid() + ", commit="+ commit+ ']',e);
  }
}
