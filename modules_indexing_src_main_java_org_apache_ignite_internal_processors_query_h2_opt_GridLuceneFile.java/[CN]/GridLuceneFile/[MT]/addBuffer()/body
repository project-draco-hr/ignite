{
  long buf=newBuffer();
synchronized (this) {
    buffers.add(buf);
    sizeInBytes+=BUFFER_SIZE;
  }
  if (dir != null)   dir.sizeInBytes.getAndAdd(BUFFER_SIZE);
  return buf;
}
