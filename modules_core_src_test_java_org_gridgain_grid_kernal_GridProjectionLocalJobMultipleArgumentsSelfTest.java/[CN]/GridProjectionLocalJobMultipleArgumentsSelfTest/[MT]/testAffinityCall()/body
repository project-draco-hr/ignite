{
  Collection<Integer> res=new ArrayList<>();
  for (  int i : F.asList(1,2,3)) {
    res.add(grid().compute().affinityCall(null,i,new IgniteCallable<Integer>(){
      @Override public Integer call(){
        ids.add(System.identityHashCode(this));
        return 10;
      }
    }
));
  }
  assertEquals(30,F.sumInt(res));
  assertEquals(3,ids.size());
}
