{
  if (buf.remaining() < bytes) {
    buf.compact();
    ch.read(buf);
    buf.flip();
    if (buf.remaining() < bytes)     throw new EOFException();
  }
}
