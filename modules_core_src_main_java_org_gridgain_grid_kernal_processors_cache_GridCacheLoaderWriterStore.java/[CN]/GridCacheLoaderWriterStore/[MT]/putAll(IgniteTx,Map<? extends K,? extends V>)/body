{
  if (writer == null)   return;
  Collection<Cache.Entry<? extends K,? extends V>> col=F.viewReadOnly(map.entrySet(),new C1<Map.Entry<? extends K,? extends V>,Cache.Entry<? extends K,? extends V>>(){
    @Override public Cache.Entry<? extends K,? extends V> apply(    Map.Entry<? extends K,? extends V> e){
      return new MapEntry<>(e);
    }
  }
);
  writer.writeAll(col);
}
