{
  if (qry instanceof GridSqlUnion) {
    GridSqlUnion union=(GridSqlUnion)qry;
    collectAllSpaces(union.left(),spaces);
    collectAllSpaces(union.right(),spaces);
  }
 else   collectAllSpacesInFrom(((GridSqlSelect)qry).from(),spaces);
  return spaces;
}
