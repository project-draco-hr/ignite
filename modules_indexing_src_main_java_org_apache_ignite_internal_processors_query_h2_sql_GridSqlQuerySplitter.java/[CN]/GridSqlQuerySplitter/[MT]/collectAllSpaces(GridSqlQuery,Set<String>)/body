{
  if (qry instanceof GridSqlUnion) {
    GridSqlUnion union=(GridSqlUnion)qry;
    collectAllSpaces(union.left(),spaces);
    collectAllSpaces(union.right(),spaces);
  }
 else {
    GridSqlSelect select=(GridSqlSelect)qry;
    collectAllSpacesInFrom(select.from(),spaces);
    for (    GridSqlElement el : select.select(false))     collectAllSpacesInSubqueries(el,spaces);
    collectAllSpacesInSubqueries(select.where(),spaces);
  }
  return qry;
}
