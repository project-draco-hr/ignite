{
  final GridUnsafeDataOutput out=new GridUnsafeDataOutput(512);
  assertTrue(GridTestUtils.waitForCondition(new WriteAndCheckPredicate(out,SMALL,256),WAIT_BUFFER_TIMEOUT));
  assertTrue(GridTestUtils.waitForCondition(new WriteAndCheckPredicate(out,SMALL,128),WAIT_BUFFER_TIMEOUT));
  assertTrue(GridTestUtils.waitForCondition(new WriteAndCheckPredicate(out,SMALL,64),WAIT_BUFFER_TIMEOUT));
  assertFalse(GridTestUtils.waitForCondition(new WriteAndCheckPredicate(out,SMALL,32),WAIT_BUFFER_TIMEOUT));
  assertTrue(GridTestUtils.waitForCondition(new WriteAndCheckPredicate(out,SMALL,64),WAIT_BUFFER_TIMEOUT));
}
