{
  GridUnsafeDataOutput out=new GridUnsafeDataOutput(512);
  for (int i=0; i < 11; i++) {
    Thread.sleep(100);
    writeSmall(out);
  }
  assertEquals(256,out.internalArray().length);
  writeBig(out);
  assertEquals(4096,out.internalArray().length);
  for (int i=0; i < 11; i++) {
    Thread.sleep(100);
    writeSmall(out);
  }
  assertEquals(4096,out.internalArray().length);
  for (int i=0; i < 11; i++) {
    Thread.sleep(100);
    writeSmall(out);
  }
  assertEquals(2048,out.internalArray().length);
}
