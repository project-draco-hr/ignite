{
switch (flag) {
case NULL:
    return null;
case HANDLE:
  if (oHandles.containsKey(handle))   return oHandles.get(handle);
off=handle;
return doReadObject(false);
case OBJ:
GridPortableClassDescriptor desc=ctx.descriptorForTypeId(userType,typeId);
if (desc == null) throw new GridPortableInvalidClassException("Unknown type ID: " + typeId);
Object obj=desc.read(this);
if (obj instanceof GridPortableObjectImpl) ((GridPortableObjectImpl)obj).context(ctx);
return obj;
default :
throw new GridPortableException("Invalid flag value: " + flag);
}
}
