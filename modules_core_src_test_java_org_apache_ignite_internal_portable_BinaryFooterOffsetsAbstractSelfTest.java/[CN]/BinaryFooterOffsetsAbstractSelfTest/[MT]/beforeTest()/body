{
  super.beforeTest();
  ctx=new PortableContext(BinaryCachingMetadataHandler.create(),new IgniteConfiguration());
  marsh=new PortableMarshaller();
  marsh.setCompactFooter(compactFooter());
  marsh.setTypeConfigurations(Arrays.asList(new BinaryTypeConfiguration(TestObject.class.getName())));
  marsh.setContext(new MarshallerContextTestImpl(null));
  IgniteUtils.invoke(PortableMarshaller.class,marsh,"setPortableContext",ctx);
}
