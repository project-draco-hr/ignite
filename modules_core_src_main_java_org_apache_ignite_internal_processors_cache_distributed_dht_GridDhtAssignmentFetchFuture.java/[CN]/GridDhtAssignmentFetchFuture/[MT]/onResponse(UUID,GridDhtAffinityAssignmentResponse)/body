{
  if (!res.topologyVersion().equals(key.get2())) {
    if (log.isDebugEnabled())     log.debug("Received affinity assignment for wrong topology version (will ignore) " + "[node=" + nodeId + ", res="+ res+ ", topVer="+ key.get2()+ ']');
    return;
  }
  GridDhtAffinityAssignmentResponse res0=null;
synchronized (this) {
    if (pendingNode != null && pendingNode.id().equals(nodeId))     res0=res;
  }
  if (res0 != null)   onDone(res);
}
