{
  if (!res.topologyVersion().equals(topVer)) {
    if (log.isDebugEnabled())     log.debug("Received affinity assignment for wrong topolgy version (will ignore) " + "[node=" + node + ", res="+ res+ ", topVer="+ topVer+ ']');
    return;
  }
  List<List<ClusterNode>> assignment=null;
synchronized (this) {
    if (pendingNode != null && pendingNode.equals(node))     assignment=res.affinityAssignment();
  }
  if (assignment != null)   onDone(assignment);
}
