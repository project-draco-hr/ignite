{
  final GridGgfsHandshakeRequest req=new GridGgfsHandshakeRequest();
  req.logDirectory(logDir);
  return withReconnectHandling(new CX1<GridGgfsHadoopIpcIo,GridPlainFuture<GridGgfsHandshakeResponse>>(){
    @Override public GridPlainFuture<GridGgfsHandshakeResponse> applyx(    GridGgfsHadoopIpcIo io) throws GridException {
      return io.send(req).chain(HANDSHAKE_RES);
    }
  }
).get();
}
