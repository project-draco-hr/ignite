{
  int size=16 + 1 + 24;
  if (ver instanceof GridCacheVersionEx)   size+=24;
  size+=1;
  size+=valBytes.length + 4;
  size+=(valClsLdrId == null ? 1 : 24);
  size+=(keyClsLdrId == null ? 1 : 24);
  byte[] arr=new byte[size];
  long off=BYTE_ARR_OFF;
  UNSAFE.putLong(arr,off,ttl);
  off+=8;
  UNSAFE.putLong(arr,off,expireTime);
  off+=8;
  off=U.writeVersion(arr,off,ver);
  UNSAFE.putBoolean(arr,off++,valIsByteArr);
  UNSAFE.putInt(arr,off,valBytes.length);
  off+=4;
  UNSAFE.copyMemory(valBytes,BYTE_ARR_OFF,arr,off,valBytes.length);
  off+=valBytes.length;
  off=U.writeGridUuid(arr,off,valClsLdrId);
  U.writeGridUuid(arr,off,keyClsLdrId);
  return arr;
}
