{
  boolean verEx=false;
  if (checkEx) {
    verEx=ver instanceof GridCacheVersionEx;
    UNSAFE.putBoolean(arr,off++,verEx);
  }
  if (verEx) {
    writeVersion(arr,off,ver.drVersion(),false);
    off+=24;
  }
  UNSAFE.putInt(arr,off,ver.topologyVersion());
  off+=4;
  UNSAFE.putInt(arr,off,ver.nodeOrderAndDrIdRaw());
  off+=4;
  UNSAFE.putLong(arr,off,ver.globalTime());
  off+=8;
  UNSAFE.putLong(arr,off,ver.order());
  off+=8;
  return off;
}
