{
  boolean verEx=false;
  if (checkEx) {
    verEx=ver instanceof GridCacheVersionEx;
    raw.writeBoolean(verEx);
  }
  raw.writeInt(ver.topologyVersion());
  raw.writeInt(ver.nodeOrderAndDrIdRaw());
  raw.writeLong(ver.globalTime());
  raw.writeLong(ver.order());
  if (verEx)   writeVersion(raw,ver.drVersion(),false);
}
