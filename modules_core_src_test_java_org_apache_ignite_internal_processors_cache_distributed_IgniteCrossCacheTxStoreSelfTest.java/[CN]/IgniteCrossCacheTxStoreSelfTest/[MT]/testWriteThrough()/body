{
  IgniteEx grid=grid(0);
  TestStore firstStore=null;
  for (  CacheConfiguration ccfg : grid(0).configuration().getCacheConfiguration()) {
    if (ccfg.getCacheStoreFactory() != null) {
      firstStore=(TestStore)ccfg.getCacheStoreFactory().create();
      break;
    }
  }
  assertNotNull(firstStore);
  Collection<String> evts=firstStore.events();
  try (Transaction tx=grid.transactions().txStart()){
    IgniteCache<Object,Object> cacheA=grid.jcache("cacheA");
    IgniteCache<Object,Object> cacheB=grid.jcache("cacheB");
    cacheA.put("1","1");
    cacheA.put("2","2");
    cacheB.put("1","1");
    cacheB.put("2","2");
    cacheA.remove("3");
    cacheA.remove("4");
    cacheB.remove("3");
    cacheB.remove("4");
    cacheA.put("5","5");
    cacheA.remove("6");
    cacheB.put("7","7");
    tx.commit();
  }
   assertEqualsCollections(F.asList("writeAll cacheA 2","writeAll cacheB 2","deleteAll cacheA 2","deleteAll cacheB 2","write cacheA","delete cacheA","write cacheB","sessionEnd true"),evts);
}
