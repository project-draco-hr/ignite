{
  int cnt=0;
  while (true) {
    try {
      return (Long)cache.transformAndCompute(queueKey,c);
    }
 catch (    GridCachePartialUpdateException e) {
      log.error("Failed: " + e,e);
      if (cnt++ == MAX_UPDATE_RETRIES)       throw e;
 else       U.warn(log,"Failed to update queue header, will retry [err=" + e + ']');
    }
  }
}
