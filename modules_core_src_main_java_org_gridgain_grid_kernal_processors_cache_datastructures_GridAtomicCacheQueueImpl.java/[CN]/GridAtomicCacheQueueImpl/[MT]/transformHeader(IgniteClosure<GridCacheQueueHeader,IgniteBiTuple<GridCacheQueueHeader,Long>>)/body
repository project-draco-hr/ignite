{
  int cnt=0;
  while (true) {
    try {
      return (Long)cache.transformAndCompute(queueKey,c);
    }
 catch (    GridCachePartialUpdateException e) {
      if (cnt++ == MAX_UPDATE_RETRIES)       throw e;
 else {
        U.warn(log,"Failed to update queue header, will retry [err=" + e + ']');
        U.sleep(RETRY_DELAY);
      }
    }
  }
}
