{
  Random rnd=new Random();
  while (isCanceled) {
    try {
      Collection<GridNode> nodes=getSpi().getRemoteNodes();
      pingNode(UUID.randomUUID(),false);
      for (      GridNode item : nodes) {
        pingNode(item.id(),true);
      }
      pingNode(UUID.randomUUID(),false);
    }
 catch (    Exception e) {
      error("Can't get SPI.",e);
    }
synchronized (mux) {
      if (isCanceled) {
        try {
          mux.wait(getPingFrequency() * (1 + rnd.nextInt(10)));
        }
 catch (        InterruptedException e) {
        }
      }
    }
  }
}
