{
  boolean sync;
  if (!F.isEmpty(dhtMap) || !F.isEmpty(nearMap))   sync=finish(dhtMap,nearMap);
 else   if (!commit && !F.isEmpty(tx.lockTransactionNodes()))   sync=rollbackLockTransactions(tx.lockTransactionNodes());
 else   sync=false;
  markInitialized();
  if (!sync)   onComplete();
}
