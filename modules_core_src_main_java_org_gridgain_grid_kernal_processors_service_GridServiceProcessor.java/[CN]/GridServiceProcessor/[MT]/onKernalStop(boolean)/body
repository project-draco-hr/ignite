{
  busyLock.block();
  ctx.event().removeLocalEventListener(topLsnr);
  ctx.event().removeLocalEventListener(depLsnr);
  ctx.event().removeLocalEventListener(assignLsnr);
  Map<String,Collection<GridServiceContextImpl>> locSvcs;
synchronized (this.locSvcs) {
    locSvcs=new HashMap<>(this.locSvcs);
  }
  for (  Collection<GridServiceContextImpl> ctxs : locSvcs.values()) {
synchronized (ctxs) {
      cancel(ctxs,ctxs.size());
    }
  }
  if (log.isDebugEnabled())   log.debug("Stopped service processor.");
}
