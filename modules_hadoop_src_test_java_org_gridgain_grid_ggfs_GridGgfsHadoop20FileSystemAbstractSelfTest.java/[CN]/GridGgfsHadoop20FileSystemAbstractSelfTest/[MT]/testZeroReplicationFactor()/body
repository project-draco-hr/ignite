{
  if (mode == PRIMARY) {
    Path ggfsHome=new Path(primaryFsUri);
    Path file=new Path(ggfsHome,"someFile");
    try (FSDataOutputStream out=fs.create(file,EnumSet.noneOf(CreateFlag.class),Options.CreateOpts.perms(FsPermission.getDefault()),Options.CreateOpts.repFac((short)1))){
      out.write(new byte[1024 * 1024]);
    }
     IgniteFs igniteFs=grid(0).ggfs("ggfs");
    GridGgfsPath filePath=new GridGgfsPath("/someFile");
    GridGgfsFile fileInfo=igniteFs.info(filePath);
    Collection<GridGgfsBlockLocation> locations=igniteFs.affinity(filePath,0,fileInfo.length());
    assertEquals(1,locations.size());
    GridGgfsBlockLocation location=F.first(locations);
    assertEquals(1,location.nodeIds().size());
  }
}
