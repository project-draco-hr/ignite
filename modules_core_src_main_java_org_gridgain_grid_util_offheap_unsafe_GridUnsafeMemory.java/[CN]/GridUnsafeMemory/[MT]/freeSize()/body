{
  if (total == 0)   return 0;
  long diff=total - allocated.get();
  return diff < 0 ? 0 : diff;
}
