{
  Ignite ignite=ignite(0);
  try {
    createCache(cacheMode,writeSync,fairAff,ignite,CACHE1);
    createCache(cacheMode,writeSync,fairAff,ignite,CACHE2);
    txOperations(PESSIMISTIC,REPEATABLE_READ,crossCacheTx,false);
    txOperations(PESSIMISTIC,REPEATABLE_READ,crossCacheTx,true);
    txOperations(OPTIMISTIC,REPEATABLE_READ,crossCacheTx,false);
    txOperations(OPTIMISTIC,REPEATABLE_READ,crossCacheTx,true);
    if (writeSync == FULL_SYNC) {
      txOperations(OPTIMISTIC,SERIALIZABLE,crossCacheTx,false);
      txOperations(OPTIMISTIC,SERIALIZABLE,crossCacheTx,true);
    }
  }
  finally {
    ignite.destroyCache(CACHE1);
    ignite.destroyCache(CACHE2);
  }
}
