{
  if (configureTimeout) {
    GridCacheAdapter<Integer,Integer> cache=((IgniteKernal)g).internalCache(cacheName);
    cache.context().tm().slowTxWarnTimeout(500);
  }
  IgniteCache<Object,Object> cache1=g.jcache(cacheName);
  IgniteTx tx=g.transactions().txStart();
  try {
    cache1.put(1,1);
    if (simulateTimeout)     Thread.sleep(800);
    tx.commit();
  }
  finally {
    tx.close();
  }
  tx=g.transactions().txStart();
  try {
    cache1.put(1,1);
    if (simulateTimeout)     Thread.sleep(800);
    tx.rollback();
  }
  finally {
    tx.close();
  }
}
