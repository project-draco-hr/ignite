{
  IgniteConfiguration cfg=super.getConfiguration(gridName);
  cfg.setClientMode(client);
  CacheConfiguration cc=new CacheConfiguration();
  cc.setName(CACHE_NAME);
  cc.setAtomicityMode(CacheAtomicityMode.TRANSACTIONAL);
  cc.setCacheStoreFactory(factory);
  if (client && nearEnabled)   cc.setNearConfiguration(new NearCacheConfiguration());
  cfg.setCacheConfiguration(cc);
  TcpDiscoverySpi disco=new TcpDiscoverySpi();
  disco.setIpFinder(IP_FINDER);
  cfg.setDiscoverySpi(disco);
  return cfg;
}
