{
  int part=RND.nextInt(affinity().partitions());
  CacheAffinityFunctionContext ctx=new GridCacheAffinityFunctionContextImpl(new ArrayList<>(grid(0).nodes()),null,null,1,1);
  CacheAffinityFunction aff=affinity();
  List<List<ClusterNode>> assignment=aff.assignPartitions(ctx);
  assertEquals(F.first(nodes(assignment,aff,part)),cache().affinity().mapPartitionToNode(part));
}
