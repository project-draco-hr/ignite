{
  IgniteConfiguration cfg=super.getConfiguration(gridName);
  GridTcpDiscoverySpi discoSpi=new GridTcpDiscoverySpi();
  discoSpi.setIpFinder(ipFinder);
  cfg.setDiscoverySpi(discoSpi);
  cfg.setCommunicationSpi(new CommunicationSpi());
  cfg.setMarshaller(new GridOptimizedMarshaller(false));
  GridCacheConfiguration ccfg=defaultCacheConfiguration();
  ccfg.setCacheMode(PARTITIONED);
  cfg.setCacheConfiguration(ccfg);
  return cfg;
}
