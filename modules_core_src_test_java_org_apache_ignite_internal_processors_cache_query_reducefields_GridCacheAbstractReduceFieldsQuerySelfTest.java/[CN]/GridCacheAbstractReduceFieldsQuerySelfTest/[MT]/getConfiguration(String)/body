{
  IgniteConfiguration cfg=super.getConfiguration(gridName);
  if (hasCache)   cfg.setCacheConfiguration(cache(null));
 else   cfg.setCacheConfiguration();
  cfg.setDiscoverySpi(discovery());
  cfg.setMarshaller(new IgniteOptimizedMarshaller(false));
  return cfg;
}
