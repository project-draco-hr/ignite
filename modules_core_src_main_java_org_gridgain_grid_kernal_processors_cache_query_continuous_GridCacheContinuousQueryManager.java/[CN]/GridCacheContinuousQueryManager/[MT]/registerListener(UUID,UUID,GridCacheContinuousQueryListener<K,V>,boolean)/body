{
  ListenerInfo<K,V> info=new ListenerInfo<>(lsnr);
  boolean added;
  if (internal) {
    added=intLsnrs.putIfAbsent(lsnrId,info) == null;
    if (added)     intLsnrCnt.incrementAndGet();
  }
 else {
    added=lsnrs.putIfAbsent(lsnrId,info) == null;
    if (added) {
      lsnrCnt.incrementAndGet();
      if (cctx.gridEvents().isRecordable(EVT_CACHE_CONTINUOUS_QUERY_EXECUTED)) {
        cctx.gridEvents().record(new GridCacheQueryEvent<>(cctx.localNode(),"Continuous query executed.",EVT_CACHE_CONTINUOUS_QUERY_EXECUTED,cctx.namex(),null,null,null,lsnr.filter(),null,nodeId));
      }
    }
  }
  return added;
}
