{
synchronized (mux) {
    Collection<GridTcpDiscoveryNode> excluded=F.concat(false,failedNodes,leavingNodes);
    if (!F.isEmpty(filter))     excluded=F.concat(false,excluded,filter);
    return ring.coordinator(excluded);
  }
}
