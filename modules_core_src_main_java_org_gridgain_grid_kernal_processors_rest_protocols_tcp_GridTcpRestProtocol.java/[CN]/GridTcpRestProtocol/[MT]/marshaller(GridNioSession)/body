{
  GridClientMarshaller marsh=ses.meta(MARSHALLER.ordinal());
  if (marsh == null) {
    U.warn(log,"No marshaller defined for NIO session, using PROTOBUF as default [ses=" + ses + ']');
    if (protobufMarshaller == null)     throw new GridException("Failed to use Protobuf marshaller (session will be closed). " + "Is gridgain-protobuf module added to classpath?");
    marsh=protobufMarshaller;
    ses.addMeta(MARSHALLER.ordinal(),marsh);
  }
  return marsh;
}
