{
  if (isRestEnabled()) {
    addHandler(new GridCacheCommandHandler(ctx));
    addHandler(new GridTaskCommandHandler(ctx));
    addHandler(new GridTopologyCommandHandler(ctx));
    addHandler(new GridVersionCommandHandler(ctx));
    addHandler(new DataStructuresCommandHandler(ctx));
    addHandler(new QueryCommandHandler(ctx));
    addHandler(new GridLogCommandHandler(ctx));
    startTcpProtocol();
    startHttpProtocol();
    for (    GridRestProtocol proto : protos) {
      Collection<IgniteBiTuple<String,Object>> props=proto.getProperties();
      if (props != null) {
        for (        IgniteBiTuple<String,Object> p : props) {
          String key=p.getKey();
          if (key == null)           continue;
          if (ctx.hasNodeAttribute(key))           throw new IgniteCheckedException("Node attribute collision for attribute [processor=GridRestProcessor, attr=" + key + ']');
          ctx.addNodeAttribute(key,p.getValue());
        }
      }
    }
  }
}
