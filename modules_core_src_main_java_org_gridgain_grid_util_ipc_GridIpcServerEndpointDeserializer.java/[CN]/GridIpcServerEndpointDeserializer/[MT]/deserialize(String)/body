{
  A.notNull(endpointCfg,"endpointCfg");
  try {
    JSONObject jsonObj=JSONObject.fromObject(endpointCfg);
    String endpointType=jsonObj.getString("type");
    Class endpointCls;
switch (endpointType) {
case "shmem":
      endpointCls=GridIpcSharedMemoryServerEndpoint.class;
    break;
case "tcp":
  endpointCls=GridIpcServerTcpEndpoint.class;
break;
default :
throw new GridException("Failed to create server endpoint (type is unknown): " + endpointType);
}
jsonObj.discard("type");
return (GridIpcServerEndpoint)JSONObject.toBean(jsonObj,endpointCls);
}
 catch (JSONException e) {
throw new GridException("Failed to parse server endpoint.",e);
}
}
