{
  curr=null;
  while (idx < docs.length) {
    Document doc;
    try {
      doc=searcher.doc(docs[idx++].doc);
    }
 catch (    IOException e) {
      throw new IgniteSpiException(e);
    }
    String keyStr=doc.get(KEY_FIELD_NAME);
    IndexingEntity<K> k=marshaller.unmarshal(Base64.decodeBase64(keyStr));
    byte[] valBytes=doc.getBinaryValue(VAL_FIELD_NAME);
    IndexingEntity<V> v=valBytes != null ? marshaller.<V>unmarshal(valBytes) : type.valueClass() == String.class ? new IndexingEntityAdapter<>((V)doc.get(VAL_STR_FIELD_NAME),null) : null;
    if (!filter(k.value(),v == null ? null : v.value()))     continue;
    byte[] ver=doc.getBinaryValue(VER_FIELD_NAME);
    curr=new IndexingKeyValueRowAdapter<>(k,v,ver);
    break;
  }
}
