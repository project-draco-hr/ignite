{
  if (leaveLatch != null)   return;
  if (!ignite.configuration().getNodeId().equals(msg.creatorNodeId())) {
    TcpDiscoveryNode node=rmtNodes.remove(msg.failedNodeId());
    if (node == null) {
      if (log.isDebugEnabled())       log.debug("Discarding node failed message since node is not found [msg=" + msg + ']');
      return;
    }
    Collection<ClusterNode> top=updateTopologyHistory(msg.topologyVersion());
    if (!pending && joinLatch.getCount() > 0) {
      if (log.isDebugEnabled())       log.debug("Discarding node failed message (join process is not finished): " + msg);
      return;
    }
    notifyDiscovery(EVT_NODE_FAILED,msg.topologyVersion(),node,top);
    stats.onNodeFailed();
  }
}
