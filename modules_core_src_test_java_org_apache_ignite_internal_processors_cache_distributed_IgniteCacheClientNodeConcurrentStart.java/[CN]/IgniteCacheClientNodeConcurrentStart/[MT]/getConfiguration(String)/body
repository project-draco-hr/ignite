{
  IgniteConfiguration cfg=super.getConfiguration(gridName);
  assertNotNull(clientNodes);
  ((TcpDiscoverySpi)cfg.getDiscoverySpi()).setIpFinder(ipFinder);
  boolean client=false;
  for (  Integer clientIdx : clientNodes) {
    if (getTestGridName(clientIdx).equals(gridName)) {
      client=true;
      break;
    }
  }
  cfg.setClientMode(client);
  CacheConfiguration ccfg=new CacheConfiguration();
  ccfg.setBackups(0);
  ccfg.setRebalanceMode(SYNC);
  cfg.setCacheConfiguration(ccfg);
  return cfg;
}
