{
  startServerNodes(2);
  IgniteMessaging msg=grid("server-1").message();
  UUID id=msg.remoteListen(null,new MessageListener());
  try {
    startClientNodes(1);
    assertEquals(G.ignite("server-0").cluster().localNode().id(),((TcpDiscoveryNode)G.ignite("client-0").cluster().localNode()).clientRouterNodeId());
    checkNodes(2,1);
    msgLatch=new CountDownLatch(3);
    msg.send(null,"Message");
    await(msgLatch);
  }
  finally {
    msg.stopRemoteListen(id);
  }
}
