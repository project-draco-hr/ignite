{
  boolean depEnabled=ctx.gridDeploy().enabled();
  boolean valIsByteArr=val != null && val instanceof byte[];
  if (keyBytes == null && depEnabled)   keyBytes=CU.marshal(ctx,key);
  keyBytesSent=depEnabled || key == null;
  if (valBytes == null && val != null && !valIsByteArr && ctx.sendValueBytes())   valBytes=CU.marshal(ctx,val);
  valBytesSent=(valBytes != null && ctx.sendValueBytes() && !valIsByteArr) || val == null;
}
