{
  assert stopping;
  unregisterMBean();
  if (nioSrvr != null)   nioSrvr.stop();
  U.cancel(shmemAcceptWorker);
  U.join(shmemAcceptWorker,log);
  U.interrupt(idleClientWorker);
  U.interrupt(clientFlushWorker);
  U.interrupt(sockTimeoutWorker);
  U.interrupt(recoveryWorker);
  U.join(idleClientWorker,log);
  U.join(clientFlushWorker,log);
  U.join(sockTimeoutWorker,log);
  U.join(recoveryWorker,log);
  U.cancel(shmemWorkers);
  U.join(shmemWorkers,log);
  shmemWorkers.clear();
  for (  GridCommunicationClient client : clients.values())   client.forceClose();
  nioSrvr=null;
  idleClientWorker=null;
  boundTcpPort=-1;
  if (log.isDebugEnabled())   log.debug(stopInfo());
}
