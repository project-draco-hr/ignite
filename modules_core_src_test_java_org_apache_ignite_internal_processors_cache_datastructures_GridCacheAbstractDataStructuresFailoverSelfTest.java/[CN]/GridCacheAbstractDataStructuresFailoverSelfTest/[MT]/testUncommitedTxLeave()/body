{
  final int val=10;
  grid(0).atomicLong(STRUCTURE_NAME,val,true);
  GridTestUtils.runAsync(new Callable<Object>(){
    @Override public Object call() throws Exception {
      Ignite g=startGrid(NEW_GRID_NAME);
      try {
        g.transactions().txStart();
        g.cache(TRANSACTIONAL_CACHE_NAME).put(1,1);
        assertEquals(val + 1,g.atomicLong(STRUCTURE_NAME,val,false).incrementAndGet());
      }
  finally {
        stopGrid(NEW_GRID_NAME);
      }
      return null;
    }
  }
).get();
  waitForDiscovery(G.allGrids().toArray(new Ignite[gridCount()]));
  assertEquals(val + 1,grid(0).atomicLong(STRUCTURE_NAME,val,false).get());
}
