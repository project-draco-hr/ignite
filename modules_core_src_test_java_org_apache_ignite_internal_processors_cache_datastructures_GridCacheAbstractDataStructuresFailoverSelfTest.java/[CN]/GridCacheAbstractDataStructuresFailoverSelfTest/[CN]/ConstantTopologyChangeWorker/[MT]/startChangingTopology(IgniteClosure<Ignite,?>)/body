{
  IgniteInternalFuture<?> fut=GridTestUtils.runMultiThreadedAsync(new CA(){
    @Override public void apply(){
      try {
        for (int i=0; i < TOP_CHANGE_CNT; i++) {
          if (failed.get())           return;
          String name=UUID.randomUUID().toString();
          try {
            Ignite g=startGrid(name);
            callback.apply(g);
          }
  finally {
            stopGrid(name);
          }
        }
      }
 catch (      Exception e) {
        if (failed.compareAndSet(false,true))         throw F.wrap(e);
      }
    }
  }
,TOP_CHANGE_THREAD_CNT,"topology-change-thread");
  return fut;
}
