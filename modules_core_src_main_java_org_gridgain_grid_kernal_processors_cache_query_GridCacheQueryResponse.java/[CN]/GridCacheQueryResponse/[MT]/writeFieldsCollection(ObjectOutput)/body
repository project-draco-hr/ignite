{
  assert fields;
  out.writeInt(data != null ? data.size() : -1);
  if (data == null)   return;
  for (  Object o : data) {
    List<GridIndexingEntity<?>> list=(List<GridIndexingEntity<?>>)o;
    out.writeInt(list.size());
    for (    GridIndexingEntity<?> idxEnt : list) {
      try {
        out.writeObject(idxEnt.value());
      }
 catch (      IgniteSpiException e) {
        throw new IOException("Failed to write indexing entity: " + idxEnt,e);
      }
    }
  }
}
