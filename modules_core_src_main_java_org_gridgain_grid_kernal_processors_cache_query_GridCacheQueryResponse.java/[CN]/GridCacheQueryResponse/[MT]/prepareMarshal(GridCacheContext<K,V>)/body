{
  super.prepareMarshal(ctx);
  if (err != null)   errBytes=ctx.marshaller().marshal(err);
  metaDataBytes=marshalCollection(metadata,ctx);
  dataBytes=fields ? marshalFieldsCollection(data,ctx) : marshalCollection(data,ctx);
  if (ctx.deploymentEnabled() && !F.isEmpty(data)) {
    for (    Object o : data) {
      if (o instanceof Map.Entry) {
        Map.Entry e=(Map.Entry)o;
        prepareObject(e.getKey(),ctx);
        prepareObject(e.getValue(),ctx);
      }
    }
  }
}
