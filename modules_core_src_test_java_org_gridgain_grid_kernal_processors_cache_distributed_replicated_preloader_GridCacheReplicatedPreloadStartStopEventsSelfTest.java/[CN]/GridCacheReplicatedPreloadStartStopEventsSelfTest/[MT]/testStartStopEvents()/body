{
  Ignite ignite=startGrid(0);
  final AtomicInteger preloadStartCnt=new AtomicInteger();
  final AtomicInteger preloadStopCnt=new AtomicInteger();
  ignite.events().localListen(new IgnitePredicate<GridEvent>(){
    @Override public boolean apply(    GridEvent e){
      if (e.type() == EVT_CACHE_PRELOAD_STARTED)       preloadStartCnt.incrementAndGet();
 else       if (e.type() == EVT_CACHE_PRELOAD_STOPPED)       preloadStopCnt.incrementAndGet();
 else       fail("Unexpected event type: " + e.type());
      return true;
    }
  }
,EVT_CACHE_PRELOAD_STARTED,EVT_CACHE_PRELOAD_STOPPED);
  startGrid(1);
  startGrid(2);
  startGrid(3);
  assertTrue("Unexpected start count: " + preloadStartCnt.get(),preloadStartCnt.get() <= 1);
  assertTrue("Unexpected stop count: " + preloadStopCnt.get(),preloadStopCnt.get() <= 1);
}
