{
  if (log.isDebugEnabled())   log.debug("Attempting to cancel transaction: " + tx);
  if (onCancelled()) {
    try {
      tx.rollback();
    }
 catch (    GridException ex) {
      U.error(log,"Failed to rollback the transaction: " + tx,ex);
    }
    if (log.isDebugEnabled())     log.debug("Transaction was cancelled and rolled back: " + tx);
    return true;
  }
  return isCancelled();
}
