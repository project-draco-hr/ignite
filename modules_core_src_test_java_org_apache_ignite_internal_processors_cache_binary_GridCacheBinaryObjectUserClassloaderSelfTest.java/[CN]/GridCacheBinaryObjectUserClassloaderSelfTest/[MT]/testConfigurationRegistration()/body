{
  try {
    customBinaryConf=true;
    Ignite i1=startGrid(1);
    Ignite i2=startGrid(2);
    IgniteCache<Integer,Object> cache1=i1.cache(null);
    IgniteCache<Integer,Object> cache2=i2.cache(null);
    ClassLoader ldr=i1.configuration().getClassLoader();
    Object v1=ldr.loadClass("org.apache.ignite.tests.p2p.CacheDeploymentTestValue3").newInstance();
    cache1.put(1,v1);
    deserialized=false;
    cache2.get(1);
    assertTrue(deserialized);
  }
  finally {
    customBinaryConf=false;
  }
}
