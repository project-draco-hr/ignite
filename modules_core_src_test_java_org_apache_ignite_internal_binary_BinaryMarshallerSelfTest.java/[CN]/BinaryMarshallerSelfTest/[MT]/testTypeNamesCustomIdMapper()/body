{
  BinaryTypeConfiguration customType1=new BinaryTypeConfiguration(Value.class.getName());
  customType1.setIdMapper(new BinaryIdMapper(){
    @Override public int typeId(    String clsName){
      return 300;
    }
    @Override public int fieldId(    int typeId,    String fieldName){
      return 0;
    }
  }
);
  BinaryTypeConfiguration customType2=new BinaryTypeConfiguration("org.gridgain.NonExistentClass1");
  customType2.setIdMapper(new BinaryIdMapper(){
    @Override public int typeId(    String clsName){
      return 400;
    }
    @Override public int fieldId(    int typeId,    String fieldName){
      return 0;
    }
  }
);
  BinaryTypeConfiguration customType3=new BinaryTypeConfiguration("NonExistentClass2");
  customType3.setIdMapper(new BinaryIdMapper(){
    @Override public int typeId(    String clsName){
      return 500;
    }
    @Override public int fieldId(    int typeId,    String fieldName){
      return 0;
    }
  }
);
  BinaryTypeConfiguration customType4=new BinaryTypeConfiguration("NonExistentClass0");
  customType4.setIdMapper(new BinaryIdMapper(){
    @Override public int typeId(    String clsName){
      return 0;
    }
    @Override public int fieldId(    int typeId,    String fieldName){
      return 0;
    }
  }
);
  BinaryTypeConfiguration customType5=new BinaryTypeConfiguration(DateClass1.class.getName());
  customType5.setIdMapper(new BinaryBasicIdMapper(false));
  BinaryTypeConfiguration customType6=new BinaryTypeConfiguration(MyTestClass.class.getName());
  customType6.setIdMapper(new BinaryBasicIdMapper(true));
  customType6.setNameMapper(new BinaryBasicNameMapper(true));
  BinaryMarshaller marsh=binaryMarshaller(new BinaryBasicNameMapper(false),new BinaryIdMapper(){
    @Override public int typeId(    String clsName){
      if ("org.blabla.NotConfiguredSpecialClass".equals(clsName))       return 0;
 else       if (Key.class.getName().equals(clsName))       return 991;
 else       if ("org.gridgain.NonExistentClass3".equals(clsName))       return 992;
 else       if ("NonExistentClass4".equals(clsName))       return 993;
      return 999;
    }
    @Override public int fieldId(    int typeId,    String fieldName){
      return 0;
    }
  }
,Arrays.asList(new BinaryTypeConfiguration(Key.class.getName()),new BinaryTypeConfiguration("org.gridgain.NonExistentClass3"),new BinaryTypeConfiguration("NonExistentClass4"),customType1,customType2,customType3,customType4,customType5,customType6));
  BinaryContext ctx=binaryContext(marsh);
  assertEquals(999,ctx.typeId("NotConfiguredClass"));
  assertEquals(999,ctx.typeId("org.blabla.NotConfiguredClass"));
  assertEquals("notconfiguredspecialclass".hashCode(),ctx.typeId("org.blabla.NotConfiguredSpecialClass"));
  assertEquals(991,ctx.typeId(Key.class.getName()));
  assertEquals(992,ctx.typeId("org.gridgain.NonExistentClass3"));
  assertEquals(993,ctx.typeId("NonExistentClass4"));
  assertEquals(300,ctx.typeId(Value.class.getName()));
  assertEquals(400,ctx.typeId("org.gridgain.NonExistentClass1"));
  assertEquals(500,ctx.typeId("NonExistentClass2"));
  assertEquals("nonexistentclass0".hashCode(),ctx.typeId("NonExistentClass0"));
  assertEquals(DateClass1.class.getName().hashCode(),ctx.typeId(DateClass1.class.getName()));
  assertEquals("mytestclass".hashCode(),ctx.typeId(MyTestClass.class.getName()));
}
