{
  return new CacheEntrySerializablePredicate(new CacheEntryPredicateAdapter(){
    @Override public boolean apply(    GridCacheEntryEx e){
      try {
        Object val=CU.value(e.rawGetOrUnmarshal(true),e.context(),false);
        return val != null && valType.isAssignableFrom(val.getClass()) && keyType.isAssignableFrom(e.key().value(e.context(),false).getClass());
      }
 catch (      IgniteCheckedException err) {
        throw new IgniteException(err);
      }
    }
  }
);
}
