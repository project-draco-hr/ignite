{
  int addedBits=numBits - (8 - bitIdx);
  int addedBytes=(addedBits + 8) / 8;
  if (dataIdx + addedBytes >= data.length) {
    byte[] tmp=new byte[data.length * 2];
    System.arraycopy(data,0,tmp,0,data.length);
    data=tmp;
  }
}
