{
  CacheConfiguration cache=defaultCacheConfiguration();
  cache.setName(name);
  cache.setCacheMode(cacheMode());
  cache.setAtomicityMode(atomicityMode());
  cache.setWriteSynchronizationMode(CacheWriteSynchronizationMode.FULL_SYNC);
  cache.setPreloadMode(SYNC);
  CacheQueryConfiguration qcfg=new CacheQueryConfiguration();
  qcfg.setIndexPrimitiveKey(primitives);
  qcfg.setIndexPrimitiveValue(primitives);
  qcfg.setIndexFixedTyping(true);
  cache.setQueryConfiguration(qcfg);
  if (cacheMode() == PARTITIONED)   cache.setBackups(1);
  return cache;
}
