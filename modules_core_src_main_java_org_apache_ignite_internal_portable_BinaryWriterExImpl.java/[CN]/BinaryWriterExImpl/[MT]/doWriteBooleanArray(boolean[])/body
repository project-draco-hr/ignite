{
  if (val == null)   out.writeByte(NULL);
 else {
    if (tryWriteAsHandle(val))     return;
    out.unsafeEnsure(1 + 4);
    out.unsafeWriteByte(BOOLEAN_ARR);
    out.unsafeWriteInt(val.length);
    out.writeBooleanArray(val);
  }
}
