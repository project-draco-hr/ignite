{
  PortableContext ctx=new PortableContext(META_HND,null);
  PortableMarshaller marsh=new PortableMarshaller();
  marsh.setConvertStringToBytes(stringAsBytes);
  marsh.setTypeConfigurations(Arrays.asList(new PortableTypeConfiguration(TestObject.class.getName()),new PortableTypeConfiguration(TestOuterObject.class.getName()),new PortableTypeConfiguration(TestInnerObject.class.getName())));
  marsh.setContext(new MarshallerContextTestImpl(null));
  IgniteUtils.invoke(PortableMarshaller.class,marsh,"setPortableContext",ctx);
  return marsh;
}
