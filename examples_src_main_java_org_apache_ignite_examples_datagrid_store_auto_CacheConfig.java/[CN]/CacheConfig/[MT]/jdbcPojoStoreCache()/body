{
  CacheConfiguration<Long,Person> cfg=new CacheConfiguration<>();
  cfg.setAtomicityMode(TRANSACTIONAL);
  cfg.setCacheStoreFactory(new Factory<CacheStore<? super Long,? super Person>>(){
    @Override public CacheStore<? super Long,? super Person> create(){
      CacheJdbcPojoStore<Long,Person> store=new CacheJdbcPojoStore<>();
      store.setDataSource(JdbcConnectionPool.create("jdbc:h2:tcp://localhost/mem:ExampleDb","sa",""));
      return store;
    }
  }
);
  CacheTypeMetadata tm=new CacheTypeMetadata();
  tm.setDatabaseTable("PERSON");
  tm.setKeyType("java.lang.Long");
  tm.setValueType("org.apache.ignite.examples.datagrid.store.Person");
  tm.setKeyFields(F.asList(new CacheTypeFieldMetadata("ID",Types.BIGINT,"id",Long.class)));
  tm.setValueFields(F.asList(new CacheTypeFieldMetadata("ID",Types.BIGINT,"id",long.class),new CacheTypeFieldMetadata("FIRST_NAME",Types.VARCHAR,"firstName",String.class),new CacheTypeFieldMetadata("LAST_NAME",Types.VARCHAR,"lastName",String.class)));
  cfg.setTypeMetadata(F.asList(tm));
  cfg.setWriteBehindEnabled(true);
  cfg.setReadThrough(true);
  cfg.setWriteThrough(true);
  return cfg;
}
