{
  GridSpiTestContext ctx=super.initSpiContext();
  GridTestNode locNode=new GridTestNode(UUID.randomUUID());
  addSpiDependency(locNode);
  ctx.setLocalNode(locNode);
  GridTestNode rmtNode=new GridTestNode(UUID.randomUUID());
  addSpiDependency(rmtNode);
  rmtNode.setAttribute(U.spiAttribute(getSpi(),WAIT_JOBS_THRESHOLD_NODE_ATTR),getWaitJobsThreshold());
  ClusterDiscoveryMetricsAdapter metrics=new ClusterDiscoveryMetricsAdapter();
  metrics.setCurrentWaitingJobs(2);
  rmtNode.setMetrics(metrics);
  ctx.addNode(rmtNode);
  return ctx;
}
