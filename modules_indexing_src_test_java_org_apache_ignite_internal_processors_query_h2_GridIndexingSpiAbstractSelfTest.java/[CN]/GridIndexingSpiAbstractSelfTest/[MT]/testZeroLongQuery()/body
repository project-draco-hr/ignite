{
  IgniteH2Indexing spi=getIndexing();
  long longQryExecTime=-1;
  GridStringLogger log=new GridStringLogger(false,this.log);
  IgniteLogger oldLog=GridTestUtils.getFieldValue(spi,"log");
  spi.configuration().setLongQueryExecutionTimeout(longQryExecTime);
  spi.configuration().setLongQueryExplain(true);
  try {
    GridTestUtils.setFieldValue(spi,"log",log);
    String sql="SELECT * FROM MyNonExistingTable";
    GridQueryFieldsResult res=spi.queryFields(null,sql,Collections.emptyList(),null);
    assertFalse(res.iterator().hasNext());
    String logStr=log.toString();
    F.println(logStr);
    assertTrue(logStr.contains("Failed to explain plan because required table does not exist"));
  }
  finally {
    GridTestUtils.setFieldValue(spi,"log",oldLog);
    spi.configuration().setLongQueryExecutionTimeout(3000);
  }
}
