{
  IgniteConfiguration cfg=super.getConfiguration(gridName);
  CacheConfiguration cCfg=defaultCacheConfiguration();
  cCfg.setCacheMode(PARTITIONED);
  cCfg.setBackups(1);
  cCfg.setNearConfiguration(new NearCacheConfiguration());
  cCfg.setRebalanceMode(SYNC);
  cCfg.setWriteSynchronizationMode(FULL_SYNC);
  TcpDiscoverySpiAdapter disc;
  if (((gridName.charAt(gridName.length() - 1) - '0') & 1) == 0)   disc=new TcpDiscoverySpi();
 else   disc=new TcpClientDiscoverySpi();
  disc.setIpFinder(IP_FINDER);
  cfg.setCacheConfiguration(cCfg);
  cfg.setDiscoverySpi(disc);
  return cfg;
}
