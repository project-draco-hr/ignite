{
  idx=cmp == null ? new SnapTreeMap<IndexKey<V>,Entry<E,K,V>>() : new SnapTreeMap<IndexKey<V>,Entry<E,K,V>>(new Comparator<IndexKey<V>>(){
    @Override public int compare(    IndexKey<V> o1,    IndexKey<V> o2){
      int res=cmp.compare(o1.value(),o2.value());
      return res != 0 || isUnique() ? res : ((Key<V>)o1).seed > ((Key<V>)o2).seed ? 1 : ((Key<V>)o1).seed == ((Key<V>)o2).seed ? 0 : -1;
    }
  }
);
  key2Entry=new TrieMap<>();
}
