{
  if (super.onDone(res,err)) {
    cctx.mvcc().removeFuture(this);
    if (log.isDebugEnabled())     log.debug("Completing check committed tx future for transaction [tx=" + tx + ", res="+ res+ ", err="+ err+ ']');
    if (err == null)     cctx.tm().finishPessimisticTxOnRecovery(tx,res);
 else {
      if (log.isDebugEnabled())       log.debug("Failed to check prepared transactions, " + "invalidating transaction [err=" + err + ", tx="+ tx+ ']');
      if (nearCheck)       return true;
      cctx.tm().salvageTx(tx);
    }
    return true;
  }
  return false;
}
