{
  size=off + size;
  maxOff=Math.max(maxOff,size);
  long now=U.currentTimeMillis();
  if (size > bytes.length) {
    byte[] newBytes=new byte[size << 1];
    GridUnsafe.copyMemory(bytes,BYTE_ARR_OFF,newBytes,BYTE_ARR_OFF,off);
    bytes=newBytes;
  }
 else   if (now - lastCheck > CHECK_FREQ) {
    int halfSize=bytes.length >> 1;
    if (maxOff < halfSize) {
      byte[] newBytes=new byte[halfSize];
      GridUnsafe.copyMemory(bytes,BYTE_ARR_OFF,newBytes,BYTE_ARR_OFF,off);
      bytes=newBytes;
    }
    maxOff=0;
    lastCheck=now;
  }
}
