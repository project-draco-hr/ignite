{
  super.prepareMarshal(ctx);
  if (writes != null) {
    marshalTx(writes,ctx);
    writesBytes=new ArrayList<>(writes.size());
    for (    IgniteTxEntry e : writes)     writesBytes.add(ctx.marshaller().marshal(e));
  }
  if (reads != null) {
    marshalTx(reads,ctx);
    readsBytes=new ArrayList<>(reads.size());
    for (    IgniteTxEntry e : reads)     readsBytes.add(ctx.marshaller().marshal(e));
  }
  if (grpLockKey != null && grpLockKeyBytes == null)   grpLockKeyBytes=ctx.marshaller().marshal(grpLockKey);
  if (dhtVers != null) {
    for (    IgniteTxKey key : dhtVers.keySet()) {
      GridCacheContext cctx=ctx.cacheContext(key.cacheId());
      key.prepareMarshal(cctx);
    }
    dhtVerKeys=dhtVers.keySet();
    dhtVerVals=dhtVers.values();
  }
  if (txNodes != null)   txNodesBytes=ctx.marshaller().marshal(txNodes);
}
