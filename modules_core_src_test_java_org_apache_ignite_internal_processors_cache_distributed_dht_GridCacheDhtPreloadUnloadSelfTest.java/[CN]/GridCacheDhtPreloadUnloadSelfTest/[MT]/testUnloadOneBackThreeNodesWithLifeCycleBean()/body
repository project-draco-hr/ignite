{
  preloadMode=SYNC;
  backups=1;
  try {
    final int cnt=1000;
    lbean=new LifecycleBean(){
      @IgniteInstanceResource private Ignite ignite;
      @Override public void onLifecycleEvent(      LifecycleEventType evt){
        if (evt == LifecycleEventType.AFTER_GRID_START) {
          IgniteCache<Integer,String> c=ignite.jcache(null);
          if (c.putIfAbsent(-1,"true")) {
            populate(ignite.<Integer,String>jcache(null),cnt);
            info(">>> POPULATED GRID <<<");
          }
        }
      }
    }
;
    int gridCnt=3;
    for (int i=0; i < gridCnt; i++) {
      startGrid(i);
      for (int j=0; j < i; j++)       info("Grid size [i=" + i + ", size="+ grid(j).jcache(null).localSize()+ ']');
    }
    long wait=3000;
    waitForUnload(gridCnt,cnt,wait);
  }
  finally {
    lbean=null;
    stopAllGrids();
  }
}
