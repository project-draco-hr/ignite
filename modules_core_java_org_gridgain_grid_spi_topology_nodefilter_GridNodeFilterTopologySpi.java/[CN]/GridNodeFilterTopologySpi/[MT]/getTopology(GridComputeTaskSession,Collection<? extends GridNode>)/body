{
  Collection<GridNode> top=new ArrayList<>(grid.size());
  for (  GridNode node : grid) {
    if (filter == null || filter.apply(node,ses)) {
      top.add(node);
      if (log.isDebugEnabled()) {
        log.debug("Included node into topology: " + node);
      }
    }
  }
  return top;
}
