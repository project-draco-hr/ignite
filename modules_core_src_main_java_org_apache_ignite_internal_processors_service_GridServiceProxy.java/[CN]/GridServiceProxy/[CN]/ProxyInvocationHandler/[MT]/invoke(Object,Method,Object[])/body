{
  while (true) {
    ClusterNode node=null;
    try {
      node=nodeForService(name,sticky);
      if (node == null)       throw new IgniteException("Failed to find deployed service: " + name);
      if (node.isLocal()) {
        ManagedServiceContextImpl svcCtx=ctx.service().serviceContext(name);
        if (svcCtx != null)         return mtd.invoke(svcCtx.service(),args);
      }
 else {
        return ctx.closure().callAsyncNoFailover(BALANCE,new ServiceProxyCallable(mtd.getName(),name,mtd.getParameterTypes(),args),Collections.singleton(node),false).get();
      }
    }
 catch (    GridServiceNotFoundException|ClusterTopologyException e) {
      if (log.isDebugEnabled())       log.debug("Service was not found or topology changed (will retry): " + e.getMessage());
    }
catch (    RuntimeException|Error e) {
      throw e;
    }
catch (    Exception e) {
      throw new IgniteException(e);
    }
    rmtNode.compareAndSet(node,null);
    try {
      Thread.sleep(10);
    }
 catch (    InterruptedException e) {
      Thread.currentThread().interrupt();
      throw new IgniteException(e);
    }
  }
}
