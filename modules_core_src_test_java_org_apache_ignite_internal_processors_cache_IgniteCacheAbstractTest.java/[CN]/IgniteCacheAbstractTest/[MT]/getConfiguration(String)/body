{
  IgniteConfiguration cfg=super.getConfiguration(gridName);
  ((TcpCommunicationSpi)cfg.getCommunicationSpi()).setSharedMemoryPort(-1);
  TcpDiscoverySpi disco=new TcpDiscoverySpi().setForceServerMode(true);
  disco.setMaxMissedHeartbeats(Integer.MAX_VALUE);
  disco.setIpFinder(ipFinder);
  if (isDebug())   disco.setAckTimeout(Integer.MAX_VALUE);
  MemoryEventStorageSpi eventSpi=new MemoryEventStorageSpi();
  eventSpi.setExpireCount(100);
  cfg.setEventStorageSpi(eventSpi);
  cfg.setDiscoverySpi(disco);
  cfg.setCacheConfiguration(cacheConfiguration(gridName));
  return cfg;
}
