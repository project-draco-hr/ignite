{
  GridCache<Integer,Integer> cache=grid(0).cache(null);
  for (int i=0; i < TX_CNT; i++) {
    GridCacheTx tx=cache.txStart(concurrency,isolation);
    if (put)     for (int j=0; j < keyCount(); j++)     cache.put(j,j);
    tx.rollback();
  }
  for (int i=0; i < gridCount(); i++) {
    GridCacheMetrics metrics=grid(i).cache(null).metrics();
    assertEquals(0,metrics.txCommits());
    if (i == 0)     assertEquals(TX_CNT,metrics.txRollbacks());
 else     assertEquals(0,metrics.txRollbacks());
  }
}
