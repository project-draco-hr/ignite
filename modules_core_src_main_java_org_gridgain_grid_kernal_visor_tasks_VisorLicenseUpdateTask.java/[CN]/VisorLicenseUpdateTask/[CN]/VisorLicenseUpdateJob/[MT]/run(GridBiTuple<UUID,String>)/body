{
  try {
    if (arg.get1() != null) {
      GridProductLicense lic=g.product().license();
      if (lic == null)       return new GridBiTuple<>(new GridProductLicenseException("Missing licence to compare id",null),null);
      if (!lic.id().equals(arg.get1()))       return new GridBiTuple<>(null,lic.id());
    }
    g.product().updateLicense(arg.get2());
    return new GridBiTuple<>(null,g.product().license().id());
  }
 catch (  GridProductLicenseException e) {
    return new GridBiTuple<>(e,null);
  }
catch (  Exception e) {
    return new GridBiTuple<>(new GridProductLicenseException("Failed to load licence",null,e),null);
  }
}
