{
  IgniteConfiguration cfg=new IgniteConfiguration();
  cfg.setGridName(name);
  cfg.setClientMode(client);
  cfg.setLocalHost("127.0.0.1");
  cfg.setPeerClassLoadingEnabled(false);
  TcpDiscoverySpi discoSpi=new TcpDiscoverySpi();
  TcpDiscoveryVmIpFinder ipFinder=new TcpDiscoveryVmIpFinder();
  ipFinder.setAddresses(Collections.singletonList("127.0.0.1:47500"));
  discoSpi.setIpFinder(ipFinder);
  cfg.setDiscoverySpi(discoSpi);
  CacheConfiguration ccfg=new CacheConfiguration();
  ccfg.setCacheMode(CacheMode.PARTITIONED);
  cfg.setCacheConfiguration(ccfg);
  return cfg;
}
