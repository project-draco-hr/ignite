{
  if (filter == null)   return new GridCacheProxyImpl<>(cctx,this,this);
  if (this.filter != null)   filter=and(filter);
  if (cctx.deploymentEnabled()) {
    try {
      cctx.deploy().registerClasses(filter);
    }
 catch (    IgniteCheckedException e) {
      throw new IgniteException(e);
    }
  }
  GridCacheProjectionImpl<K,V> prj=new GridCacheProjectionImpl<>(this,cctx,filter,flags,subjId,keepPortable,expiryPlc);
  return new GridCacheProxyImpl<>(cctx,prj,prj);
}
