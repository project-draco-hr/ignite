{
  IgniteConfiguration cfg=super.getConfiguration(gridName);
  cfg.setPeerClassLoadingEnabled(false);
  TcpDiscoverySpi discoSpi=new TcpDiscoverySpi();
  discoSpi.setIpFinder(IP_FINDER);
  cfg.setDiscoverySpi(discoSpi);
  cfg.setMarshaller(marshaller());
  cfg.setUserAttributes(Collections.singletonMap(NODE_NAME_ATTR,gridName));
  if (grp1.contains(gridName))   cfg.setClassLoader(extClsLdr1);
  if (grp2.contains(gridName))   cfg.setClassLoader(extClsLdr2);
  cfg.setClientMode(client);
  return cfg;
}
