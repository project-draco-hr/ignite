{
  Collection<DynamicCacheChangeRequest> reqs=new ArrayList<>(registeredCaches.size());
  for (  DynamicCacheDescriptor desc : registeredCaches.values()) {
    if (!desc.cancelled()) {
      DynamicCacheChangeRequest req=new DynamicCacheChangeRequest(null);
      req.startCacheConfiguration(desc.cacheConfiguration());
      req.deploymentId(desc.deploymentId());
      reqs.add(req);
    }
  }
  DynamicCacheChangeBatch req=new DynamicCacheChangeBatch(reqs);
  req.clientNodes(ctx.discovery().clientNodesMap());
  return req;
}
