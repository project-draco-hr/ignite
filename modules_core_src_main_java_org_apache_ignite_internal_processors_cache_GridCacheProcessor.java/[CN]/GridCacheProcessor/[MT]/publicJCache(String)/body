{
  if (log.isDebugEnabled())   log.debug("Getting public cache for name: " + name);
  if (sysCaches.contains(name))   throw new IllegalStateException("Failed to get cache because it is system cache: " + name);
  try {
    String masked=maskNull(name);
    IgniteCache<K,V> cache=(IgniteCache<K,V>)jCacheProxies.get(masked);
    if (cache == null) {
      DynamicCacheDescriptor desc=registeredCaches.get(masked);
      if (desc == null || desc.cancelled())       throw new IllegalArgumentException("Cache is not started: " + name);
      DynamicCacheChangeRequest req=new DynamicCacheChangeRequest(ctx.localNodeId());
      req.cacheName(name);
      req.deploymentId(desc.deploymentId());
      req.startCacheConfiguration(desc.cacheConfiguration());
      req.clientStartOnly(true);
      F.first(initiateCacheChanges(F.asList(req))).get();
      cache=(IgniteCache<K,V>)jCacheProxies.get(masked);
      if (cache == null)       throw new IllegalArgumentException("Cache is not started: " + name);
    }
    return cache;
  }
 catch (  IgniteCheckedException e) {
    throw new CacheException(e);
  }
}
