{
  if (log.isDebugEnabled())   log.debug("Getting public cache for name: " + name);
  if (sysCaches.contains(name))   throw new IllegalStateException("Failed to get cache because it is system cache: " + name);
  try {
    IgniteCache<K,V> cache=(IgniteCache<K,V>)jCacheProxies.get(name);
    if (cache == null) {
      DynamicCacheDescriptor desc=registeredCaches.get(name);
      if (desc == null || desc.cancelled())       throw new IllegalArgumentException("Cache is not started: " + name);
      DynamicCacheChangeRequest req=new DynamicCacheChangeRequest(ctx.localNodeId(),desc.cacheConfiguration(),null);
      req.deploymentId(desc.deploymentId());
      F.first(initiateCacheChanges(F.asList(req))).get();
      cache=(IgniteCache<K,V>)jCacheProxies.get(name);
      if (cache == null)       throw new IllegalArgumentException("Cache is not started: " + name);
    }
    return cache;
  }
 catch (  IgniteCheckedException e) {
    throw new CacheException(e);
  }
}
