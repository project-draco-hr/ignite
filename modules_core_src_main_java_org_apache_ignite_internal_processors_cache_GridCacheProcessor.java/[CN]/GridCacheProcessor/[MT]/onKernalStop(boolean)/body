{
  if (ctx.config().isDaemon())   return;
  for (  String cacheName : stopSeq) {
    GridCacheAdapter<?,?> cache=caches.get(maskNull(cacheName));
    if (cache != null)     onKernalStop(cache,cancel);
  }
  for (  Map.Entry<String,GridCacheAdapter<?,?>> entry : caches.entrySet()) {
    if (!stopSeq.contains(entry.getKey()))     onKernalStop(entry.getValue(),cancel);
  }
  List<? extends GridCacheSharedManager<?,?>> sharedMgrs=sharedCtx.managers();
  for (ListIterator<? extends GridCacheSharedManager<?,?>> it=sharedMgrs.listIterator(sharedMgrs.size()); it.hasPrevious(); ) {
    GridCacheSharedManager<?,?> mgr=it.previous();
    mgr.onKernalStop(cancel);
  }
}
