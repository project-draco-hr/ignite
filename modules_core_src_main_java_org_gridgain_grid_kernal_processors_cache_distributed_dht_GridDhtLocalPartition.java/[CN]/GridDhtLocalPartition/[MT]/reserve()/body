{
  while (true) {
    int reservations=state.getStamp();
    GridDhtPartitionState s=state.getReference();
    if (s == EVICTED)     return false;
    if (state.compareAndSet(s,s,reservations,reservations + 1))     return true;
  }
}
