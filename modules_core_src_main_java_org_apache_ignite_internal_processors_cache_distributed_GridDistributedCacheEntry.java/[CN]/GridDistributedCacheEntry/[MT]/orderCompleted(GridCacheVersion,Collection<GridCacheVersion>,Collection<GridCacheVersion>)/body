{
  if (!F.isEmpty(committedVers) || !F.isEmpty(rolledbackVers)) {
    GridCacheMvccCandidate prev=null;
    GridCacheMvccCandidate owner=null;
    CacheObject val;
synchronized (this) {
      checkObsolete();
      GridCacheMvcc mvcc=mvccExtras();
      if (mvcc != null) {
        prev=mvcc.anyOwner();
        boolean emptyBefore=mvcc.isEmpty();
        owner=mvcc.orderCompleted(baseVer,committedVers,rolledbackVers);
        boolean emptyAfter=mvcc.isEmpty();
        checkCallbacks(emptyBefore,emptyAfter);
        if (emptyAfter)         mvccExtras(null);
      }
      val=this.val;
    }
    checkOwnerChanged(prev,owner,val);
  }
}
