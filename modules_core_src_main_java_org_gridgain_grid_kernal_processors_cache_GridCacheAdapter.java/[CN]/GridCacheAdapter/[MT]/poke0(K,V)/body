{
  GridCacheEntryEx<K,V> entryEx=peekEx(key);
  if (entryEx == null || entryEx.deleted())   return newVal == null;
  if (newVal == null)   return entryEx.markObsolete(ctx.versions().next());
  try {
    entryEx.poke(newVal);
  }
 catch (  GridCacheEntryRemovedException ignore) {
    return false;
  }
  return true;
}
