{
  ses.setAttribute("fail",true);
  return Collections.singletonMap(new ComputeJobAdapter(arg){
    /** 
 * Local node ID. 
 */
    @IgniteLocalNodeIdResource private UUID locId;
    @SuppressWarnings({"RedundantTypeArguments"}) @Override public Serializable execute() throws IgniteCheckedException {
      boolean fail;
      try {
        fail=ses.<String,Boolean>waitForAttribute("fail",0);
      }
 catch (      InterruptedException e) {
        throw new IgniteCheckedException("Got interrupted while waiting for attribute to be set.",e);
      }
      if (fail) {
        ses.setAttribute("fail",false);
        throw new IgniteCheckedException("Job exception.");
      }
      return Integer.parseInt(this.<String>argument(0));
    }
  }
,subgrid.get(0));
}
