{
  OptimizedClassDescriptor desc=DESC_BY_CLS.get(cls);
  if (desc == null) {
    desc=new OptimizedClassDescriptor(cls,ctx,mapper);
    if (CLS_BY_ID.putIfAbsent(desc.typeId(),F.t(cls,false)) == null)     ctx.registerClass(desc.typeId(),cls.getName());
    OptimizedClassDescriptor old=DESC_BY_CLS.putIfAbsent(cls,desc);
    if (old != null)     desc=old;
  }
  return desc;
}
