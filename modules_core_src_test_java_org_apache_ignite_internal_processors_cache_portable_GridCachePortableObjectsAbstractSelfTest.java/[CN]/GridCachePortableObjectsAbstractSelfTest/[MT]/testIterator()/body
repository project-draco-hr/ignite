{
  IgniteCache<Integer,TestObject> c=jcache(0);
  Map<Integer,TestObject> entries=new HashMap<>();
  for (int i=0; i < ENTRY_CNT; i++) {
    TestObject val=new TestObject(i);
    c.put(i,val);
    entries.put(i,val);
  }
  IgniteCache<Integer,PortableObject> prj=((IgniteCacheProxy)c).keepPortable();
  Iterator<Cache.Entry<Integer,PortableObject>> it=prj.iterator();
  assertTrue(it.hasNext());
  while (it.hasNext()) {
    Cache.Entry<Integer,PortableObject> entry=it.next();
    assertTrue(entries.containsKey(entry.getKey()));
    TestObject o=entries.get(entry.getKey());
    PortableObject po=entry.getValue();
    assertEquals(o.val,(int)po.field("val"));
    entries.remove(entry.getKey());
  }
  assertEquals(0,entries.size());
}
