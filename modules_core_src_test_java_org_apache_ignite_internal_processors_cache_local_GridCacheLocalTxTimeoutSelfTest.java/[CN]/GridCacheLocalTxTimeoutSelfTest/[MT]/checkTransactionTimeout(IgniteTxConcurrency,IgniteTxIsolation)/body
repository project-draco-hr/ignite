{
  boolean wasEx=false;
  IgniteTx tx=null;
  try {
    IgniteCache<Integer,String> cache=ignite.jcache(null);
    tx=ignite.transactions().txStart(concurrency,isolation,50,0);
    cache.put(1,"1");
    Thread.sleep(100);
    cache.put(1,"2");
    tx.commit();
  }
 catch (  IgniteException e) {
    info("Received expected optimistic exception: " + e.getMessage());
    wasEx=true;
    tx.rollback();
  }
  assert wasEx;
}
