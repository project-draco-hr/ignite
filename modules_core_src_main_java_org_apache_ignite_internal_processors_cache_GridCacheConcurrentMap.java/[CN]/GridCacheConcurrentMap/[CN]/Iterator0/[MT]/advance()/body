{
  if (nextEntry != null && advanceInBucket(nextEntry,true))   return;
  while (nextTblIdx >= 0) {
    HashEntry bucket=curTbl[nextTblIdx--];
    if (bucket != null && advanceInBucket(bucket,false))     return;
  }
  while (nextSegIdx >= 0) {
    int nextSegIdx0=nextSegIdx--;
    GridCacheConcurrentMap.Segment seg=map.segs[nextSegIdx0];
    if (seg.size != 0 && (id == -1 || nextSegIdx0 % totalCnt == id)) {
      curTbl=seg.tbl;
      for (int j=curTbl.length - 1; j >= 0; --j) {
        HashEntry bucket=curTbl[j];
        if (bucket != null && advanceInBucket(bucket,false)) {
          nextTblIdx=j - 1;
          return;
        }
      }
    }
  }
}
