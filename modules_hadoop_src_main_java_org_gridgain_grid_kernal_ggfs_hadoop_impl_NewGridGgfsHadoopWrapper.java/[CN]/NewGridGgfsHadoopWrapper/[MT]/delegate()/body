{
  NewGridGgfsHadoopEx curDelegate=delegate.get();
  if (curDelegate != null)   return curDelegate;
  GridGgfsEx ggfs=null;
  if (endpoint.grid() == null) {
    try {
      Grid grid=G.grid();
      ggfs=(GridGgfsEx)grid.ggfs(endpoint.ggfs());
    }
 catch (    Exception ignore) {
    }
  }
 else {
    for (    Grid grid : G.allGrids()) {
      try {
        ggfs=(GridGgfsEx)grid.ggfs(endpoint.ggfs());
        break;
      }
 catch (      Exception ignore) {
      }
    }
  }
  if (ggfs != null)   return new NewGridGgfsHadoopInProc(ggfs,log);
  if (!U.isWindows()) {
  }
  new NewGridGgfsHadoopOutProc(log,"");
  throw new IOException("Failed to connect: " + endpoint);
}
