{
  IgniteConfiguration cfg=loadConfiguration("modules/kafka/src/test/resources/example-ignite.xml");
  cfg.setClientMode(false);
  grid=startGrid("igniteServerNode",cfg);
  kafkaBroker=new TestKafkaBroker();
  for (  String topic : TOPICS)   kafkaBroker.createTopic(topic,PARTITIONS,REPLICATION_FACTOR);
  WorkerConfig workerConfig=new StandaloneConfig(makeWorkerProps());
  OffsetBackingStore offsetBackingStore=mock(OffsetBackingStore.class);
  offsetBackingStore.configure(anyObject(Map.class));
  worker=new Worker(workerConfig,offsetBackingStore);
  worker.start();
  herder=new StandaloneHerder(worker);
  herder.start();
}
