{
  try (Ignite ignite=Ignition.start("examples/config/example-ignite.xml")){
    System.out.println();
    System.out.println(">>> Cache atomic semaphore example started.");
    IgniteSemaphore syncSemaphore=ignite.semaphore(SEM_NAME,0,false,true);
    final String semaphoreName=UUID.randomUUID().toString();
    IgniteSemaphore semaphore=ignite.semaphore(semaphoreName,0,false,true);
    for (int i=0; i < NUM_CONSUMERS; i++)     ignite.compute().withAsync().run(new Consumer(semaphoreName));
    for (int i=0; i < NUM_PRODUCERS; i++)     ignite.compute().withAsync().run(new Producer(semaphoreName));
    System.out.println("Master node is waiting for all other nodes to finish...");
    syncSemaphore.acquire(NUM_CONSUMERS + NUM_PRODUCERS);
  }
   System.out.flush();
  System.out.println();
  System.out.println("Finished semaphore example...");
  System.out.println("Check all nodes for output (this node is also part of the cluster).");
}
