{
  if (srvJoinedLatch != null) {
    for (int i=0; i < srvCnt; i++) {
      G.grid("server-" + i).events().localListen(new IgnitePredicate<IgniteEvent>(){
        @Override public boolean apply(        IgniteEvent evt){
          info("Joined event fired on server: " + evt);
          srvJoinedLatch.countDown();
          return true;
        }
      }
,EVT_NODE_JOINED);
    }
  }
  if (srvLeftLatch != null) {
    for (int i=0; i < srvCnt; i++) {
      G.grid("server-" + i).events().localListen(new IgnitePredicate<IgniteEvent>(){
        @Override public boolean apply(        IgniteEvent evt){
          info("Left event fired on server: " + evt);
          srvLeftLatch.countDown();
          return true;
        }
      }
,EVT_NODE_LEFT);
    }
  }
  if (srvFailedLatch != null) {
    for (int i=0; i < srvCnt; i++) {
      G.grid("server-" + i).events().localListen(new IgnitePredicate<IgniteEvent>(){
        @Override public boolean apply(        IgniteEvent evt){
          info("Failed event fired on server: " + evt);
          srvFailedLatch.countDown();
          return true;
        }
      }
,EVT_NODE_FAILED);
    }
  }
  if (clientJoinedLatch != null) {
    for (int i=0; i < clientCnt; i++) {
      G.grid("client-" + i).events().localListen(new IgnitePredicate<IgniteEvent>(){
        @Override public boolean apply(        IgniteEvent evt){
          info("Joined event fired on client: " + evt);
          clientJoinedLatch.countDown();
          return true;
        }
      }
,EVT_NODE_JOINED);
    }
  }
  if (clientLeftLatch != null) {
    for (int i=0; i < clientCnt; i++) {
      G.grid("client-" + i).events().localListen(new IgnitePredicate<IgniteEvent>(){
        @Override public boolean apply(        IgniteEvent evt){
          info("Left event fired on client: " + evt);
          clientLeftLatch.countDown();
          return true;
        }
      }
,EVT_NODE_LEFT);
    }
  }
  if (clientFailedLatch != null) {
    for (int i=0; i < clientCnt; i++) {
      G.grid("client-" + i).events().localListen(new IgnitePredicate<IgniteEvent>(){
        @Override public boolean apply(        IgniteEvent evt){
          info("Failed event fired on client: " + evt);
          clientFailedLatch.countDown();
          return true;
        }
      }
,EVT_NODE_FAILED);
    }
  }
}
