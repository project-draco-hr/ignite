{
  if (srvJoinLatch != null) {
    for (int i=0; i < srvCnt; i++) {
      G.grid("server-" + i).events().localListen(new GridPredicate<GridEvent>(){
        @Override public boolean apply(        GridEvent evt){
          info("Event fired: " + evt);
          srvJoinLatch.countDown();
          return true;
        }
      }
,EVT_NODE_JOINED);
    }
  }
  if (srvLeftLatch != null) {
    for (int i=0; i < srvCnt; i++) {
      G.grid("server-" + i).events().localListen(new GridPredicate<GridEvent>(){
        @Override public boolean apply(        GridEvent evt){
          info("Event fired: " + evt);
          srvLeftLatch.countDown();
          return true;
        }
      }
,EVT_NODE_LEFT);
    }
  }
  if (srvFailedLatch != null) {
    for (int i=0; i < srvCnt; i++) {
      G.grid("server-" + i).events().localListen(new GridPredicate<GridEvent>(){
        @Override public boolean apply(        GridEvent evt){
          info("Event fired: " + evt);
          srvFailedLatch.countDown();
          return true;
        }
      }
,EVT_NODE_FAILED);
    }
  }
  if (clientJoinLatch != null) {
    for (int i=0; i < clientCnt; i++) {
      G.grid("client-" + i).events().localListen(new GridPredicate<GridEvent>(){
        @Override public boolean apply(        GridEvent evt){
          info("Event fired: " + evt);
          clientJoinLatch.countDown();
          return true;
        }
      }
,EVT_NODE_JOINED);
    }
  }
  if (clientLeftLatch != null) {
    for (int i=0; i < clientCnt; i++) {
      G.grid("client-" + i).events().localListen(new GridPredicate<GridEvent>(){
        @Override public boolean apply(        GridEvent evt){
          info("Event fired: " + evt);
          clientLeftLatch.countDown();
          return true;
        }
      }
,EVT_NODE_LEFT);
    }
  }
  if (clientFailedLatch != null) {
    for (int i=0; i < clientCnt; i++) {
      G.grid("client-" + i).events().localListen(new GridPredicate<GridEvent>(){
        @Override public boolean apply(        GridEvent evt){
          info("Event fired: " + evt);
          clientFailedLatch.countDown();
          return true;
        }
      }
,EVT_NODE_FAILED);
    }
  }
}
