{
  startServerNodes(3);
  startClientNodes(3);
  checkNodes(3,3);
  srvFailedLatch=new CountDownLatch(3);
  clientFailedLatch=new CountDownLatch(2);
  attachListeners(3,3);
  ((GridTcpClientDiscoverySpi)G.grid("client-2").configuration().getDiscoverySpi()).simulateNodeFailure();
  await(srvFailedLatch);
  await(clientFailedLatch);
  checkNodes(3,2);
}
