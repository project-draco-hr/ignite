{
  for (int i=0; i < CHECK_POINT_COUNT; i++) {
    GridCheckpointTestState state=new GridCheckpointTestState("Test check point data " + i + '.');
    getSpi().saveCheckpoint(KEY_PREFIX + i,GridTestIoUtils.serializeJdk(state),1,true);
  }
  Thread.sleep(100);
  for (int i=0; i < CHECK_POINT_COUNT; i++) {
    final String key=KEY_PREFIX + i;
    assertWithRetries(new GridAbsClosureX(){
      @Override public void applyx() throws GridException {
        assertNull("Checkpoint state should not be loaded with key: " + key,getSpi().loadCheckpoint(key));
      }
    }
);
  }
}
