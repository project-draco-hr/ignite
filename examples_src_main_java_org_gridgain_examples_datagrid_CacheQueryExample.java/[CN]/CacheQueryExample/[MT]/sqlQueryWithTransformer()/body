{
  GridCache<GridCacheAffinityKey<UUID>,Person> cache=GridGain.grid().cache(CACHE_NAME);
  GridCacheQuery<Map.Entry<GridCacheAffinityKey<UUID>,Person>> qry=cache.queries().createSqlQuery(Person.class,"from Person, Organization " + "where Person.orgId = Organization.id and lower(Organization.name) = lower(?)");
  IgniteClosure<Map.Entry<GridCacheAffinityKey<UUID>,Person>,String> trans=new IgniteClosure<Map.Entry<GridCacheAffinityKey<UUID>,Person>,String>(){
    @Override public String apply(    Map.Entry<GridCacheAffinityKey<UUID>,Person> e){
      return e.getValue().lastName;
    }
  }
;
  print("Names of all 'GridGain' employees: " + qry.execute(trans,"GridGain").get());
}
