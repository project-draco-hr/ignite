{
  GridGgfsFileInfo info=null;
  try {
    info=meta.info(TRASH_ID);
  }
 catch (  IgniteCheckedException e) {
    U.error(log,"Cannot obtain trash directory info.",e);
  }
  if (info != null) {
    for (    Map.Entry<String,GridGgfsListingEntry> entry : info.listing().entrySet()) {
      IgniteUuid fileId=entry.getValue().fileId();
      if (log.isDebugEnabled())       log.debug("Deleting GGFS trash entry [name=" + entry.getKey() + ", fileId="+ fileId+ ']');
      try {
        if (!cancelled) {
          if (delete(entry.getKey(),fileId)) {
            if (log.isDebugEnabled())             log.debug("Sending delete confirmation message [name=" + entry.getKey() + ", fileId="+ fileId+ ']');
            sendDeleteMessage(new IgfsDeleteMessage(fileId));
          }
        }
 else         break;
      }
 catch (      IgniteInterruptedCheckedException ignored) {
      }
catch (      IgniteCheckedException e) {
        U.error(log,"Failed to delete entry from the trash directory: " + entry.getKey(),e);
        sendDeleteMessage(new IgfsDeleteMessage(fileId,e));
      }
    }
  }
}
