{
  if (newPath == null) {
    Path homeDir=getHomeDirectory();
    if (secondaryFs != null)     secondaryFs.setWorkingDirectory(toSecondary(homeDir));
    workingDir.set(homeDir);
  }
 else {
    Path fixedNewPath=fixRelativePart(newPath);
    String res=fixedNewPath.toUri().getPath();
    if (!DFSUtil.isValidName(res))     throw new IllegalArgumentException("Invalid DFS directory name " + res);
    if (secondaryFs != null)     secondaryFs.setWorkingDirectory(toSecondary(fixedNewPath));
    workingDir.set(fixedNewPath);
  }
}
