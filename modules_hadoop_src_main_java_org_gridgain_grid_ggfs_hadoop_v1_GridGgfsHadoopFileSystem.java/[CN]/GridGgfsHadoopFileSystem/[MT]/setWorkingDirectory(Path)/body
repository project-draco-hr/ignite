{
  if (newPath == null) {
    if (secondaryFs != null)     secondaryFs.setWorkingDirectory(toSecondary(getHomeDirectory()));
    workingDir.set(getHomeDirectory());
  }
 else {
    String res=fixRelativePart(newPath).toUri().getPath();
    if (!DFSUtil.isValidName(res))     throw new IllegalArgumentException("Invalid DFS directory name " + res);
    Path fixedNewPath=fixRelativePart(newPath);
    if (secondaryFs != null)     secondaryFs.setWorkingDirectory(toSecondary(fixedNewPath));
    workingDir.set(fixedNewPath);
  }
}
