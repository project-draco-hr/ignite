{
  Cache<String,Integer> cache=cache(0);
  cache.clearAll();
  IgniteTx tx=cache.txStart(concurrency,isolation);
  try {
    cache.put("key",1);
    assertEquals("Invalid value after put",1,cache.get("key").intValue());
    tx.commit();
  }
  finally {
    tx.close();
  }
  assertEquals("Invalid cache size after put",1,cache.size());
  try {
    tx=cache.txStart(concurrency,isolation);
    assertEquals("Invalid value inside transactional read",Integer.valueOf(1),cache.get("key"));
    tx.commit();
  }
  finally {
    tx.close();
  }
}
