{
  while (node != 0) {
    final int c=maxCmp.compareTo(key(node));
    if (c > 0) {
      final long z=boundedMax(right(node),maxCmp,maxIncl);
      if (z != 0) {
        return z;
      }
    }
    if (c > 0 || (c == 0 && maxIncl)) {
      if (!vOptIsNull(node)) {
        return node;
      }
    }
    node=left(node);
  }
  return 0;
}
