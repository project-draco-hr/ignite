{
  CacheAffinity<String> igniteAff=ignite.affinity(jcache.getName());
  Iterator<Cache.Entry<String,Integer>> iter=jcache.iterator();
  while (iter.hasNext()) {
    Cache.Entry<String,Integer> entry=iter.next();
    for (    ClusterNode n : ignite.cluster().nodes()) {
      assertEquals(igniteAff.isBackup(n,entry.getKey()),aff.isBackup(n,entry.getKey()));
      assertEquals(igniteAff.isPrimary(n,entry.getKey()),aff.isPrimary(n,entry.getKey()));
      assertEquals(igniteAff.isPrimaryOrBackup(n,entry.getKey()),aff.isPrimaryOrBackup(n,entry.getKey()));
    }
  }
}
