{
  if (cacheMode().equals(CacheMode.LOCAL)) {
    info("Test is not applied for local cache.");
    return;
  }
  GridCache<String,Integer> cache0=grid(1).cache(null);
  GridCache<String,Integer> cache1=grid(1).cache(CACHE1);
  GridCache<String,Integer> cache2=grid(1).cache(CACHE2);
  GridCache<String,Integer> cache3=grid(1).cache(CACHE3);
  for (int i=0; i < 10; ++i)   cache0.put(Integer.toString(i),i);
  for (int i=10; i < 20; ++i)   cache1.put(Integer.toString(i),i);
  for (int i=20; i < 30; ++i)   cache2.put(Integer.toString(i),i);
  for (int i=30; i < 40; ++i)   cache3.put(Integer.toString(i),i);
  checkAffinity();
  stopGrid(gridCount() - 1);
  startGrid(gridCount() - 1);
  startGrid(gridCount());
  GRID_COUNT+=1;
  checkAffinity();
}
