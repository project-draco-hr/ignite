{
  int cnt=0;
  while (true) {
    try {
      return (T)cache.putIfAbsent(key,val);
    }
 catch (    GridCacheTxRollbackException|GridCachePartialUpdateException|GridTopologyException e) {
      if (cnt++ == 3)       throw e;
 else       if (log.isDebugEnabled())       log.debug("Failed to create cache item, will retry [err=" + e + ']');
    }
  }
}
