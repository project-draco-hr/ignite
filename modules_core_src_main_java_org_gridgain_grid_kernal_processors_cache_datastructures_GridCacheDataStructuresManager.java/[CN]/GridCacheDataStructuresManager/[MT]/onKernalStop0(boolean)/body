{
  super.onKernalStop0(cancel);
  busyLock.block();
  if (queueQry != null) {
    try {
      queueQry.close();
    }
 catch (    GridException e) {
      U.warn(log,"Failed to cancel queue header query.",e);
    }
  }
  if (queueCleanupWorkers != null) {
    for (    QueueCleanupWorker worker : queueCleanupWorkers)     U.cancel(worker);
    for (    QueueCleanupWorker worker : queueCleanupWorkers)     U.join(worker,log);
  }
  for (  GridCacheQueueProxy q : queuesMap.values())   q.delegate().onKernalStop();
}
