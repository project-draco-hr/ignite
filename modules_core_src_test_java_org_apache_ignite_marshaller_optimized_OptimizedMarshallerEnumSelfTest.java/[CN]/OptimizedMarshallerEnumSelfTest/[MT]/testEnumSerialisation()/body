{
  OptimizedMarshaller marsh=new OptimizedMarshaller();
  marsh.setContext(new MarshallerContextTestImpl());
  byte[] bytes=marsh.marshal(TestEnum.Bond);
  TestEnum unmarshalled=marsh.unmarshal(bytes,Thread.currentThread().getContextClassLoader());
  assertEquals(TestEnum.Bond,unmarshalled);
  assertEquals(TestEnum.Bond.desc,unmarshalled.desc);
}
