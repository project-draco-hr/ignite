{
  daemon=true;
  Ignite dNode=startGrid(nodeCount());
  try {
    CacheConfiguration cfg=new CacheConfiguration(DYNAMIC_CACHE_NAME);
    IgniteCache cache=ignite(0).createCache(cfg);
    try {
      for (int i=0; i < 100; i++) {
        assertFalse(ignite(0).affinity(DYNAMIC_CACHE_NAME).mapKeyToPrimaryAndBackups(i).contains(dNode.cluster().localNode()));
        cache.put(i,i);
      }
    }
  finally {
      cache.destroy();
    }
  }
  finally {
    stopGrid(nodeCount());
    daemon=false;
  }
}
