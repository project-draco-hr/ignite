{
  IgniteConfiguration cfg=super.getConfiguration(gridName);
  GridTcpDiscoverySpi disc=new GridTcpDiscoverySpi();
  disc.setIpFinder(new GridTcpDiscoveryVmIpFinder(true));
  cfg.setDiscoverySpi(disc);
  GridCacheConfiguration ccfg=new GridCacheConfiguration();
  ccfg.setCacheMode(replicated ? REPLICATED : PARTITIONED);
  ccfg.setAtomicityMode(atomic ? ATOMIC : TRANSACTIONAL);
  ccfg.setQueryIndexEnabled(true);
  ccfg.setSwapEnabled(true);
  cfg.setCacheConfiguration(ccfg);
  return cfg;
}
