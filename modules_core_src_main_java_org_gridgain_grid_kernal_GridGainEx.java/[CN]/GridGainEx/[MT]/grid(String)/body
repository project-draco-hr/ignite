{
  GridNamedInstance grid=name != null ? grids.get(name) : dfltGrid;
  Ignite res;
  if (grid == null || (res=grid.grid()) == null)   throw new GridIllegalStateException("Grid instance was not properly started " + "or was already stopped: " + name);
  return res;
}
