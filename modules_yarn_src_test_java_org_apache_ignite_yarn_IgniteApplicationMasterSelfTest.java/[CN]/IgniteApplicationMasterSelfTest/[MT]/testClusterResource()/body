{
  rmMock.availableRes(new MockResource(1024,2));
  appMaster.setRmClient(rmMock);
  appMaster.setNmClient(new NMMock());
  props.cpusPerNode(8);
  props.memoryPerNode(10240);
  props.instances(3);
  Thread thread=runAppMaster(appMaster);
  List<AMRMClient.ContainerRequest> contRequests=collectRequests(rmMock,1,1000);
  interruptedThread(thread);
  assertEquals(0,contRequests.size());
}
