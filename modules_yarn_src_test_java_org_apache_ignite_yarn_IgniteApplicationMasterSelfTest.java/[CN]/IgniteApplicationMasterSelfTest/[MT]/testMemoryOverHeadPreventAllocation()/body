{
  rmMock.availableRes(new MockResource(1024,2));
  appMaster.setRmClient(rmMock);
  appMaster.setNmClient(new NMMock());
  props.cpusPerNode(2);
  props.memoryPerNode(1024);
  props.memoryOverHeadPerNode(512);
  props.instances(3);
  Thread thread=runAppMaster(appMaster);
  List<AMRMClient.ContainerRequest> contRequests=collectRequests(rmMock,1,1000);
  interruptedThread(thread);
  assertEquals(0,contRequests.size());
}
