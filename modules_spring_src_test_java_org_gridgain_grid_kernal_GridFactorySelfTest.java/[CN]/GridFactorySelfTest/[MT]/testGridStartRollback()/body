{
  GridTestUtils.assertThrows(log,new Callable<Object>(){
    @Nullable @Override public Object call() throws Exception {
      GridConfiguration cfg=new GridConfiguration();
      cfg.setRestEnabled(false);
      cfg.setDiscoverySpi(new GridTcpDiscoverySpi(){
        @Override public void spiStart(        String gridName) throws GridSpiException {
          throw new GridSpiException("This SPI will never start.");
        }
      }
);
      G.start(cfg);
      info("Thread finished.");
      return null;
    }
  }
,GridException.class,null);
}
