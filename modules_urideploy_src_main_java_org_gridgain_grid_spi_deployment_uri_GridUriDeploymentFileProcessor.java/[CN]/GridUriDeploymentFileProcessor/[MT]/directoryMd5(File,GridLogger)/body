{
  if (dir != null) {
    if (!dir.isDirectory()) {
      U.warn(log,"Failed to find directory for md5 calculation: " + dir);
      return null;
    }
    try {
      MessageDigest digest=MessageDigest.getInstance("MD5");
      return addDirectoryDigest(dir,digest,log) ? Hex.encodeHexString(digest.digest()) : null;
    }
 catch (    NoSuchAlgorithmException e) {
      throw new GridRuntimeException("MD5 digest algorithm not found.",e);
    }
  }
  return null;
}
