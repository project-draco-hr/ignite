{
  ctx.denyOnFlag(READ);
  A.notNull(key,"key");
  if (keyCheck)   validateCacheKey(key);
  KeyCacheObject cacheKey=ctx.toCacheKeyObject(key);
  GridCacheEntryEx entry=peekEx(cacheKey);
  try {
    if (entry != null && entry.compact(filter)) {
      removeIfObsolete(cacheKey);
      return true;
    }
  }
 catch (  GridCacheEntryRemovedException ignored) {
    if (log().isDebugEnabled())     log().debug("Got removed entry in invalidate(...): " + key);
  }
  return false;
}
