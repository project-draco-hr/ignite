{
  boolean keepPortable=ctx.keepPortable();
  while (true) {
    GridCacheMapEntry<K,V> e=map.randomEntry();
    if (e == null)     return null;
    try {
      Cache.Entry<K,V> entry=toCacheEntry(e,!keepPortable);
      if (entry != null)       return entry;
    }
 catch (    GridCacheEntryRemovedException ignore) {
    }
  }
}
