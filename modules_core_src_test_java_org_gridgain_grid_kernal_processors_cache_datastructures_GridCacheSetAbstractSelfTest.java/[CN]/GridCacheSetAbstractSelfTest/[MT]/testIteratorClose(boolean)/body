{
  final GridCacheSet<Integer> set0=cache().dataStructures().set(SET_NAME,collocated,true);
  for (int i=0; i < 500; i++)   assertTrue(set0.add(i));
  final GridCloseableIterator<Integer> iter=set0.iteratorEx();
  assertFalse(iter.isClosed());
  assertTrue(iter.hasNext());
  iter.next();
  assertTrue(iter.hasNext());
  iter.close();
  GridTestUtils.assertThrows(log,new Callable<Void>(){
    @Override public Void call() throws Exception {
      iter.next();
      return null;
    }
  }
,NoSuchElementException.class,null);
  assertTrue(iter.isClosed());
  assertFalse(iter.hasNext());
  waitIteratorsRemoved();
}
