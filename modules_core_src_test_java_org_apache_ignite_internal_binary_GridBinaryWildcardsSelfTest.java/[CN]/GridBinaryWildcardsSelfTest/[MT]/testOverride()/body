{
  BinaryTypeConfiguration typeCfg=new BinaryTypeConfiguration();
  typeCfg.setTypeName("GridBinaryTestClass2");
  typeCfg.setIdMapper(new BinaryIdMapper(){
    @Override public int typeId(    String clsName){
      return 100;
    }
    @Override public int fieldId(    int typeId,    String fieldName){
      return 0;
    }
  }
);
  BinaryMarshaller marsh=binaryMarshaller(Arrays.asList(new BinaryTypeConfiguration("org.apache.ignite.internal.binary.test.*"),typeCfg));
  BinaryContext ctx=binaryContext(marsh);
  Map<Integer,Class> typeIds=U.field(ctx,"userTypes");
  assertEquals(3,typeIds.size());
  assertTrue(typeIds.containsKey("gridbinarytestclass1".hashCode()));
  assertTrue(typeIds.containsKey("innerclass".hashCode()));
  assertFalse(typeIds.containsKey(100));
  Map<String,BinaryIdMapper> typeMappers=U.field(ctx,"typeMappers");
  assertEquals(100,typeMappers.get("GridBinaryTestClass2").typeId("GridBinaryTestClass2"));
}
