{
  startTxAndPutKeys(mode,prepare);
  List<Integer> nearSizes=new ArrayList<>(GRID_CNT - 1);
  List<Integer> dhtSizes=new ArrayList<>(GRID_CNT - 1);
  for (int i=1; i < GRID_CNT; i++) {
    nearSizes.add(near(i).context().tm().txs().size());
    dhtSizes.add(dht(i).context().tm().txs().size());
  }
  stopNodeAndSleep(SALVAGE_TIMEOUT - DELTA_BEFORE);
  for (int i=1; i < GRID_CNT; i++) {
    checkTxsNotEmpty(near(i).context(),nearSizes.get(i - 1));
    checkTxsNotEmpty(dht(i).context(),dhtSizes.get(i - 1));
  }
}
