{
  for (  GridCacheContext cacheCtx : cctx.cacheContexts()) {
    if (cacheCtx.isLocal())     continue;
    GridClientPartitionTopology clientTop=cctx.exchange().clearClientTopology(cacheCtx.cacheId());
    long updSeq=clientTop == null ? -1 : clientTop.lastUpdateSequence();
    GridDhtPartitionTopology top=cacheCtx.topology();
    if (crd) {
      boolean updateTop=!cacheCtx.isLocal() && exchId.topologyVersion().equals(cacheCtx.startTopologyVersion());
      if (updateTop && clientTop != null)       cacheCtx.topology().update(exchId,clientTop.partitionMap(true),clientTop.updateCounters());
    }
    top.updateTopologyVersion(exchId,this,updSeq,stopping(cacheCtx.cacheId()));
  }
  for (  GridClientPartitionTopology top : cctx.exchange().clientTopologies())   top.updateTopologyVersion(exchId,this,-1,stopping(top.cacheId()));
}
