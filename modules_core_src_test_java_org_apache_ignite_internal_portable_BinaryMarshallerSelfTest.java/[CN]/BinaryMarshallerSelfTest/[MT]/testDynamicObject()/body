{
  PortableMarshaller marsh=createMarshaller();
  marsh.setTypeConfigurations(Arrays.asList(new BinaryTypeConfiguration(DynamicObject.class.getName())));
  initializePortableContext(marsh);
  BinaryObject po1=marshal(new DynamicObject(0,10,20,30),marsh);
  assertEquals(new Integer(10),po1.field("val1"));
  assertEquals(null,po1.field("val2"));
  assertEquals(null,po1.field("val3"));
  DynamicObject do1=po1.deserialize();
  assertEquals(10,do1.val1);
  assertEquals(0,do1.val2);
  assertEquals(0,do1.val3);
  BinaryObject po2=marshal(new DynamicObject(1,10,20,30),marsh);
  assertEquals(new Integer(10),po2.field("val1"));
  assertEquals(new Integer(20),po2.field("val2"));
  assertEquals(null,po2.field("val3"));
  DynamicObject do2=po2.deserialize();
  assertEquals(10,do2.val1);
  assertEquals(20,do2.val2);
  assertEquals(0,do2.val3);
  BinaryObject po3=marshal(new DynamicObject(2,10,20,30),marsh);
  assertEquals(new Integer(10),po3.field("val1"));
  assertEquals(new Integer(20),po3.field("val2"));
  assertEquals(new Integer(30),po3.field("val3"));
  DynamicObject do3=po3.deserialize();
  assertEquals(10,do3.val1);
  assertEquals(20,do3.val2);
  assertEquals(30,do3.val3);
}
