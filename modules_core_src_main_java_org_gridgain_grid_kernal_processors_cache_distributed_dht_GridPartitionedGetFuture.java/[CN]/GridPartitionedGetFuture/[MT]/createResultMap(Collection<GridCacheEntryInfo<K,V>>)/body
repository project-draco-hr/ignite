{
  int keysSize=infos.size();
  try {
    if (keysSize != 0) {
      Map<K,V> map=new GridLeanMap<>(keysSize);
      for (      GridCacheEntryInfo<K,V> info : infos) {
        info.unmarshalValue(cctx,cctx.deploy().globalLoader());
        V val=info.value();
        if (deserializePortable && val instanceof GridPortableObject) {
          try {
            val=((GridPortableObject)val).deserialize();
          }
 catch (          GridPortableException e) {
            throw new GridRuntimeException(e);
          }
        }
        map.put(info.key(),val);
      }
      return map;
    }
  }
 catch (  GridException e) {
    onDone(e);
  }
  return Collections.emptyMap();
}
