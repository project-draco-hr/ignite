{
  try {
    final Ignite g=startGrid();
    GridDiscoverySpi spi=g.configuration().getDiscoverySpi();
    GridDiscoverySpiHistorySupport ann=U.getAnnotation(spi.getClass(),GridDiscoverySpiHistorySupport.class);
    assertNotNull("Spi does not have annotation for history support",ann);
    assertTrue("History support is disabled for current spi",ann.value());
  }
  finally {
    stopGrid();
  }
}
