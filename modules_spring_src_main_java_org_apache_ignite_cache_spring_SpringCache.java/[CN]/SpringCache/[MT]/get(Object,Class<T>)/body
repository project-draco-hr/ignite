{
  Object val=cache.get(key);
  if (NULL.equals(val))   val=null;
  if (val != null && type != null && !type.isInstance(val))   throw new IllegalStateException("Cached value is not of required type [cacheName=" + cache.getName() + ", key="+ key+ ", val="+ val+ ", requiredType="+ type+ ']');
  return (T)val;
}
