{
  if (col != null) {
    if (it == null) {
      writeInt(col.size());
      if (!lastFinished)       return;
      it=col.iterator();
    }
    Type itemType=type(itemCls);
    while (it.hasNext() || cur != NULL) {
      if (cur == NULL) {
        cur=it.next();
        if (itemType == Type.MSG)         cur=((MessageAdapter)cur).clone();
      }
      write(itemType,cur);
      if (!lastFinished)       return;
      cur=NULL;
    }
    it=null;
  }
 else   writeInt(-1);
}
