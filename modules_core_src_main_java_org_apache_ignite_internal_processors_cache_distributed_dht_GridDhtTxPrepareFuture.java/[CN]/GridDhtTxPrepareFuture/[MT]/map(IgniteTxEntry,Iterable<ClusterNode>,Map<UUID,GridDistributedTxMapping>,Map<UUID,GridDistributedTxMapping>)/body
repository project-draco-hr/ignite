{
  boolean ret=false;
  if (nodes != null) {
    for (    ClusterNode n : nodes) {
      GridDistributedTxMapping global=globalMap.get(n.id());
      if (!F.isEmpty(entry.entryProcessors())) {
        GridDhtPartitionState state=entry.context().topology().partitionState(n.id(),entry.cached().partition());
        if (state != GridDhtPartitionState.OWNING && state != GridDhtPartitionState.EVICTED) {
          CacheObject procVal=entry.entryProcessorCalculatedValue();
          entry.op(procVal == null ? DELETE : UPDATE);
          entry.value(procVal,true,false);
          entry.entryProcessors(null);
        }
      }
      if (global == null)       globalMap.put(n.id(),global=new GridDistributedTxMapping(n));
      global.add(entry);
      GridDistributedTxMapping loc=locMap.get(n.id());
      if (loc == null)       locMap.put(n.id(),loc=new GridDistributedTxMapping(n));
      loc.add(entry);
      ret=true;
    }
  }
  return ret;
}
