{
  String cacheLookupClsName=cfg.getTransactionManagerLookupClassName();
  if (cacheLookupClsName != null) {
    CacheTmLookup tmLookup=tmLookupRef.get();
    if (tmLookup == null) {
      tmLookup=createTmLookup(cacheLookupClsName);
      if (tmLookupRef.compareAndSet(null,tmLookup))       return;
      tmLookup=tmLookupRef.get();
    }
    if (!cacheLookupClsName.equals(tmLookup.getClass().getName()))     throw new IgniteCheckedException("Failed to start cache with CacheTmLookup that specified in cache " + "configuration, because node uses another CacheTmLookup [cache" + cfg.getName() + ", tmLookupClassName="+ cacheLookupClsName+ ", tmLookupUsedByNode="+ tmLookup.getClass().getName()+ ']');
  }
}
