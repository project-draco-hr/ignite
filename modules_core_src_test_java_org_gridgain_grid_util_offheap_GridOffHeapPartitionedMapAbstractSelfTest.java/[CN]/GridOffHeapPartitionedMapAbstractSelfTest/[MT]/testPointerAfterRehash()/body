{
  initCap=10;
  map=newMap();
  Map<String,String> kv=new HashMap<>(1000);
  Map<String,Long> ptrs=new HashMap<>(1000);
  for (int i=0; i < 1000; i++)   kv.put(string(),string());
  for (  Map.Entry<String,String> e : kv.entrySet()) {
    String key=e.getKey();
    String val=e.getValue();
    assertTrue(map.put(1,hash(key),key.getBytes(),val.getBytes()));
    GridBiTuple<Long,Integer> ptr=map.valuePointer(1,hash(key),key.getBytes());
    assertNotNull(ptr);
    assertEquals((Integer)val.getBytes().length,ptr.get2());
    assertFalse(map.put(1,hash(key),key.getBytes(),val.getBytes()));
    ptrs.put(key,ptr.get1());
  }
  for (  Map.Entry<String,String> e : kv.entrySet()) {
    String key=e.getKey();
    GridBiTuple<Long,Integer> ptr=map.valuePointer(1,hash(key),key.getBytes());
    assertNotNull(ptr);
    assertEquals(ptrs.get(key),ptr.get1());
  }
}
