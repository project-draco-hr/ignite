{
  this.fut=fut;
  GridCacheQueryAdapter<?> qry=fut.query();
  GridPredicate<GridCacheEntry<?,?>> prjPred=qry.projectionFilter() == null ? F.<GridCacheEntry<?,?>>alwaysTrue() : qry.projectionFilter();
  GridClosure<V,Object> trans=null;
  if (qry instanceof GridCacheTransformQueryAdapter) {
    GridCacheTransformQueryAdapter tmp=(GridCacheTransformQueryAdapter)qry;
    trans=tmp.remoteTransformer();
  }
  GridReducer<Map.Entry<K,V>,Object> rdc=null;
  if (qry instanceof GridCacheReduceQueryAdapter) {
    GridCacheReduceQueryAdapter tmp=(GridCacheReduceQueryAdapter)qry;
    rdc=tmp.remoteReducer();
  }
  GridReducer<List<Object>,Object> fieldsRdc=null;
  if (qry instanceof GridCacheReduceFieldsQueryAdapter) {
    GridCacheReduceFieldsQueryAdapter tmp=(GridCacheReduceFieldsQueryAdapter)qry;
    fieldsRdc=tmp.remoteReducer();
  }
  boolean incMeta=false;
  if (qry instanceof GridCacheFieldsQueryBase)   incMeta=((GridCacheFieldsQueryBase)qry).includeMetadata();
  return new GridCacheQueryInfo<>(true,single,prjPred,trans,rdc,fieldsRdc,qry,qry.pageSize(),qry.cloneValues(),qry.includeBackups(),fut,null,-1,incMeta,vis,true);
}
