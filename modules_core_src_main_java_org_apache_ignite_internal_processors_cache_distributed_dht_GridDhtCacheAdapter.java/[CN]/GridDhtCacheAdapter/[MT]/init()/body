{
  map.setEntryFactory(new GridCacheMapEntryFactory(){
    /** 
 * {@inheritDoc} 
 */
    @Override public GridCacheMapEntry create(    GridCacheContext ctx,    AffinityTopologyVersion topVer,    KeyCacheObject key,    int hash,    CacheObject val,    GridCacheMapEntry next,    int hdrId){
      if (ctx.useOffheapEntry())       return new GridDhtOffHeapCacheEntry(ctx,topVer,key,hash,val,next,hdrId);
      return new GridDhtCacheEntry(ctx,topVer,key,hash,val,next,hdrId);
    }
  }
);
}
