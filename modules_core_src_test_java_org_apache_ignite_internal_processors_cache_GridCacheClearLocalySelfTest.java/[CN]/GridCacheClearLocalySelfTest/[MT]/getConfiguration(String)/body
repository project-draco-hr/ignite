{
  IgniteConfiguration cfg=super.getConfiguration(gridName);
  CacheConfiguration ccfgLoc=new CacheConfiguration();
  ccfgLoc.setName(CACHE_LOCAL);
  ccfgLoc.setCacheMode(LOCAL);
  ccfgLoc.setWriteSynchronizationMode(FULL_SYNC);
  ccfgLoc.setAtomicityMode(TRANSACTIONAL);
  CacheConfiguration ccfgPartitioned=new CacheConfiguration();
  ccfgPartitioned.setName(CACHE_PARTITIONED);
  ccfgPartitioned.setCacheMode(PARTITIONED);
  ccfgPartitioned.setBackups(1);
  ccfgPartitioned.setWriteSynchronizationMode(FULL_SYNC);
  ccfgPartitioned.setDistributionMode(gridName.equals(getTestGridName(0)) ? NEAR_PARTITIONED : gridName.equals(getTestGridName(1)) ? NEAR_ONLY : CLIENT_ONLY);
  ccfgPartitioned.setAtomicityMode(TRANSACTIONAL);
  CacheConfiguration ccfgColocated=new CacheConfiguration();
  ccfgColocated.setName(CACHE_COLOCATED);
  ccfgColocated.setCacheMode(PARTITIONED);
  ccfgColocated.setBackups(1);
  ccfgColocated.setWriteSynchronizationMode(FULL_SYNC);
  ccfgColocated.setDistributionMode(PARTITIONED_ONLY);
  ccfgColocated.setAtomicityMode(TRANSACTIONAL);
  CacheConfiguration ccfgReplicated=new CacheConfiguration();
  ccfgReplicated.setName(CACHE_REPLICATED);
  ccfgReplicated.setCacheMode(REPLICATED);
  ccfgReplicated.setWriteSynchronizationMode(FULL_SYNC);
  ccfgReplicated.setAtomicityMode(TRANSACTIONAL);
  cfg.setCacheConfiguration(ccfgLoc,ccfgPartitioned,ccfgColocated,ccfgReplicated);
  TcpDiscoverySpi discoSpi=new TcpDiscoverySpi();
  discoSpi.setIpFinder(IP_FINDER);
  cfg.setDiscoverySpi(discoSpi);
  return cfg;
}
