{
  ApplicationContext springCtx;
  try {
    springCtx=U.applicationContext(cfgUrl);
  }
 catch (  BeansException e) {
    throw new GridException("Failed to instantiate Spring XML application context [springUrl=" + cfgUrl + ", err="+ e.getMessage()+ ']',e);
  }
  Map<String,GridConfiguration> cfgMap;
  try {
    cfgMap=springCtx.getBeansOfType(GridConfiguration.class);
  }
 catch (  BeansException e) {
    throw new GridException("Failed to instantiate bean [type=" + GridConfiguration.class + ", err="+ e.getMessage()+ ']',e);
  }
  if (cfgMap == null || cfgMap.isEmpty())   throw new GridException("Failed to find grid configuration in: " + cfgUrl);
  return F.t(cfgMap.values(),new GridSpringResourceContext(springCtx));
}
