{
  ComputeTaskSession ses1=new GridTestTaskSession(IgniteUuid.randomUuid());
  ComputeTaskSession ses2=new GridTestTaskSession(IgniteUuid.randomUuid());
  List<ClusterNode> allNodes=(List<ClusterNode>)getSpiContext().nodes();
  List<UUID> orderedNodes=getSpi().getNodeIds(ses1);
  assertEquals("Balancer doesn't use all available nodes",orderedNodes.size(),allNodes.size());
  checkCyclicBalancing(getSpi(),allNodes,orderedNodes,ses1,ses2);
  getSpiContext().triggerEvent(new IgniteTaskEvent(null,null,EVT_TASK_FINISHED,ses1.getId(),null,null,false,null));
  getSpiContext().triggerEvent(new IgniteTaskEvent(null,null,EVT_TASK_FAILED,ses2.getId(),null,null,false,null));
}
