{
  rw.readLock();
  try {
    if (stopping) {
      if (log.isDebugEnabled())       log.debug("Received cache communication message while stopping (will ignore) [nodeId=" + nodeId + ", msg="+ cacheMsg+ ']');
      return;
    }
    if (depEnabled)     cctx.deploy().ignoreOwnership(true);
    unmarshall(nodeId,cacheMsg);
    if (cacheMsg.classError() != null)     processFailedMessage(nodeId,cacheMsg,c);
 else     processMessage(nodeId,cacheMsg,c);
  }
 catch (  Throwable e) {
    U.error(log,"Failed to process message [senderId=" + nodeId + ", messageType="+ cacheMsg.getClass()+ ']',e);
    if (e instanceof Error)     throw (Error)e;
  }
 finally {
    if (depEnabled)     cctx.deploy().ignoreOwnership(false);
    rw.readUnlock();
  }
}
