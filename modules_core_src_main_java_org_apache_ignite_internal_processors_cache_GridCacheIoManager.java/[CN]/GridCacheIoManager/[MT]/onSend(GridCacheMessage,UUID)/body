{
  if (msg.error() != null && cctx.kernalContext().isStopping())   return false;
  if (msg.messageId() < 0)   msg.messageId(idGen.incrementAndGet());
  if (destNodeId == null || !cctx.localNodeId().equals(destNodeId)) {
    msg.prepareMarshal(cctx);
    if (msg instanceof GridCacheDeployable && msg.addDeploymentInfo())     cctx.deploy().prepare((GridCacheDeployable)msg);
  }
  return true;
}
