{
  for (; ; ) {
    int flags0=flags;
    if ((flags0 & flag) != 0)     return false;
    if (flagsUpd.compareAndSet(this,flags0,flags0 | flag))     return true;
  }
}
