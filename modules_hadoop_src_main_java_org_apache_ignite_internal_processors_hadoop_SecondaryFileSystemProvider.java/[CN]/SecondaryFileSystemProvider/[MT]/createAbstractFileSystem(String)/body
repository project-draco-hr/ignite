{
  userName=IgfsUtils.fixUserName(userName);
  String ticketCachePath=cfg.get(CommonConfigurationKeys.KERBEROS_TICKET_CACHE_PATH);
  UserGroupInformation ugi=UserGroupInformation.getBestUGI(ticketCachePath,userName);
  try {
    return ugi.doAs(new PrivilegedExceptionAction<AbstractFileSystem>(){
      @Override public AbstractFileSystem run() throws IOException {
        return AbstractFileSystem.get(uri,cfg);
      }
    }
);
  }
 catch (  InterruptedException ie) {
    Thread.currentThread().interrupt();
    throw new IOException("Failed to create file system due to interrupt.",ie);
  }
}
