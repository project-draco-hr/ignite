{
  final String name="servicesByName";
  Grid g=randomGrid();
  g.services().deployMultiple(name,new DummyService(),nodeCount() * 2,3);
  GridTestUtils.retryAssert(log,50,200,new CA(){
    @Override public void apply(){
      int cnt=0;
      for (int i=0; i < nodeCount(); i++) {
        Collection<DummyService> srvcs=grid(i).services().services(name);
        if (srvcs != null)         cnt+=srvcs.size();
      }
      assertEquals(nodeCount() * 2,cnt);
    }
  }
);
}
