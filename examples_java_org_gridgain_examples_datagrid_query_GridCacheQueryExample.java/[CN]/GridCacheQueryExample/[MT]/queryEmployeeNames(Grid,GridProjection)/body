{
  GridCacheProjection<GridCacheAffinityKey<UUID>,AffinityPerson> cache=cache(g);
  GridCacheQuery<Map.Entry<GridCacheAffinityKey<UUID>,AffinityPerson>> qry=cache.queries().createSqlQuery(AffinityPerson.class,"from AffinityPerson, Organization " + "where AffinityPerson.orgId = Organization.id and lower(Organization.name) = lower(?)");
  Collection<String> names=qry.projection(p).execute(new GridClosure<Map.Entry<GridCacheAffinityKey<UUID>,AffinityPerson>,String>(){
    @Override public String apply(    Map.Entry<GridCacheAffinityKey<UUID>,AffinityPerson> e){
      return e.getValue().getLastName();
    }
  }
,"GridGain").get();
  print("Names of all 'GridGain' employees: " + names);
}
