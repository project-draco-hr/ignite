{
  ApplicationContext springCtx=applicationContext(cfgUrl,excludedProps);
  Map<String,IgniteConfiguration> cfgMap;
  try {
    cfgMap=springCtx.getBeansOfType(IgniteConfiguration.class);
  }
 catch (  BeansException e) {
    throw new IgniteCheckedException("Failed to instantiate bean [type=" + IgniteConfiguration.class + ", err="+ e.getMessage()+ ']',e);
  }
  if (cfgMap == null || cfgMap.isEmpty())   throw new IgniteCheckedException("Failed to find grid configuration in: " + cfgUrl);
  return F.t(cfgMap.values(),new GridSpringResourceContextImpl(springCtx));
}
