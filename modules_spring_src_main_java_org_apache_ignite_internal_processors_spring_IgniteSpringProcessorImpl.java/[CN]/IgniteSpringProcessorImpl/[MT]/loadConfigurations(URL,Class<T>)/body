{
  ApplicationContext springCtx=applicationContext(cfgUrl);
  Map<String,T> cfgMap;
  try {
    cfgMap=springCtx.getBeansOfType(cl);
  }
 catch (  BeansException e) {
    throw new IgniteCheckedException("Failed to instantiate bean [type=" + cl + ", err="+ e.getMessage()+ ']',e);
  }
  if (cfgMap == null || cfgMap.isEmpty())   throw new IgniteCheckedException("Failed to find cache configuration in: " + cfgUrl);
  return F.t(cfgMap.values(),new GridSpringResourceContextImpl(springCtx));
}
