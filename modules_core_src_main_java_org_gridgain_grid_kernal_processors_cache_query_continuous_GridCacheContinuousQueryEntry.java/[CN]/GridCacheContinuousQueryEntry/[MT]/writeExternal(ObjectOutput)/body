{
  boolean compatibilityMode=GridContinuousProcessor.COMPATIBILITY_MODE.get();
  boolean b=keyBytes != null;
  out.writeBoolean(b);
  if (b) {
    U.writeByteArray(out,keyBytes);
    if (newValBytes != null && !newValBytes.isNull()) {
      out.writeBoolean(true);
      out.writeBoolean(newValBytes.isPlain());
      U.writeByteArray(out,newValBytes.get());
    }
 else     out.writeBoolean(false);
    if (!compatibilityMode) {
      if (oldValBytes != null && !oldValBytes.isNull()) {
        out.writeBoolean(true);
        out.writeBoolean(oldValBytes.isPlain());
        U.writeByteArray(out,oldValBytes.get());
      }
 else       out.writeBoolean(false);
    }
    U.writeString(out,cacheName);
    out.writeObject(depInfo);
  }
 else {
    out.writeObject(key);
    out.writeObject(newVal);
    if (!compatibilityMode)     out.writeObject(oldVal);
  }
}
