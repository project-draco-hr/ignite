{
  IgniteConfiguration cfg=super.getConfiguration(gridName);
  BinaryMarshaller marsh=new BinaryMarshaller();
  BinaryConfiguration bCfg=new BinaryConfiguration();
  bCfg.setClassNames(Arrays.asList(TestObject1.class.getName(),TestObject2.class.getName()));
  BinaryTypeConfiguration typeCfg=new BinaryTypeConfiguration();
  typeCfg.setTypeName(TestObject1.class.getName());
  CacheKeyConfiguration keyCfg=new CacheKeyConfiguration(TestObject1.class.getName(),"val2");
  cfg.setCacheKeyConfiguration(keyCfg);
  bCfg.setTypeConfigurations(Arrays.asList(typeCfg));
  cfg.setBinaryConfiguration(bCfg);
  if (gridName.equals(getTestGridName(gridCount() - 1)))   cfg.setClientMode(true);
  cfg.setMarshaller(marsh);
  ((TcpDiscoverySpi)cfg.getDiscoverySpi()).setForceServerMode(true);
  return cfg;
}
