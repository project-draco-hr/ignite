{
  CachedAffinity aff=head.get();
  if (aff.topologyVersion() >= topVer)   return new GridFinishedFutureEx<>(topVer);
  GridFutureAdapter<Long> fut=F.addIfAbsent(readyFuts,topVer,new AffinityReadyFuture(ctx));
  if (head.get().topologyVersion() >= topVer)   fut.onDone(topVer);
  return fut;
}
