{
synchronized (lock) {
    if (daemons == null)     throw new RuntimeException("Failed to create HadoopDaemon (its registry is already cleared): " + "[classLoader=" + getClass().getClassLoader() + ']');
    if (runnable.getClass().getClassLoader() == getClass().getClassLoader() && isPeerCacheRunnable(runnable))     daemons.add(this);
  }
}
