{
  final String name="testLocalProxyInvocation";
  final Ignite ignite=grid(0);
  ignite.services().deployNodeSingleton(name,new MapServiceImpl<String,Integer>());
  for (int i=0; i < nodeCount(); i++) {
    MapService<Integer,String> svc=grid(i).services().serviceProxy(name,MapService.class,false);
    assertTrue(svc instanceof Service);
    svc.put(i,Integer.toString(i));
  }
  MapService<Integer,String> map=ignite.services().serviceProxy(name,MapService.class,false);
  for (int i=0; i < nodeCount(); i++)   assertEquals(1,map.size());
}
