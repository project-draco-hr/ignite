{
  IgniteConfiguration cfg=super.getConfiguration(gridName);
  TcpDiscoverySpi spi=new TcpDiscoverySpi();
  spi.setIpFinder(IP_FINDER);
  cfg.setDiscoverySpi(spi);
  AlwaysFailoverSpi failSpi=new AlwaysFailoverSpi();
  failSpi.setMaximumFailoverAttempts(MAX_FAILOVER_ATTEMPTS);
  cfg.setFailoverSpi(failSpi);
  CacheConfiguration ccfg=defaultCacheConfiguration();
  ccfg.setName(CACHE_NAME);
  ccfg.setCacheMode(PARTITIONED);
  ccfg.setBackups(1);
  cfg.setCacheConfiguration(ccfg);
  if (gridName.equals(getTestGridName(SRVS))) {
    cfg.setClientMode(true);
    spi.setForceServerMode(true);
  }
  return cfg;
}
