{
  if (atomicityMode() == ATOMIC)   return;
  GridCache<Integer,Integer> c=grid(0).cache(null);
  Integer key=primaryKey(c);
  Integer val=key;
  c.put(key,val);
  assertTrue(c.lock(key,0,new TestEntryPredicate(val)));
  assertTrue(c.isLocked(key));
  c.unlock(key);
  assertFalse(c.isLocked(key));
  assertNull(c.peek(key));
  checkValue(key,val);
}
