{
  Collection<GridJobExecuteResponse> responses=new ArrayList<>();
synchronized (mux) {
    if (state != State.WAITING)     return;
    if (jobRes != null) {
      for (      GridJobResultImpl jr : jobRes.values()) {
        if (!jr.hasResponse()) {
          boolean found=false;
          for (          GridNode node : nodes) {
            if (jr.getNode().id().equals(node.id())) {
              found=true;
              break;
            }
          }
          if (!found) {
            if (log.isDebugEnabled())             log.debug("Creating fake response when synchronizing nodes for job result: " + jr);
            GridJobExecuteResponse fakeRes=new GridJobExecuteResponse(jr.getNode().id(),ses.getId(),jr.getJobContext().getJobId(),null,null,null,null,null,null,false);
            fakeRes.setFakeException(new GridTopologyException("Node has left grid: " + jr.getNode()));
            responses.add(fakeRes);
          }
        }
      }
    }
  }
  for (  GridJobExecuteResponse res : responses)   onResponse(res);
}
