{
  GridComputeTaskSpis spis=dep.annotation(taskCls,GridComputeTaskSpis.class);
  if (spis != null) {
    ses.setTopologySpi(spis.topologySpi());
    ses.setLoadBalancingSpi(spis.loadBalancingSpi());
    ses.setFailoverSpi(spis.failoverSpi());
    ses.setCheckpointSpi(spis.checkpointSpi());
  }
  String spi=getThreadContext(TC_FAILOVER_SPI);
  if (spi != null)   ses.setFailoverSpi(spi);
  spi=getThreadContext(TC_CHECKPOINT_SPI);
  if (spi != null)   ses.setCheckpointSpi(spi);
  spi=getThreadContext(TC_LOAD_BALANCING_SPI);
  if (spi != null)   ses.setLoadBalancingSpi(spi);
  spi=getThreadContext(TC_TOPOLOGY_SPI);
  if (spi != null)   ses.setTopologySpi(spi);
}
