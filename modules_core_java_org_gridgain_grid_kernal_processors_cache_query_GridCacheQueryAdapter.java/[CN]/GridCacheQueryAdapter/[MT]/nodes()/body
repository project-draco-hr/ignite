{
  Collection<GridNode> nodes=CU.allNodes(ctx);
  if (prj == null) {
    if (ctx.isReplicated())     return Collections.singletonList(ctx.localNode());
    return nodes;
  }
  return F.view(nodes,new P1<GridNode>(){
    @Override public boolean apply(    GridNode e){
      return prj.node(e.id()) != null;
    }
  }
);
}
