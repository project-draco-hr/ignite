{
  plc=new CacheFifoEvictionPolicy<>(100);
  try {
    Ignite g=startGrid(1);
    Integer affKey=1;
    GridCache<Object,Integer> cache=g.cache(null);
    IgniteTx tx=cache.txStartPartition(cache.affinity().partition(affKey),PESSIMISTIC,REPEATABLE_READ,0,5);
    try {
      for (int i=0; i < 5; i++)       cache.put(new CacheAffinityKey<Object>(i,affKey),i);
      tx.commit();
    }
  finally {
      tx.close();
    }
    assertEquals(5,((CacheFifoEvictionPolicy)plc).queue().size());
    tx=cache.txStartPartition(cache.affinity().partition(affKey),PESSIMISTIC,REPEATABLE_READ,0,5);
    try {
      for (int i=0; i < 5; i++)       cache.remove(new CacheAffinityKey<Object>(i,affKey));
      tx.commit();
    }
  finally {
      tx.close();
    }
    assertEquals(0,((CacheFifoEvictionPolicy)plc).queue().size());
  }
  finally {
    stopAllGrids();
  }
}
