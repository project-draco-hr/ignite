{
  plc=new CacheFifoEvictionPolicy<>(100);
  try {
    Ignite g=startGrid(1);
    Integer affKey=1;
    IgniteCache<Object,Integer> cache=g.jcache(null);
    IgniteTx tx=g.transactions().txStartPartition(cache.getName(),g.affinity(cache.getName()).partition(affKey),PESSIMISTIC,REPEATABLE_READ,0,5);
    try {
      for (int i=0; i < 5; i++)       cache.put(new CacheAffinityKey<Object>(i,affKey),i);
      tx.commit();
    }
  finally {
      tx.close();
    }
    assertEquals(5,((CacheFifoEvictionPolicy)plc).queue().size());
    tx=g.transactions().txStartPartition(cache.getName(),g.affinity(cache.getName()).partition(affKey),PESSIMISTIC,REPEATABLE_READ,0,5);
    try {
      for (int i=0; i < 5; i++)       cache.remove(new CacheAffinityKey<Object>(i,affKey));
      tx.commit();
    }
  finally {
      tx.close();
    }
    assertEquals(0,((CacheFifoEvictionPolicy)plc).queue().size());
  }
  finally {
    stopAllGrids();
  }
}
