{
synchronized (this) {
    if (map.containsKey(key))     return;
    Map<K,V> map0=new HashMap<>(map);
    map0.put(key,val);
    map=map0;
  }
}
