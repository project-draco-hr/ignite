{
  IgniteConfiguration cfg=getConfiguration(getTestGridName());
  TcpDiscoverySpi discoSpi=new TcpDiscoverySpi();
  discoSpi.setIpFinder(IP_FINDER);
  cfg.setDiscoverySpi(discoSpi);
  CacheConfiguration cc=defaultCacheConfiguration();
  cc.setName("partitioned");
  cc.setCacheMode(CacheMode.PARTITIONED);
  cc.setAffinityMapper(new IgfsGroupDataBlocksKeyMapper(128));
  cc.setBackups(0);
  cc.setAtomicityMode(TRANSACTIONAL);
  CacheConfiguration metaCfg=defaultCacheConfiguration();
  metaCfg.setName("replicated");
  metaCfg.setCacheMode(CacheMode.REPLICATED);
  metaCfg.setAtomicityMode(TRANSACTIONAL);
  cfg.setCacheConfiguration(metaCfg,cc);
  return cfg;
}
