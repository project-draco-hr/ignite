{
  if (meta == null)   writer.writeBoolean(false);
 else {
    writer.writeBoolean(true);
    Map<String,String> metaFields=((PortableMetaDataImpl)meta).fields0();
    Map<String,Integer> fields=U.newHashMap(metaFields.size());
    for (    Map.Entry<String,String> metaField : metaFields.entrySet())     fields.put(metaField.getKey(),CacheObjectPortableProcessorImpl.fieldTypeId(metaField.getValue()));
    writer.writeInt(typeId);
    writer.writeString(meta.typeName());
    writer.writeString(meta.affinityKeyFieldName());
    writer.writeMap(fields);
  }
}
