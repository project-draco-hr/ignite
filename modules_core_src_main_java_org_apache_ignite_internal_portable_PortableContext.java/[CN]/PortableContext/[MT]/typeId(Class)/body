{
  String clsName=cls.getName();
  if (marshCtx.isSystemType(clsName))   return new Type(clsName.hashCode(),true);
  if (predefinedClasses.contains(cls))   return new Type(DFLT_ID_MAPPER.typeId(typeName(clsName)),true);
  PortableClassDescriptor desc=descByCls.get(cls);
  boolean registered=desc != null && desc.isRegistered();
  if (!registered)   desc=registerUserClassDescriptor(cls);
  return new Type(desc.typeId(),desc.isRegistered());
}
