{
  lock.readLock();
  try {
    boolean res=(filter == null || filter.apply(evt));
    if (res) {
      updateIndexes(evt,false);
      if (!enqueue0(evt))       updateIndexes(evt,true);
    }
    return res;
  }
  finally {
    lock.readUnlock();
  }
}
