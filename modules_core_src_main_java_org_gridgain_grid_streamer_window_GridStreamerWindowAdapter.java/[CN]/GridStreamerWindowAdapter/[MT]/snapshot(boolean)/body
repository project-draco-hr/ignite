{
  lock.writeLock();
  try {
    int skip=includeEvicted ? 0 : evictionQueueSize();
    List<E> res=new ArrayList<>(size() - skip);
    Iterator<E> iter=iterator();
    int i=0;
    while (iter.hasNext()) {
      E next=iter.next();
      if (i++ >= skip)       res.add(next);
    }
    return Collections.unmodifiableList(res);
  }
  finally {
    lock.writeUnlock();
  }
}
