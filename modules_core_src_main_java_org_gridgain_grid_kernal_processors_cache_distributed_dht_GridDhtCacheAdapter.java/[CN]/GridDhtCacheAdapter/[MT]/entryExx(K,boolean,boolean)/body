{
  try {
    return allowDetached && !ctx.affinity().localNode(key) ? new GridDhtDetachedCacheEntry<>(ctx,key,key.hashCode(),null,null,0,0) : entryEx(key,touch);
  }
 catch (  GridDhtInvalidPartitionException e) {
    if (!allowDetached)     throw e;
    return new GridDhtDetachedCacheEntry<>(ctx,key,key.hashCode(),null,null,0,0);
  }
}
