{
  IgniteBiTuple<GridUuid,GridDhtTopologyFuture> tup=multiTxHolder.get();
  if (tup == null)   throw new GridException("Multi-update was not started or released twice.");
  top.readLock();
  try {
    GridUuid lockId=tup.get1();
    MultiUpdateFuture multiFut=multiTxFuts.remove(lockId);
    multiTxHolder.set(null);
    multiFut.onDone(lockId);
  }
  finally {
    top.readUnlock();
  }
}
