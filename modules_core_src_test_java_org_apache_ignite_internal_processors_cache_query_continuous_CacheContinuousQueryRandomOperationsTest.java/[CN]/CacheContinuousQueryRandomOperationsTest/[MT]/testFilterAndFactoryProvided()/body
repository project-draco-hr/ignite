{
  CacheConfiguration<Object,Object> ccfg=cacheConfiguration(PARTITIONED,1,ATOMIC,ONHEAP_TIERED,false);
  final IgniteCache<Object,Object> cache=grid(0).getOrCreateCache(ccfg);
  try {
    final ContinuousQuery qry=new ContinuousQuery();
    qry.setRemoteFilterFactory(new Factory<CacheEntryEventFilter>(){
      @Override public CacheEntryEventFilter create(){
        return null;
      }
    }
);
    qry.setRemoteFilter(new CacheEntryEventSerializableFilter(){
      @Override public boolean evaluate(      CacheEntryEvent event) throws CacheEntryListenerException {
        return false;
      }
    }
);
    qry.setLocalListener(new CacheEntryUpdatedListener(){
      @Override public void onUpdated(      Iterable iterable) throws CacheEntryListenerException {
      }
    }
);
    GridTestUtils.assertThrows(log,new Callable<Object>(){
      @Override public Object call() throws Exception {
        return cache.query(qry);
      }
    }
,IgniteException.class,null);
  }
  finally {
    cache.destroy();
  }
}
