{
  GridConfiguration cfg=super.getConfiguration(gridName);
  cfg.setDiscoverySpi(new GridTcpDiscoverySpi());
  GridCacheConfiguration ccfg=defaultCacheConfiguration();
  ccfg.setCacheMode(PARTITIONED);
  ccfg.setDistributionMode(distroMode);
  ccfg.setWriteBehindEnabled(writeBehind);
  ccfg.setCacheMode(GridCacheMode.PARTITIONED);
  ccfg.setName(CACHE_NAME);
  ccfg.setTransactionManagerLookupClassName(TestTxLookup.class.getName());
  cfg.setCacheConfiguration(ccfg);
  return cfg;
}
