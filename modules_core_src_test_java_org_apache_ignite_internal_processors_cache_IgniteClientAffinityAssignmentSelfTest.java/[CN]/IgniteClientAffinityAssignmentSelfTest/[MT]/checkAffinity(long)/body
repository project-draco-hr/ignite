{
  awaitTopology(topVer);
  Affinity<Object> aff=((IgniteKernal)grid(0)).getCache(null).affinity();
  for (  Ignite grid : Ignition.allGrids()) {
    try {
      if (grid.cluster().localNode().id().equals(grid(0).localNode().id()))       continue;
      Affinity<Object> checkAff=((IgniteKernal)grid).getCache(null).affinity();
      for (int p=0; p < PARTS; p++)       assertEquals(aff.mapPartitionToPrimaryAndBackups(p),checkAff.mapPartitionToPrimaryAndBackups(p));
    }
 catch (    IllegalArgumentException ignored) {
    }
  }
}
