{
  IgniteFsPath p=path("/tmp/my");
  ggfs.mkdirs(p);
  Map<String,String> oldProps=ggfs.info(p).properties();
  ggfs.update(p,F.asMap("a","1"));
  ggfs.update(p,F.asMap("b","2"));
  assertEquals("1",ggfs.info(p).property("a"));
  assertEquals("2",ggfs.info(p).property("b"));
  ggfs.update(p,F.asMap("b","3"));
  Map<String,String> expProps=new HashMap<>(oldProps);
  expProps.put("a","1");
  expProps.put("b","3");
  assertEquals("3",ggfs.info(p).property("b"));
  assertEquals(expProps,ggfs.info(p).properties());
  assertEquals("5",ggfs.info(p).property("c","5"));
  assertUpdatePropertiesFails(null,null,NullPointerException.class,"Ouch! Argument cannot be null");
  assertUpdatePropertiesFails(p,null,NullPointerException.class,"Ouch! Argument cannot be null");
  assertUpdatePropertiesFails(null,F.asMap("x","9"),NullPointerException.class,"Ouch! Argument cannot be null");
  assertUpdatePropertiesFails(p,Collections.<String,String>emptyMap(),IllegalArgumentException.class,"Ouch! Argument is invalid");
}
