{
  GridHadoopClientProtocolProvider provider=provider();
  checkProviderCacheSize(provider,0);
  Configuration conf1=config(REST_PORT);
  Configuration conf2=config(REST_PORT + 1);
  ClientProtocol proto1_1=provider.create(conf1);
  checkProviderCacheSize(provider,1);
  ClientProtocol proto2_1=provider.create(conf2);
  checkProviderCacheSize(provider,2);
  ClientProtocol proto1_2=provider.create(conf1);
  checkProviderCacheSize(provider,2);
  provider.close(proto1_2);
  checkProviderCacheSize(provider,2);
  provider.close(proto2_1);
  checkProviderCacheSize(provider,1);
  provider.close(proto1_1);
  checkProviderCacheSize(provider,0);
}
