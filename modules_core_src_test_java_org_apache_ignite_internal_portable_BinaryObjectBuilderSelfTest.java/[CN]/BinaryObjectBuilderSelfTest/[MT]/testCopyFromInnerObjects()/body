{
  ArrayList<Object> list=new ArrayList<>();
  list.add(new TestObjectAllTypes());
  list.add(list.get(0));
  TestObjectContainer c=new TestObjectContainer(list);
  BinaryObjectBuilderImpl builder=builder(toPortable(c));
  builder.<List>getField("foo").add("!!!");
  BinaryObject res=builder.build();
  TestObjectContainer deserialized=res.deserialize();
  List deserializedList=(List)deserialized.foo;
  assertSame(deserializedList.get(0),deserializedList.get(1));
  assertEquals("!!!",deserializedList.get(2));
  assertTrue(deserializedList.get(0) instanceof TestObjectAllTypes);
}
