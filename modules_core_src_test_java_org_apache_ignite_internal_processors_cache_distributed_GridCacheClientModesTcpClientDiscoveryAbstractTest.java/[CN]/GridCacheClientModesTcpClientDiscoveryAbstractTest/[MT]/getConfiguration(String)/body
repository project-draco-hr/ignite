{
  IgniteConfiguration cfg=super.getConfiguration(gridName);
  if (cfg.isClientMode() != null && cfg.isClientMode()) {
    TcpDiscoveryVmIpFinder clientIpFinder=new TcpDiscoveryVmIpFinder();
    ArrayList<String> addrList=new ArrayList<>(sharedTcpDiscoveryIpFinder().getRegisteredAddresses().size());
    for (    InetSocketAddress addr : sharedTcpDiscoveryIpFinder().getRegisteredAddresses()) {
      addrList.add(addr.getHostString() + ":" + addr.getPort());
    }
    clientIpFinder.setAddresses(addrList);
    TcpClientDiscoverySpi discoverySpi=new TcpClientDiscoverySpi();
    discoverySpi.setIpFinder(clientIpFinder);
    cfg.setDiscoverySpi(discoverySpi);
  }
  return cfg;
}
