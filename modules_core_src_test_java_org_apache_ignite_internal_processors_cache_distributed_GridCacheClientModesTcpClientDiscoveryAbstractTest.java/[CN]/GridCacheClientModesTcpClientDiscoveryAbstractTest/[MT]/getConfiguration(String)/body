{
  IgniteConfiguration cfg=super.getConfiguration(gridName);
  if (cfg.isClientMode() != null && cfg.isClientMode()) {
    TcpClientDiscoverySpi discoverySpi=new TcpClientDiscoverySpi();
    discoverySpi.setIpFinder(ipFinder);
    cfg.setDiscoverySpi(discoverySpi);
  }
  return cfg;
}
