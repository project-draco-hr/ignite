{
  Grid g=startGrid(0);
  try {
    GridCache<Object,Object> cache=g.cache(null);
    for (int i=0; i < 10; i++)     cache.put(i,i);
    Set<GridCacheEntry<Object,Object>> entries=cache.entrySet();
    assertNotNull(entries);
    assertFalse(entries.toString().isEmpty());
    GridCacheTx tx=cache.txStart(PESSIMISTIC,REPEATABLE_READ);
    try {
      assertEquals(1,cache.get(1));
      cache.put(2,22);
      assertFalse(tx.toString().isEmpty());
      entries=cache.entrySet();
      assertNotNull(entries);
      assertFalse(entries.toString().isEmpty());
      tx.commit();
    }
  finally {
      tx.close();
    }
  }
  finally {
    stopAllGrids();
  }
}
