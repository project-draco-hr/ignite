{
  IgniteInternalTx<K,V> tx=txContext();
  if (tx != null && tx.user() && (tx.state() != UNKNOWN && tx.state() != ROLLED_BACK && tx.state() != COMMITTED))   return tx;
  tx=tx(Thread.currentThread().getId());
  return tx != null && tx.user() && (tx.state() != UNKNOWN && tx.state() != ROLLED_BACK && tx.state() != COMMITTED) ? tx : null;
}
