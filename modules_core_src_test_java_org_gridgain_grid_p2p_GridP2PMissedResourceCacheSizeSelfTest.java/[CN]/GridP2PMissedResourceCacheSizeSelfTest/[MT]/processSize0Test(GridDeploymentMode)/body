{
  this.depMode=depMode;
  missedRsrcCacheSize=0;
  try {
    Grid grid1=startGrid(1);
    Grid grid2=startGrid(2);
    String path=GridTestProperties.getProperty("p2p.uri.cls");
    info("Using path: " + path);
    GridTestExternalClassLoader ldr=new GridTestExternalClassLoader(new URL[]{new URL(path)});
    Class task=ldr.loadClass(TASK_NAME1);
    grid1.compute().localDeployTask(task,task.getClassLoader());
    ldr.setExcludeClassNames(TASK_NAME1);
    executeFail(grid1,grid2,task);
    ldr.setExcludeClassNames();
    grid1.compute().execute(task,grid2.localNode().id());
  }
  finally {
    stopGrid(1);
    stopGrid(2);
  }
}
