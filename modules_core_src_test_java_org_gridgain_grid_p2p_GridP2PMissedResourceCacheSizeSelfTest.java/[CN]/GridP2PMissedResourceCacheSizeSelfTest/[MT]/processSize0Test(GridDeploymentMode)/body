{
  this.depMode=depMode;
  missedRsrcCacheSize=0;
  try {
    Ignite ignite1=startGrid(1);
    Ignite ignite2=startGrid(2);
    String path=GridTestProperties.getProperty("p2p.uri.cls");
    info("Using path: " + path);
    GridTestExternalClassLoader ldr=new GridTestExternalClassLoader(new URL[]{new URL(path)});
    Class task=ldr.loadClass(TASK_NAME1);
    ignite1.compute().localDeployTask(task,task.getClassLoader());
    ldr.setExcludeClassNames(TASK_NAME1);
    executeFail(ignite1,ignite2,task);
    ldr.setExcludeClassNames();
    ignite1.compute().execute(task,ignite2.cluster().localNode().id());
  }
  finally {
    stopGrid(1);
    stopGrid(2);
  }
}
