{
  spi.setListener(null);
  Map<String,Collection<GridDeployment>> cp;
synchronized (mux) {
    cp=new HashMap<String,Collection<GridDeployment>>(cache);
    for (    Entry<String,Collection<GridDeployment>> entry : cp.entrySet())     entry.setValue(new ArrayList<>(entry.getValue()));
  }
  for (  Collection<GridDeployment> deps : cp.values()) {
    for (    GridDeployment cls : deps)     undeploy(cls.classLoader());
  }
  if (log.isDebugEnabled())   log.debug(stopInfo());
}
