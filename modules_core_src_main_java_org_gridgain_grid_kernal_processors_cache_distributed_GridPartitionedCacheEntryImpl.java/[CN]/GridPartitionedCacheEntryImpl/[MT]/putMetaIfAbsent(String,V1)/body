{
  V1 v=null;
  GridDhtCacheEntry<K,V> de=dht().peekExx(key);
  if (de != null)   v=(V1)de.putMetaIfAbsent(name,val);
  GridNearCacheEntry<K,V> ne=de != null ? near().peekExx(key) : near().entryExx(key,ctx.affinity().affinityTopologyVersion());
  if (ne != null) {
    V1 v1=(V1)ne.putMetaIfAbsent(name,val);
    if (v == null)     v=v1;
  }
  return v;
}
