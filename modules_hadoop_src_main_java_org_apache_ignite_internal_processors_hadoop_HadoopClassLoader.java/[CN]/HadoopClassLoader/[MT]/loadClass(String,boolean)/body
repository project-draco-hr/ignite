{
  try {
    if (isHadoop(name)) {
      if (name.endsWith(".util.ShutdownHookManager"))       return loadFromBytes(name,HadoopShutdownHookManager.class.getName());
 else       if (name.endsWith(".util.NativeCodeLoader"))       return loadFromBytes(name,HadoopNativeCodeLoader.class.getName());
 else       if (name.equals(HADOOP_DAEMON_CLASS_NAME))       return loadFromBytes(name,HadoopDaemon.class.getName());
      return loadClassExplicitly(name,resolve);
    }
    if (isHadoopIgfs(name)) {
      Boolean hasDeps=cache.get(name);
      if (hasDeps == null) {
        hasDeps=hasExternalDependencies(name,new HashSet<String>());
        cache.put(name,hasDeps);
      }
      if (hasDeps)       return loadClassExplicitly(name,resolve);
    }
    return super.loadClass(name,resolve);
  }
 catch (  NoClassDefFoundError|ClassNotFoundException e) {
    throw new ClassNotFoundException("Failed to load class: " + name,e);
  }
}
