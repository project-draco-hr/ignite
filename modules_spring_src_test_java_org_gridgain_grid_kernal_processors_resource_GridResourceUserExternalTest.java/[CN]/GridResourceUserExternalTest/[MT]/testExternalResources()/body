{
  Grid grid1=null;
  Grid grid2=null;
  try {
    grid1=startGrid(1,new GridSpringResourceContextImpl(new GenericApplicationContext()));
    grid2=startGrid(2,new GridSpringResourceContextImpl(new GenericApplicationContext()));
    GridTestClassLoader tstClsLdr=new GridTestClassLoader(null,getClass().getClassLoader(),GridUserExternalResourceTask1.class.getName(),GridUserExternalResourceTask2.class.getName(),GridUserExternalResourceTask1.GridUserExternalResourceJob1.class.getName(),GridUserExternalResourceTask2.GridUserExternalResourceJob2.class.getName(),GridAbstractUserExternalResource.class.getName(),GridUserExternalResource1.class.getName(),GridUserExternalResource2.class.getName());
    Class<? extends GridComputeTask<Object,Object>> taskCls1=(Class<? extends GridComputeTask<Object,Object>>)tstClsLdr.loadClass(GridUserExternalResourceTask1.class.getName());
    Class<? extends GridComputeTask<Object,Object>> taskCls2=(Class<? extends GridComputeTask<Object,Object>>)tstClsLdr.loadClass(GridUserExternalResourceTask2.class.getName());
    grid1.compute().execute(taskCls1,null).get();
    grid1.compute().execute(taskCls2,null).get();
  }
  finally {
    GridTestUtils.close(grid1,log());
    GridTestUtils.close(grid2,log());
  }
}
