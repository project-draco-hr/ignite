{
  IgniteFsPath path=new IgniteFsPath("/someFile");
  long written=0;
  int i=0;
  int ggfsIdx=0;
  int fileSize=30 * GGFS_GROUP_SIZE * GGFS_BLOCK_SIZE;
  while (written < fileSize) {
    IgniteFs ggfs=grid(ggfsIdx).fileSystem("ggfs");
    try (GridGgfsOutputStream out=ggfs.append(path,true)){
      byte[] data=new byte[chunkSize];
      Arrays.fill(data,(byte)i);
      out.write(data);
    }
     System.out.println("Written [start=" + written + ", filler="+ i+ ']');
    written+=chunkSize;
    i++;
    if (rotate && i % 5 == 0) {
      ggfsIdx++;
      if (ggfsIdx >= NODE_CNT)       ggfsIdx=0;
    }
  }
  IgniteFs ggfs=grid(0).fileSystem("ggfs");
  try (IgniteFsInputStream in=ggfs.open(path)){
    i=0;
    int read=0;
    byte[] chunk=new byte[chunkSize];
    while (read < fileSize) {
      readFully(in,chunk);
      for (      byte b : chunk)       assertEquals("For read offset [start=" + read + ", filler="+ (i & 0xFF)+ ']',i & 0xFF,b & 0xFF);
      i++;
      read+=chunkSize;
    }
  }
 }
