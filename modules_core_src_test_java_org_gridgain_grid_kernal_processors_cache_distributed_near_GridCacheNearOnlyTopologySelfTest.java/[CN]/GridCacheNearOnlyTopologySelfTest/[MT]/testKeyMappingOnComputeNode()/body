{
  try {
    cache=true;
    for (int i=0; i < 4; i++) {
      nearOnly=i == 0;
      startGrid(i);
    }
    cache=false;
    Ignite compute=startGrid(4);
    for (int i=0; i < 100; i++) {
      GridNode node=compute.cluster().mapKeyToNode(null,i);
      assertFalse("For key: " + i,node.id().equals(compute.cluster().localNode().id()));
      assertFalse("For key: " + i,node.id().equals(grid(0).localNode().id()));
    }
  }
  finally {
    stopAllGrids();
  }
}
