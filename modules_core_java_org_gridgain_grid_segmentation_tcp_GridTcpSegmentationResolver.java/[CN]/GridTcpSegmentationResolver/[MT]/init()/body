{
  if (initGuard.compareAndSet(false,true)) {
    try {
      if (addr == null) {
        if (host == null || port < 0) {
          throw new GridException("Failed to initialize address of the segmentation resolver " + "(either address or host and port should be set): " + this);
        }
        addr=new InetSocketAddress(host,port);
      }
      if (locPort < 0)       throw new GridException("Failed to initialize segmentation resolver " + "(local port cannot be negative): " + this);
      if (connTimeout < 0)       throw new GridException("Failed to initialize segmentation resolver " + "(connect timeout cannot be negative): " + this);
    }
  finally {
      initLatch.countDown();
    }
  }
 else {
    U.await(initLatch);
    if (addr == null)     throw new GridException("Segmentation resolver was not properly initialized.");
  }
}
