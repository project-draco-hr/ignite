{
  Sync<X> sync0=sync;
  if (sync0.releaseAfterUpdate())   takeSnapshotAndReplaceSync(sync0);
}
