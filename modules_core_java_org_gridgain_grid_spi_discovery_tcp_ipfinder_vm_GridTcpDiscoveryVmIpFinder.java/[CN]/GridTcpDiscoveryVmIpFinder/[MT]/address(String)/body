{
  if (ipStr.endsWith(":"))   ipStr=ipStr.substring(0,ipStr.length() - 1);
 else   if (ipStr.indexOf(':') >= 0) {
    StringTokenizer st=new StringTokenizer(ipStr,":");
    if (st.countTokens() == 2) {
      String addrStr=st.nextToken();
      String portStr=st.nextToken();
      try {
        int port=Integer.parseInt(portStr);
        return new InetSocketAddress(addrStr,port);
      }
 catch (      IllegalArgumentException e) {
        throw new GridSpiException("Failed to parse provided address: " + ipStr,e);
      }
    }
 else     throw new GridSpiException("Failed to parse provided address: " + ipStr);
  }
  return new InetSocketAddress(ipStr,0);
}
