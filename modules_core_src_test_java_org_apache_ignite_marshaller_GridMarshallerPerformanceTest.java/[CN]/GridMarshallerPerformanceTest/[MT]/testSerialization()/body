{
  final ByteArrayOutputStream out=new ByteArrayOutputStream();
  IgniteInClosure<TestObject> writer=new CIX1<TestObject>(){
    @Override public void applyx(    TestObject obj) throws IgniteCheckedException {
      out.reset();
      ObjectOutputStream objOut=null;
      try {
        objOut=new ObjectOutputStream(out);
        objOut.writeObject(obj);
      }
 catch (      IOException e) {
        throw new IgniteCheckedException(e);
      }
 finally {
        U.close(objOut,log);
      }
    }
  }
;
  IgniteOutClosure<TestObject> reader=new COX<TestObject>(){
    @Override public TestObject applyx() throws IgniteCheckedException {
      ByteArrayInputStream in=new ByteArrayInputStream(out.toByteArray());
      ObjectInputStream objIn=null;
      try {
        objIn=new ObjectInputStream(in);
        return (TestObject)objIn.readObject();
      }
 catch (      ClassNotFoundException|IOException e) {
        throw new IgniteCheckedException(e);
      }
 finally {
        U.close(objIn,log);
      }
    }
  }
;
  runTest("Serialization",writer,reader);
}
