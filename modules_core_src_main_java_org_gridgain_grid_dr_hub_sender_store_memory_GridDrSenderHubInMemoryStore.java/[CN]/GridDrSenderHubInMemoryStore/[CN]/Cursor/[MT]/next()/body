{
  while (true) {
    long curIdx=idx;
    T2<DrEntry,Long> item=buf.get(curIdx);
    DrEntry drEntry=item.get1();
    if (drEntry == null)     return null;
    long itemIdx=item.get2();
    if (itemIdx < curIdx)     return null;
    readIdx.set(++idx);
    if (itemIdx > curIdx) {
      idx+=(itemIdx - curIdx - maxSize);
      continue;
    }
    if ((drEntry.mask & mask) != 0) {
      final byte[] data=drEntry.read();
      if (data == null)       continue;
      return new GridDrSenderHubStoreEntry(){
        @Override public byte[] data(){
          return data;
        }
        @Override public void acknowledge(){
        }
      }
;
    }
  }
}
