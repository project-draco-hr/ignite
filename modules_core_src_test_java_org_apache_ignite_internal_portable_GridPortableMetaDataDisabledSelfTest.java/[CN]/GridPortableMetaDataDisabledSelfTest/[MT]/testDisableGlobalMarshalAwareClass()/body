{
  marsh=new PortableMarshaller();
  BinaryTypeConfiguration typeCfg=new BinaryTypeConfiguration(TestObject1.class.getName());
  typeCfg.setMetaDataEnabled(true);
  marsh.setTypeConfigurations(Arrays.asList(new BinaryTypeConfiguration(TestObject2.class.getName()),typeCfg));
  marsh.setMetaDataEnabled(false);
  try {
    startGrid();
    portables().toBinary(new TestObject1());
    portables().toBinary(new TestObject2());
    assertEquals(1,portables().metadata(TestObject1.class).fields().size());
    assertEquals(0,portables().metadata(TestObject2.class).fields().size());
  }
  finally {
    stopGrid();
  }
}
