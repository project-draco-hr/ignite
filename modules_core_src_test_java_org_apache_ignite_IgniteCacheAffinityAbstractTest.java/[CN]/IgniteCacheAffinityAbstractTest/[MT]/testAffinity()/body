{
  if (cacheMode().equals(CacheMode.LOCAL)) {
    info("Test is not applied for local cache.");
    return;
  }
  GridCache<String,Integer> cache0=grid(1).cache(null);
  GridCache<String,Integer> cache1=grid(2).cache(CACHE1);
  for (int i=0; i < 10; ++i)   cache0.put(Integer.toString(i),i);
  for (int i=10; i < 20; ++i)   cache1.put(Integer.toString(i),i);
  checkAffinity();
  startGrid(gridCount());
  startGrid(gridCount() + 1);
  GRID_COUNT+=2;
  checkAffinity();
}
