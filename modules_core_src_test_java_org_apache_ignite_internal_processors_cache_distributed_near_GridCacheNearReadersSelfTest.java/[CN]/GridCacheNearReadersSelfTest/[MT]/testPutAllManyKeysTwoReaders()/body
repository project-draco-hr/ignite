{
  aff.backups(1);
  grids=5;
  aff.partitions(grids);
  startGrids();
  try {
    Cache<Object,Object> prj0=grid(0).cache(null);
    Cache<Object,Object> prj1=grid(1).cache(null);
    Cache<Object,Object> prj2=grid(2).cache(null);
    Map<Integer,Integer> putMap=new HashMap<>();
    int size=100;
    for (int i=0; i < size; i++)     putMap.put(i,i);
    prj0.putAll(putMap);
    for (int i=0; i < size; i++)     putMap.put(i,i * i);
    prj1.putAll(putMap);
    for (int i=0; i < size; i++)     putMap.put(i,i * i * i);
    prj2.putAll(putMap);
    for (int i=0; i < size; i++) {
      assertEquals(i * i * i,prj0.get(i));
      assertEquals(i * i * i,prj1.get(i));
      assertEquals(i * i * i,prj2.get(i));
    }
  }
  finally {
    stopAllGrids();
  }
}
