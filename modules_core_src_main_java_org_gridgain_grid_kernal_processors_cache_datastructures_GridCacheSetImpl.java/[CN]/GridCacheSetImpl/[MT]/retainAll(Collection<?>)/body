{
  try {
    try (GridCloseableIterator<T> iter=iteratorEx()){
      boolean rmv=false;
      Set<GridCacheSetItemKey> rmvKeys=null;
      for (      T val : iter) {
        if (!c.contains(val)) {
          rmv=true;
          if (rmvKeys == null)           rmvKeys=new HashSet<>(BATCH_SIZE);
          rmvKeys.add(itemKey(val));
          if (rmvKeys.size() == BATCH_SIZE) {
            cache.removeAll(rmvKeys);
            rmvKeys.clear();
          }
        }
      }
      if (!F.isEmpty(rmvKeys))       cache.removeAll(rmvKeys);
      return rmv;
    }
   }
 catch (  GridException e) {
    throw new GridRuntimeException(e);
  }
}
