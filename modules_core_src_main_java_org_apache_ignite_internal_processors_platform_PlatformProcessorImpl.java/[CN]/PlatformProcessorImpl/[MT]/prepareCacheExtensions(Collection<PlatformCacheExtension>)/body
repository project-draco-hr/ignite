{
  if (!F.isEmpty(cacheExts)) {
    int maxExtId=0;
    Map<Integer,PlatformCacheExtension> idToExt=new HashMap<>();
    for (    PlatformCacheExtension cacheExt : cacheExts) {
      if (cacheExt == null)       throw new IgniteException("Platform cache extension cannot be null.");
      if (cacheExt.id() < 0)       throw new IgniteException("Platform cache extension ID cannot be negative: " + cacheExt);
      PlatformCacheExtension oldCacheExt=idToExt.put(cacheExt.id(),cacheExt);
      if (oldCacheExt != null)       throw new IgniteException("Platform cache extensions cannot have the same ID [" + "id=" + cacheExt.id() + ", first="+ oldCacheExt+ ", second="+ cacheExt+ ']');
      if (cacheExt.id() > maxExtId)       maxExtId=cacheExt.id();
    }
    PlatformCacheExtension[] res=new PlatformCacheExtension[maxExtId + 1];
    for (    PlatformCacheExtension cacheExt : cacheExts)     res[cacheExt.id()]=cacheExt;
    return res;
  }
 else   return new PlatformCacheExtension[0];
}
