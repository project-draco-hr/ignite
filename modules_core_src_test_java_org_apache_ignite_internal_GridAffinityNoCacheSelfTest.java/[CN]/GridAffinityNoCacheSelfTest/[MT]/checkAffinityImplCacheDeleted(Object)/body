{
  IgniteEx grid=grid(0);
  final String cacheName="cacheToBeDeleted";
  grid(1).getOrCreateCache(cacheName);
  awaitPartitionMapExchange();
  Affinity<Object> affinity=grid.affinity(cacheName);
  assertTrue(affinity instanceof GridCacheAffinityImpl);
  final ClusterNode n=grid.cluster().localNode();
  grid.cache(cacheName).destroy();
  awaitPartitionMapExchange();
  assertAffinityMethodsException(grid.affinity(cacheName),key,n);
}
