{
  log=(GridLogger)beans.get(GridLogger.class);
  if (log == null) {
    U.error(log,"Failed to find logger definition in application context. Stopping the router.");
    return;
  }
  GridTcpRouterConfiguration tcpCfg=(GridTcpRouterConfiguration)beans.get(GridTcpRouterConfiguration.class);
  if (tcpCfg == null)   U.warn(log,"TCP router startup skipped (configuration not found).");
 else {
    tcpRouter=new GridTcpRouterImpl(tcpCfg);
    try {
      tcpRouter.start();
    }
 catch (    GridException e) {
      U.error(log,"Failed to start TCP router on port " + tcpCfg.getPort() + ": "+ e.getMessage(),e);
      tcpRouter=null;
    }
  }
  GridHttpRouterConfiguration httpCfg=(GridHttpRouterConfiguration)beans.get(GridHttpRouterConfiguration.class);
  if (httpCfg == null)   U.warn(log,"HTTP router startup skipped (configuration not found).");
 else {
    httpRouter=new GridHttpRouterImpl(httpCfg);
    try {
      httpRouter.start();
    }
 catch (    GridException e) {
      U.error(log,"Failed to start HTTP router. See log above for details.",e);
      httpRouter=null;
    }
  }
}
