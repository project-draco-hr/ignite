{
  if (ctx.isDaemon() || F.isEmpty(ctx.config().getCacheConfiguration()))   return;
  GridCacheAttributes[] attrVals=new GridCacheAttributes[ctx.config().getCacheConfiguration().length];
  Map<String,Boolean> attrPortable=new HashMap<>();
  Collection<String> replicationCaches=new ArrayList<>();
  Map<String,String> interceptors=new HashMap<>();
  int i=0;
  for (  GridCacheConfiguration cfg : ctx.config().getCacheConfiguration()) {
    attrVals[i++]=new GridCacheAttributes(cfg);
    attrPortable.put(CU.mask(cfg.getName()),cfg.isPortableEnabled());
    if (cfg.getDrSenderConfiguration() != null)     replicationCaches.add(cfg.getName());
    if (cfg.getInterceptor() != null)     interceptors.put(cfg.getName(),cfg.getInterceptor().getClass().getName());
  }
  attrs.put(ATTR_CACHE,attrVals);
  attrs.put(ATTR_CACHE_PORTABLE,attrPortable);
  attrs.put(ATTR_REPLICATION_CACHES,replicationCaches);
  if (!interceptors.isEmpty())   attrs.put(ATTR_CACHE_INTERCEPTORS,interceptors);
}
