{
  String val=systemOrEnv(envVarName,null);
  if (val == null) {
    if (!directoryExists(hadoopHome))     throw new IOException("Failed to resolve Hadoop installation location. " + envVarName + " or HADOOP_HOME environment variable should be set.");
    val=hadoopHome + expHadoopHomeRelativePath;
  }
  if (!directoryExists(val))   throw new IOException("Failed to resolve Hadoop location [path=" + val + ']');
  return val;
}
