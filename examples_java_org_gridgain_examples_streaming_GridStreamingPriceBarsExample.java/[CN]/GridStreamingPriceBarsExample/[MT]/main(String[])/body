{
  Timer timer=new Timer("priceBars");
  final Grid g=GridGain.start("examples/config/example-streamer.xml");
  try {
    TimerTask task=scheduleQuery(g,timer);
    streamData(g);
    task.run();
    timer.cancel();
    g.compute().run(new Runnable(){
      @Override public void run(){
        GridStreamer streamer=g.streamer("priceBars");
        if (streamer == null)         System.err.println("Default streamer not found (is example-streamer.xml " + "configuration used on all nodes?)");
 else {
          System.out.println("Clearing bars from streamer.");
          streamer.reset();
        }
      }
    }
).get();
  }
  finally {
    GridGain.stop(true);
  }
}
