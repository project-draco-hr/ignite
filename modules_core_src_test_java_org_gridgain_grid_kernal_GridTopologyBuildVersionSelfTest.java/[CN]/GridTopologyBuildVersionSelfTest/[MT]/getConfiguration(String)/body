{
  GridConfiguration cfg=super.getConfiguration(gridName);
  final int idx=cnt.incrementAndGet();
  GridTcpDiscoverySpi discoSpi=new GridTcpDiscoverySpi(){
    @Override public void setNodeAttributes(    Map<String,Object> attrs,    GridProductVersion ver){
      super.setNodeAttributes(attrs,ver);
      attrs.put(GridNodeAttributes.ATTR_BUILD_VER,idx + ".0.0" + "-ent");
      if (idx < 3)       attrs.remove(GridNodeAttributes.ATTR_BUILD_DATE);
 else       attrs.put(GridNodeAttributes.ATTR_BUILD_DATE,"1385099743");
      attrs.put(GridNodeAttributes.ATTR_COMPATIBLE_VERS,COMPATIBLE_VERS);
    }
  }
;
  discoSpi.setIpFinder(IP_FINDER);
  cfg.setDiscoverySpi(discoSpi);
  return cfg;
}
