{
  readCnt.set(Integer.MAX_VALUE);
  for (int i=0; i <= 20; i++) {
    jcache(0).put(new TestKey(String.valueOf(++key)),"");
  }
  readCnt.set(1);
  startGrid(3);
  Thread.sleep(1000);
  stopGrid(3);
  readCnt.set(Integer.MAX_VALUE);
  for (int i=0; i <= 1000; i++) {
    jcache(0).put(new TestKey(String.valueOf(++key)),"");
  }
  startGrid(3);
  Affinity<Object> aff=affinity(grid(3).cache(null));
  while (!aff.isPrimary(grid(3).localNode(),new TestKey(String.valueOf(key)))) {
    --key;
  }
  readCnt.set(1);
  jcache(3).get(new TestKey(String.valueOf(key)));
}
