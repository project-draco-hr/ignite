{
  byte rc=msg.resultCode();
  if (rc != GridClientHandshakeResponse.OK.resultCode()) {
    if (rc == GridClientHandshakeResponse.ERR_UNKNOWN_PROTO_ID.resultCode())     handshakeFut.onDone(new GridClientHandshakeException(rc,"Unknown/unsupported protocol ID."));
 else     handshakeFut.onDone(new GridClientHandshakeException(rc,"Handshake failed due to internal error (see server log for more details)."));
  }
 else   handshakeFut.onDone(true);
}
