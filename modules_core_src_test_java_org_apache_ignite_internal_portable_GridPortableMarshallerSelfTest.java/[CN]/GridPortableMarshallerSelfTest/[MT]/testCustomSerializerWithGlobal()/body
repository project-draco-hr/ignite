{
  PortableMarshaller marsh=new PortableMarshaller();
  marsh.setSerializer(new CustomSerializer1());
  PortableTypeConfiguration type1=new PortableTypeConfiguration(CustomSerializedObject1.class.getName());
  PortableTypeConfiguration type2=new PortableTypeConfiguration(CustomSerializedObject2.class.getName());
  type2.setSerializer(new CustomSerializer2());
  marsh.setTypeConfigurations(Arrays.asList(type1,type2));
  CustomSerializedObject1 obj1=new CustomSerializedObject1(10);
  PortableObject po1=marshal(obj1,marsh);
  assertEquals(20,po1.<CustomSerializedObject1>deserialize().val);
  CustomSerializedObject2 obj2=new CustomSerializedObject2(10);
  PortableObject po2=marshal(obj2,marsh);
  assertEquals(30,po2.<CustomSerializedObject2>deserialize().val);
}
