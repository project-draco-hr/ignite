{
  Boolean single0=single;
  if (single0 != null && single0) {
    if (singleNodeId.equals(nodeId)) {
      onDone(addFailedKeys(singleReq.keys(),singleReq.topologyVersion(),new ClusterTopologyCheckedException("Primary node left grid before response is received: " + nodeId)));
      return true;
    }
    return false;
  }
  GridNearAtomicUpdateRequest req=mappings.get(nodeId);
  if (req != null) {
    addFailedKeys(req.keys(),req.topologyVersion(),new ClusterTopologyCheckedException("Primary node left grid before response is received: " + nodeId));
    mappings.remove(nodeId);
    checkComplete();
    return true;
  }
  return false;
}
