{
  return dynamic ? val == null ? BinaryWriteMode.OBJECT : PortableUtils.mode(val.getClass()) : mode;
}
