{
  Ignite ignite=grid(0);
  final Collection<Integer> keys=nearKeys(ignite);
  IgniteFuture<?> fut=multithreadedAsync(new Runnable(){
    @Override public void run(){
      GridCache<Object,Object> c=cache(0);
      try {
        IgniteTx tx=c.txStart(mode,REPEATABLE_READ);
        for (        Integer key : keys)         c.put(key,"val" + key);
        if (prepare)         U.<IgniteTxEx>field(tx,"tx").prepare();
      }
 catch (      IgniteCheckedException e) {
        info("Failed to put keys to cache: " + e.getMessage());
      }
    }
  }
,1);
  fut.get();
}
