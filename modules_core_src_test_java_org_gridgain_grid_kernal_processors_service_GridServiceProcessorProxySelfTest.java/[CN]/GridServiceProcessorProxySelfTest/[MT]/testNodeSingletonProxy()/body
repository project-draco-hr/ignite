{
  String name="testNodeSingletonProxy";
  Ignite ignite=randomGrid();
  ignite.managed().deployNodeSingleton(name,new CounterServiceImpl());
  CounterService svc=ignite.managed().serviceProxy(name,CounterService.class,false);
  for (int i=0; i < 10; i++)   svc.increment();
  assertEquals(10,svc.get());
  assertEquals(10,svc.localIncrements());
  assertEquals(10,ignite.managed(ignite.cluster().forLocal()).serviceProxy(name,CounterService.class,false).localIncrements());
  for (  ClusterNode n : ignite.cluster().forRemotes().nodes()) {
    CounterService rmtSvc=ignite.managed(ignite.cluster().forNode(n)).serviceProxy(name,CounterService.class,false);
    assertEquals(0,rmtSvc.localIncrements());
  }
}
