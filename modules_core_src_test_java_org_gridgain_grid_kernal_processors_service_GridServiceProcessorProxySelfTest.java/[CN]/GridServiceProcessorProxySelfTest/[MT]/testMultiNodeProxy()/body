{
  Grid grid=randomGrid();
  int extras=3;
  startExtraNodes(extras);
  String name="testMultiNodeProxy";
  grid.services().deployNodeSingleton(name,new CounterServiceImpl()).get();
  CounterService svc=grid.services().serviceProxy(name,CounterService.class,false);
  for (int i=0; i < extras; i++) {
    svc.increment();
    stopGrid(nodeCount() + i);
  }
  assertEquals(extras,svc.get());
}
