{
  String name="testNodeSingletonRemoteStickyProxy";
  Ignite ignite=randomGrid();
  ignite.services(ignite.cluster().forRemotes()).deployNodeSingleton(name,new CounterServiceImpl());
  CounterService svc=ignite.services().serviceProxy(name,CounterService.class,true);
  for (int i=0; i < 10; i++)   svc.increment();
  assertEquals(10,svc.get());
  int total=0;
  for (  GridNode n : ignite.cluster().forRemotes().nodes()) {
    CounterService rmtSvc=ignite.services(ignite.cluster().forNode(n)).serviceProxy(name,CounterService.class,false);
    int cnt=rmtSvc.localIncrements();
    assertTrue("Invalid local increments: " + cnt,cnt == 10 || cnt == 0);
    total+=rmtSvc.localIncrements();
  }
  assertEquals(10,total);
}
