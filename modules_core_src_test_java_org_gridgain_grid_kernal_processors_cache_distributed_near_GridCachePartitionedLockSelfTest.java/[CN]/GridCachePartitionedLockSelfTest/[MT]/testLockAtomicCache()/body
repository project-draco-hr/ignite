{
  IgniteConfiguration cfg=new IgniteConfiguration();
  cfg.setGridName(getTestGridName(0));
  cfg.setClientConnectionConfiguration(null);
  cfg.setCacheConfiguration(new GridCacheConfiguration());
  final Ignite g0=G.start(cfg);
  final IgniteCache<Object,Object> cache=g0.jcache(null);
  GridTestUtils.assertThrows(log,new Callable<Object>(){
    @Override public Object call() throws Exception {
      return cache.lock(1).tryLock(Long.MAX_VALUE,TimeUnit.MILLISECONDS);
    }
  }
,CacheException.class,"Locks are not supported");
  GridTestUtils.assertThrows(log,new Callable<Object>(){
    @Override public Object call() throws Exception {
      return cache.lockAll(Collections.singleton(1)).tryLock(Long.MAX_VALUE,TimeUnit.MILLISECONDS);
    }
  }
,CacheException.class,"Locks are not supported");
}
