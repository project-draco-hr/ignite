{
  sock=connect();
  if (sock == null)   throw new ClassNotFoundException("Failed to load class, can not connect to peer node " + "[cls=" + name + ", node="+ nodeId+ ']');
  try {
    writeToSocket(sock,new TcpDiscoveryGetClassRequest(getLocalNodeId(),name));
    TcpDiscoveryGetClassResponse res=readMessage(sock,null,netTimeout);
    return res;
  }
 catch (  IOException|IgniteCheckedException e) {
    e.printStackTrace();
    throw new ClassNotFoundException("Failed to load class: " + name,e);
  }
}
