{
  TcpDiscoveryNode node;
  if (joiningNode.id().equals(nodeId))   node=joiningNode;
 else   node=ring.node(nodeId);
  ClassLoader clsLdr=exchangeClassLoader(node);
  Map<Integer,Object> data0=U.newHashMap(data.size());
  for (  Map.Entry<Integer,byte[]> entry : data.entrySet()) {
    try {
      Object compData=marsh.unmarshal(entry.getValue(),clsLdr);
      data0.put(entry.getKey(),compData);
    }
 catch (    IgniteCheckedException e) {
      U.error(log,"Failed to unmarshal discovery data for component: " + entry.getKey(),e);
    }
  }
  exchange.onExchange(joiningNode.id(),nodeId,data0);
}
