{
  guard();
  try {
    if (ids != null) {
      if (ids.isEmpty())       return Collections.emptyList();
 else       if (ids.size() == 1) {
        GridNode node=ctx.discovery().node(F.first(ids));
        return node != null ? Collections.singleton(node) : Collections.<GridNode>emptyList();
      }
 else {
        Collection<GridNode> nodes=new ArrayList<>(ids.size());
        for (        UUID id : ids) {
          GridNode node=ctx.discovery().node(id);
          if (node != null)           nodes.add(node);
        }
        return nodes;
      }
    }
 else {
      Collection<GridNode> all=ctx.discovery().nodes();
      return p != null ? F.view(all,p) : all;
    }
  }
  finally {
    unguard();
  }
}
