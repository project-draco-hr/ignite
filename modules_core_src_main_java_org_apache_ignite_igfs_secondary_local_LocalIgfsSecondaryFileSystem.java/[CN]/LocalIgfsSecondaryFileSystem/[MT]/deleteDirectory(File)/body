{
  File[] entries=dir.listFiles();
  if (entries != null) {
    for (    File entry : entries) {
      if (entry.isDirectory())       deleteDirectory(entry);
 else       if (entry.isFile()) {
        if (!entry.delete())         return false;
      }
 else       throw new UnsupportedOperationException("Symlink deletion is not yet supported: " + entry);
    }
  }
  return dir.delete();
}
