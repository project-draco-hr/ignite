{
  if (marshaller == null) {
    String marshallerName=GridTestProperties.getProperty("marshaller.class");
    if (marshallerName == null)     marshaller=new IgniteOptimizedMarshaller();
 else {
      try {
        Class<? extends GridMarshaller> cls=(Class<? extends GridMarshaller>)Class.forName(marshallerName);
        marshaller=cls.newInstance();
      }
 catch (      ClassNotFoundException|IllegalAccessException|InstantiationException e) {
        throw new GridException("Failed to create test marshaller [marshaller=" + marshallerName + ']',e);
      }
    }
  }
  return marshaller;
}
