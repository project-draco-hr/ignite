{
  GridNodeLocalMap<String,T2<AtomicLong,AtomicLong>> nodeLoc=ignite.cluster().nodeLocalMap();
  T2<AtomicLong,AtomicLong> cntrs=nodeLoc.get("cntrs");
  if (cntrs == null) {
    T2<AtomicLong,AtomicLong> other=nodeLoc.putIfAbsent("cntrs",cntrs=new T2<>(new AtomicLong(),new AtomicLong(System.currentTimeMillis())));
    if (other != null)     cntrs=other;
  }
  long cnt=cntrs.get1().incrementAndGet();
  GridNearCacheAdapter near=(GridNearCacheAdapter)((GridKernal)ignite).internalCache(cacheName);
  GridDhtCacheAdapter dht=near.dht();
  doWork();
  long start=cntrs.get2().get();
  long now=System.currentTimeMillis();
  long dur=now - start;
  if (dur > 20000 && cntrs.get2().compareAndSet(start,System.currentTimeMillis())) {
    cntrs.get1().set(0);
    long txPerSec=cnt / (dur / 1000);
    X.println("Stats [tx/sec=" + txPerSec + ", nearSize="+ near.size()+ ", dhtSize="+ dht.size()+ ']');
    return new T3<>(txPerSec,near.size(),dht.size());
  }
  return null;
}
