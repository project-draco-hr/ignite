{
  curObj=null;
  curFields=null;
  byte ref=in.readByte();
switch (ref) {
case NULL:
    return null;
case HANDLE:
  return handles.lookup(readInt());
case OBJECT:
GridOptimizedClassDescriptor desc=GridOptimizedClassResolver.readClass(this,clsLdr);
curCls=desc.describedClass();
return desc.read(this);
default :
SB msg=new SB("Unexpected error occurred during unmarshalling");
if (curCls != null) msg.a(" of an instance of the class: ").a(curCls.getName());
msg.a(". Check that all nodes are running the same version of GridGain and that all nodes have " + "GridOptimizedMarshaller configured with identical optimized classes lists, if any " + "(see setClassNames and setClassNamesPath methods). If your serialized classes implement "+ "java.io.Externalizable interface, verify that serialization logic is correct.");
throw new IOException(msg.toString());
}
}
