{
  ipFinder=new TcpDiscoveryVmIpFinder(true);
  startGrid();
  final IgniteCache<String,Integer> c=jcache();
  x.applyx(c);
  assertEquals(cache,c.size(CachePeekMode.ONHEAP));
  assertEquals(offheapSwap,c.localSize(CachePeekMode.OFFHEAP) + c.localSize(CachePeekMode.SWAP));
  info("size: " + c.size());
  info("heap: " + c.localSize(CachePeekMode.ONHEAP));
  info("offheap: " + c.localSize(CachePeekMode.OFFHEAP));
  info("swap: " + c.localSize(CachePeekMode.SWAP));
  if (offheapEmpty)   Assert.assertEquals(0,c.localSize(CachePeekMode.OFFHEAP));
 else   Assert.assertNotEquals(0,c.localSize(CachePeekMode.OFFHEAP));
  if (swapEmpty)   Assert.assertEquals(0,c.localSize(CachePeekMode.SWAP));
 else   Assert.assertNotEquals(0,c.localSize(CachePeekMode.SWAP));
  stopAllGrids();
}
