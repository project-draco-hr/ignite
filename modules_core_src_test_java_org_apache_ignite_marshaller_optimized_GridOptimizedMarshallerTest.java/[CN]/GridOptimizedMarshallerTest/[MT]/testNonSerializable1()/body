{
  GridOptimizedMarshaller marsh=new GridOptimizedMarshaller();
  marsh.setRequireSerializable(false);
  byte[] bytes=marsh.marshal(new GridTcpDiscoveryVmIpFinder());
  GridTcpDiscoveryIpFinder ipFinder=marsh.unmarshal(bytes,null);
  assertFalse(ipFinder.isShared());
  ipFinder=marsh.unmarshal(marsh.marshal(new GridTcpDiscoveryVmIpFinder(true)),null);
  assertTrue(ipFinder.isShared());
}
