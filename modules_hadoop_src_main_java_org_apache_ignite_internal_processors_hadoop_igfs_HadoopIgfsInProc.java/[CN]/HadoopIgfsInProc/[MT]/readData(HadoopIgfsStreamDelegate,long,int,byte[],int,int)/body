{
  IgfsInputStream stream=delegate.target();
  try {
    byte[] res=null;
    if (outBuf != null) {
      int outTailLen=outBuf.length - outOff;
      if (len <= outTailLen)       stream.readFully(pos,outBuf,outOff,len);
 else {
        stream.readFully(pos,outBuf,outOff,outTailLen);
        int remainderLen=len - outTailLen;
        res=new byte[remainderLen];
        stream.readFully(pos,res,0,remainderLen);
      }
    }
 else {
      res=new byte[len];
      stream.readFully(pos,res,0,len);
    }
    return new GridFinishedFuture<>(res);
  }
 catch (  IllegalStateException|IOException e) {
    HadoopIgfsStreamEventListener lsnr=lsnrs.get(delegate);
    if (lsnr != null)     lsnr.onError(e.getMessage());
    return new GridFinishedFuture<>(e);
  }
}
