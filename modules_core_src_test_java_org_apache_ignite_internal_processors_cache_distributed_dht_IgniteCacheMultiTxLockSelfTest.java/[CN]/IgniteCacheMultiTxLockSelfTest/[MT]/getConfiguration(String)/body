{
  IgniteConfiguration c=super.getConfiguration(gridName);
  TcpDiscoverySpi disco=new TcpDiscoverySpi();
  disco.setIpFinder(ipFinder);
  c.setDiscoverySpi(disco);
  CacheConfiguration ccfg=new CacheConfiguration();
  ccfg.setName(CACHE_NAME);
  ccfg.setAtomicityMode(TRANSACTIONAL);
  ccfg.setWriteSynchronizationMode(PRIMARY_SYNC);
  ccfg.setBackups(2);
  ccfg.setCacheMode(PARTITIONED);
  ccfg.setStartSize(100000);
  LruEvictionPolicy plc=new LruEvictionPolicy();
  plc.setMaxSize(100000);
  ccfg.setEvictionPolicy(plc);
  ccfg.setEvictSynchronized(true);
  c.setCacheConfiguration(ccfg);
  c.setClientMode(client);
  return c;
}
