{
  if (tx.activeCacheIds().isEmpty())   return cctx.exchange().lastTopologyFuture();
  GridCacheContext<K,V> nonLocalCtx=null;
  for (  int cacheId : tx.activeCacheIds()) {
    GridCacheContext<K,V> cacheCtx=cctx.cacheContext(cacheId);
    if (!cacheCtx.isLocal()) {
      nonLocalCtx=cacheCtx;
      break;
    }
  }
  if (nonLocalCtx == null)   return cctx.exchange().lastTopologyFuture();
  nonLocalCtx.topology().readLock();
  return nonLocalCtx.topology().topologyVersionFuture();
}
