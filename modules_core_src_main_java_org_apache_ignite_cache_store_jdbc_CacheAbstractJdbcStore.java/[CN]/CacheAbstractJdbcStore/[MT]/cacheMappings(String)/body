{
  Map<Object,EntryMapping> entryMappings=cacheMappings.get(cacheName);
  if (entryMappings != null)   return entryMappings;
  cacheMappingsLock.lock();
  try {
    entryMappings=cacheMappings.get(cacheName);
    if (entryMappings != null)     return entryMappings;
    Collection<CacheTypeMetadata> types=ignite().cache(cacheName).configuration().getTypeMetadata();
    entryMappings=U.newHashMap(types.size());
    for (    CacheTypeMetadata type : types)     entryMappings.put(keyTypeId(type.getKeyType()),new EntryMapping(cacheName,dialect,type));
    Map<String,Map<Object,EntryMapping>> mappings=new HashMap<>(cacheMappings);
    mappings.put(cacheName,entryMappings);
    prepareBuilders(cacheName,types);
    cacheMappings=mappings;
    return entryMappings;
  }
  finally {
    cacheMappingsLock.unlock();
  }
}
