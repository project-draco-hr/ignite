{
  final Ignite ignite1=ignite(1);
  assertTrue(ignite1.configuration().isClientMode());
  ignite1.createNearCache(null,new NearCacheConfiguration<>());
  GridTestUtils.runMultiThreaded(new Callable<Object>(){
    @Override public Object call() throws Exception {
      IgniteCache cache=ignite1.cache(null);
      int key=1;
      IgniteTransactions txs=ignite1.transactions();
      for (int i=0; i < 100; i++) {
        try (Transaction tx=txs.txStart(optimistic ? OPTIMISTIC : PESSIMISTIC,REPEATABLE_READ)){
          cache.get(key);
          cache.put(key,1);
          tx.commit();
        }
       }
      return null;
    }
  }
,5,"put-thread");
}
