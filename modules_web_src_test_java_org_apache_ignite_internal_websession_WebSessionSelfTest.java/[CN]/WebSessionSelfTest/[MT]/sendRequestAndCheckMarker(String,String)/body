{
  URLConnection conn=new URL("http://localhost:" + TEST_JETTY_PORT + "/ignitetest/test?marker="+ reqMarker).openConnection();
  conn.addRequestProperty("Cookie","JSESSIONID=" + sesId);
  conn.connect();
  try (BufferedReader rdr=new BufferedReader(new InputStreamReader(conn.getInputStream()))){
    sesId=rdr.readLine();
    if (!keepBinary()) {
      IgniteCache<String,HttpSession> cache=G.ignite().cache(getCacheName());
      assertNotNull(cache);
      HttpSession ses=cache.get(sesId);
      assertNotNull(ses);
      assertEquals(reqMarker,((Profile)ses.getAttribute("profile")).getMarker());
    }
 else {
      IgniteCache<String,WebSessionEntity> cache=G.ignite().cache(getCacheName());
      assertNotNull(cache);
      WebSessionEntity ses=cache.get(sesId);
      assertNotNull(ses);
      final byte[] data=ses.attributes().get("profile");
      assertNotNull(data);
      final Marshaller marshaller=G.ignite().configuration().getMarshaller();
      assertEquals(reqMarker,marshaller.<Profile>unmarshal(data,getClass().getClassLoader()).getMarker());
    }
  }
   return sesId;
}
