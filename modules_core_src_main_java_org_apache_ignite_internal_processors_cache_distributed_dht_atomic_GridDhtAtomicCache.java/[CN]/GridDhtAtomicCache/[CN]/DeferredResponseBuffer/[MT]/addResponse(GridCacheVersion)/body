{
  readLock().lock();
  boolean snd=false;
  try {
    if (guard.get())     return false;
    respVers.add(ver);
    if (respVers.size() > DEFERRED_UPDATE_RESPONSE_BUFFER_SIZE && guard.compareAndSet(false,true))     snd=true;
  }
  finally {
    readLock().unlock();
  }
  if (snd) {
    writeLock().lock();
    try {
      finish();
      ctx.time().removeTimeoutObject(this);
    }
  finally {
      writeLock().unlock();
    }
  }
  return true;
}
