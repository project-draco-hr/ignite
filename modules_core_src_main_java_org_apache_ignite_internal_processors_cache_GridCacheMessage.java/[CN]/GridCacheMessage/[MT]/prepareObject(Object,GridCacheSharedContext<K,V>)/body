{
  if (!skipPrepare && o != null) {
    GridDeploymentInfo d=ctx.deploy().globalDeploymentInfo();
    if (d != null) {
      prepare(d);
      skipPrepare=true;
    }
 else {
      Class<?> cls=U.detectClass(o);
      ctx.deploy().registerClass(cls);
      ClassLoader ldr=U.detectClassLoader(cls);
      if (ldr instanceof GridDeploymentInfo)       prepare((GridDeploymentInfo)ldr);
    }
  }
}
