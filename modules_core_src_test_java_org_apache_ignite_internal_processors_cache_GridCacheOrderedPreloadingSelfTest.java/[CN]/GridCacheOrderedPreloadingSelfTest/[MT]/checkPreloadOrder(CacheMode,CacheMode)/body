{
  firstCacheMode=first;
  secondCacheMode=second;
  Ignite g=startGrid(0);
  try {
    GridCache<Object,Object> cache=g.cache("first");
    for (int i=0; i < 1000; i++)     cache.put(i,i);
    for (int i=1; i < GRID_CNT; i++)     startGrid(i);
    for (int i=1; i < GRID_CNT; i++) {
      IgniteKernal kernal=(IgniteKernal)grid(i);
      GridFutureAdapter<?> fut1=(GridFutureAdapter<?>)kernal.internalCache(FIRST_CACHE_NAME).preloader().syncFuture();
      GridFutureAdapter<?> fut2=(GridFutureAdapter<?>)kernal.internalCache(SECOND_CACHE_NAME).preloader().syncFuture();
      fut1.get();
      fut2.get();
      assertTrue("[i=" + i + ", fut1="+ fut1+ ", fut2="+ fut2+ ']',fut1.endTime() <= fut2.endTime());
    }
  }
  finally {
    stopAllGrids();
  }
}
