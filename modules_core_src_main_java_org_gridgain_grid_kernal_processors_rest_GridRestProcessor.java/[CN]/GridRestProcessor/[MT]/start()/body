{
  if (isRestEnabled()) {
    GridClientMarshaller marsh=config().getMarshaller();
    assertParameter(marsh != null,"cfg.getClientConnectionConfiguration().getMarshaller() != null");
    if (marsh instanceof GridClientPortableMarshaller)     ((GridClientPortableMarshaller)marsh).portableContext(ctx.portable().portableContext());
    addHandler(new GridCacheCommandHandler(ctx));
    addHandler(new GridTaskCommandHandler(ctx));
    addHandler(new GridTopologyCommandHandler(ctx));
    addHandler(new GridVersionCommandHandler(ctx));
    addHandler(new GridLogCommandHandler(ctx));
    startTcpProtocol();
    startHttpProtocol();
  }
}
