{
  IgniteConfiguration cfg=super.getConfiguration(gridName);
  if (gridName.endsWith(CLIENT)) {
    cfg.setClientMode(true);
    cfg.setCommunicationSpi(new FailedTcpCommunicationSpi(true,false));
  }
 else   if (gridName.endsWith(SERVER2))   cfg.setCommunicationSpi(new FailedTcpCommunicationSpi(false,true));
 else   cfg.setCommunicationSpi(new FailedTcpCommunicationSpi(false,false));
  TcpDiscoverySpi disco=new TcpDiscoverySpi();
  disco.setIpFinder(IP_FINDER);
  cfg.setDiscoverySpi(disco);
  return cfg;
}
