{
  IgniteConfiguration cfg=super.getConfiguration(gridName);
  cfg.setCommunicationSpi(new TcpCommunicationSpi());
  cfg.setDiscoverySpi(getDiscoverySpi(cfg));
  cfg.setMetricsHistorySize(1000);
  cfg.setExecutorService(new IgniteThreadPoolExecutor());
  ((ThreadPoolExecutor)cfg.getExecutorService()).prestartAllCoreThreads();
  return cfg;
}
