{
  GridCacheTxEntry<K,V> e=txMap == null ? null : txMap.get(cacheCtx.txKey(key));
  if (e != null) {
    if (!F.isAll(e.cached().wrap(false),filter))     return e.hasPreviousValue() ? F.t(CU.<V>failed(failFast,e.previousValue())) : null;
    return e.hasPreviousValue() ? F.t(e.previousValue()) : null;
  }
  return null;
}
