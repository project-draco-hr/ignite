{
  boolean rollback=true;
  try {
    if (e != null)     throw new GridClosureException(e);
    if (!locked)     throw new GridClosureException(new GridCacheTxTimeoutException("Failed to acquire lock " + "within provided timeout for transaction [timeout=" + timeout() + ", tx="+ this+ ']'));
    IgniteFuture<T> fut=postLock();
    rollback=false;
    return fut;
  }
 catch (  GridException ex) {
    throw new GridClosureException(ex);
  }
 finally {
    if (rollback)     setRollbackOnly();
  }
}
