{
  AtomicLongArray tbl0=tbl;
  for (int i=0; i < tbl0.length(); i++) {
    long meta=tbl0.get(i);
    while (meta != 0) {
      long valPtr=value(meta);
      long lastVisited=ignoreLastVisited ? 0 : lastVisitedValue(meta);
      if (valPtr != lastVisited) {
        v.onKey(key(meta),keySize(meta));
        lastVisitedValue(meta,valPtr);
        do {
          v.onValue(valPtr + 12,valueSize(valPtr));
          valPtr=nextValue(valPtr);
        }
 while (valPtr != lastVisited);
      }
      meta=collision(meta);
    }
  }
}
