{
  Grid grid=startGrid(1);
  final GridNode node=grid.cluster().localNode();
  final GridStringLogger strLog=new GridStringLogger(false,log);
  CU.checkAttributeMismatch(strLog,"cache",node,"cacheMode","Cache mode",LOCAL,PARTITIONED,false);
  assertTrue("No expected message in log: " + strLog.toString(),strLog.toString().contains("Cache mode mismatch"));
  strLog.reset();
  GridTestUtils.assertThrows(log,new Callable<Void>(){
    /** 
 * {@inheritDoc} 
 */
    @Override public Void call() throws Exception {
      CU.checkAttributeMismatch(strLog,"cache",node,"cacheMode","Cache mode",LOCAL,PARTITIONED,true);
      return null;
    }
  }
,GridException.class,"Cache mode mismatch");
  final GridCacheConfiguration cfg1=defaultCacheConfiguration();
  cfg1.setCacheMode(LOCAL);
  final GridCacheConfiguration cfg2=defaultCacheConfiguration();
  cfg2.setCacheMode(PARTITIONED);
  CU.checkAttributeMismatch(strLog,cfg1,cfg2,node,new T2<>("cacheMode","Cache mode"),false);
  assertTrue("No expected message in log: " + strLog.toString(),strLog.toString().contains("Cache mode mismatch"));
  GridTestUtils.assertThrows(log,new Callable<Void>(){
    /** 
 * {@inheritDoc} 
 */
    @Override public Void call() throws Exception {
      CU.checkAttributeMismatch(strLog,cfg1,cfg2,node,new T2<>("cacheMode","Cache mode"),true);
      return null;
    }
  }
,GridException.class,"Cache mode mismatch");
}
