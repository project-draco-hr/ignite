{
  cacheEnabled=true;
  cacheMode=PARTITIONED;
  initCache=new C1<CacheConfiguration,Void>(){
    @Override public Void apply(    CacheConfiguration cc){
      cc.setAtomicityMode(TRANSACTIONAL);
      cc.setDistributionMode(PARTITIONED_ONLY);
      cc.setStore(new TestStore());
      return null;
    }
  }
;
  startGrid(1);
  initCache=new C1<CacheConfiguration,Void>(){
    @Override public Void apply(    CacheConfiguration cc){
      cc.setAtomicityMode(TRANSACTIONAL);
      cc.setDistributionMode(CLIENT_ONLY);
      cc.setStore(null);
      return null;
    }
  }
;
  GridTestUtils.assertThrows(log,new IgniteCallable<Object>(){
    @Override public Object call() throws Exception {
      startGrid(2);
      return null;
    }
  }
,IgniteCheckedException.class,null);
}
