{
  IgniteConfiguration cfg=super.getConfiguration(gridName);
  GridTcpDiscoverySpi discoSpi=new GridTcpDiscoverySpi();
  discoSpi.setIpFinder(IP_FINDER);
  cfg.setDiscoverySpi(discoSpi);
  if (portables) {
    PortableConfiguration portableCfg=new PortableConfiguration();
    portableCfg.setTypeConfigurations(Arrays.asList(new GridPortableTypeConfiguration(TestObject.class.getName())));
    cfg.setPortableConfiguration(portableCfg);
  }
  if (cnt < 4)   cfg.setCacheConfiguration(cacheConfiguration());
  cnt++;
  return cfg;
}
