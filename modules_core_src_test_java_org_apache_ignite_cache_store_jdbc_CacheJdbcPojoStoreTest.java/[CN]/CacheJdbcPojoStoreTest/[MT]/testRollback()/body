{
  IgniteTx tx=new DummyTx();
  ses.newSession(tx);
  OrganizationKey k1=new OrganizationKey(1);
  Organization v1=new Organization(1,"Name1","City1");
  store.write(new CacheEntryImpl<>(k1,v1));
  store.txEnd(false);
  tx=new DummyTx();
  ses.newSession(tx);
  assertNull(store.load(k1));
  OrganizationKey k2=new OrganizationKey(2);
  Organization v2=new Organization(2,"Name2","City2");
  assertNull(store.load(k2));
  Collection<Cache.Entry<?,?>> col=new ArrayList<>();
  col.add(new CacheEntryImpl<>(k2,v2));
  store.writeAll(col);
  store.txEnd(false);
  tx=new DummyTx();
  ses.newSession(tx);
  assertNull(store.load(k2));
  OrganizationKey k3=new OrganizationKey(3);
  Organization v3=new Organization(3,"Name3","City3");
  col=new ArrayList<>();
  col.add(new CacheEntryImpl<>(k3,v3));
  store.writeAll(col);
  store.txEnd(true);
  tx=new DummyTx();
  ses.newSession(tx);
  assertEquals(v3,store.load(k3));
  OrganizationKey k4=new OrganizationKey(4);
  Organization v4=new Organization(4,"Name4","City4");
  store.write(new CacheEntryImpl<>(k4,v4));
  store.txEnd(false);
  tx=new DummyTx();
  ses.newSession(tx);
  assertNull(store.load(k4));
  assertEquals(v3,store.load(k3));
  store.delete(k3);
  store.txEnd(false);
  tx=new DummyTx();
  ses.newSession(tx);
  assertEquals(v3,store.load(k3));
  store.deleteAll(Arrays.asList(new OrganizationKey(-100)));
  store.deleteAll(Arrays.asList(k3));
  store.txEnd(false);
  tx=new DummyTx();
  ses.newSession(tx);
  assertEquals(v3,store.load(k3));
}
