{
  Object obj=new SomeSerializable(null);
  ((Map)U.staticField(GridOptimizedMarshallerUtils.class,"CLS_DESC_CACHE")).clear();
  GridOptimizedClassResolver.userClasses(null,null);
  GridMarshaller marsh=new GridOptimizedMarshaller();
  int size1=marsh.marshal(obj).length;
  ((Map)U.staticField(GridOptimizedMarshallerUtils.class,"CLS_DESC_CACHE")).clear();
  GridOptimizedClassResolver.userClasses(null,null);
  GridOptimizedMarshaller marshPreregistered=new GridOptimizedMarshaller();
  File namesFile=File.createTempFile("gg-",null);
  U.writeStringToFile(namesFile,SomeSerializable.class.getName(),"UTF-8");
  marshPreregistered.setClassNamesPath(namesFile.getAbsolutePath());
  int size2=marshPreregistered.marshal(obj).length;
  assertTrue(size1 > size2);
}
