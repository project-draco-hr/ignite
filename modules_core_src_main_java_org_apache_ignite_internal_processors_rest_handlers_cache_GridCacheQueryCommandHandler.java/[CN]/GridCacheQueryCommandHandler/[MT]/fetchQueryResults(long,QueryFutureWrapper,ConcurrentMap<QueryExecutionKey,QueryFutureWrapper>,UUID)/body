{
  if (wrapper == null)   throw new IgniteCheckedException("Failed to find query future (query has been expired).");
  Collection<Object> col=wrapper.result();
  GridCacheRestResponse res=new GridCacheRestResponse();
  GridCacheClientQueryResult qryRes=new GridCacheClientQueryResult();
  if (col == null) {
    col=Collections.emptyList();
    qryRes.last(true);
    locMap.remove(new QueryExecutionKey(qryId),wrapper);
  }
  qryRes.items(col);
  qryRes.queryId(qryId);
  qryRes.nodeId(locNodeId);
  res.setResponse(qryRes);
  return res;
}
