{
  IgniteConfiguration cfg=super.getConfiguration(gridName);
  if (gridName.equals(getTestGridName(NODE_CNT - 1))) {
    cfg.setClientMode(true);
    if (!clientDiscovery())     ((TcpDiscoverySpi)cfg.getDiscoverySpi()).setForceServerMode(true);
  }
  ((TcpDiscoverySpi)cfg.getDiscoverySpi()).setIpFinder(ipFinder);
  ((TcpCommunicationSpi)cfg.getCommunicationSpi()).setSharedMemoryPort(-1);
  return cfg;
}
