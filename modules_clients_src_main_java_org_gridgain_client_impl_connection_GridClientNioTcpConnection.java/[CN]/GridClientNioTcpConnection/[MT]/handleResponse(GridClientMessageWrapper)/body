{
  lastMsgRcvTime=U.currentTimeMillis();
  TcpClientFuture fut=pendingReqs.get(reqData.requestId());
  if (fut == null) {
    log.warning("Response for an unknown request is received, ignoring. Request ID: " + reqData.requestId());
    return;
  }
  if (fut.forward()) {
    GridRouterResponse msg=new GridRouterResponse(reqData.message(),reqData.requestId(),clientId,reqData.destinationId());
    removePending(msg.requestId());
    fut.onDone(msg);
  }
 else {
    GridClientMessage msg;
    try {
      msg=marsh.unmarshal(reqData.message());
    }
 catch (    IOException e) {
      fut.onDone(new GridClientException("Failed to unmarshal message.",e));
      return;
    }
    msg.requestId(reqData.requestId());
    msg.clientId(reqData.clientId());
    msg.destinationId(reqData.destinationId());
    if (msg instanceof GridClientResponse)     handleClientResponse(fut,(GridClientResponse)msg);
 else     log.warning("Unsupported response type received: " + msg);
  }
}
