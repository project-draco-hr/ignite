{
  GridClientMessageWrapper wrapper=new GridClientMessageWrapper();
  wrapper.requestId(msg.requestId());
  wrapper.clientId(clientId);
  wrapper.destinationId(msg.destinationId());
  try {
    byte[] data=(msg instanceof GridRouterRequest) ? ((GridRouterRequest)msg).body() : marsh.marshal(msg);
    wrapper.message(data);
    wrapper.messageSize(data.length + 40);
  }
 catch (  IOException e) {
    e.printStackTrace();
  }
  return wrapper;
}
