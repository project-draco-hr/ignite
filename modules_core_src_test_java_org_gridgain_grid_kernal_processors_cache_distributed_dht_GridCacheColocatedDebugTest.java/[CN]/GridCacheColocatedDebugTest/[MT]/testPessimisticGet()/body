{
  storeEnabled=false;
  startGridsMultiThreaded(3);
  Grid g0=grid(0);
  try {
    for (int i=0; i < 100; i++)     g0.cache(null).put(i,i);
    for (int i=0; i < 100; i++) {
      try (GridCacheTx tx=g0.cache(null).txStart(PESSIMISTIC,REPEATABLE_READ)){
        Integer val=(Integer)g0.cache(null).get(i);
        assertEquals((Integer)i,val);
      }
     }
  }
  finally {
    stopAllGrids();
  }
}
