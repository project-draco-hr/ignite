{
  List<GridResourceField> fields=getFieldsFromCache(cls,annCls);
  if (fields == null) {
    fields=new ArrayList<>();
    for (Class cls0=cls; !cls0.equals(Object.class); cls0=cls0.getSuperclass()) {
      for (      Field field : cls0.getDeclaredFields()) {
        Annotation ann=field.getAnnotation(annCls);
        if (ann != null || GridResourceUtils.mayRequireResources(field))         fields.add(new GridResourceField(field,ann));
      }
    }
    cacheFields(dep,cls,annCls,fields);
  }
  return fields;
}
