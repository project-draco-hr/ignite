{
  Map<Integer,Integer> map=new HashMap<>();
  for (int i=0; i < 100; i++)   map.put(i,i);
  GridCache<Integer,Integer> c=grid(0).cache(null);
  Map<Integer,Integer> map0=c.getAll(map.keySet());
  assertTrue(map0.isEmpty());
  try (IgniteTx tx=c.txStart(txConcurrency,REPEATABLE_READ)){
    c.putAll(map);
    tx.commit();
  }
   map0=c.getAll(map.keySet());
  assertEquals(map,map0);
  for (  Map.Entry<Integer,Integer> e : map.entrySet())   checkValue(e.getKey(),e.getValue());
  try (IgniteTx tx=c.txStart(txConcurrency,REPEATABLE_READ)){
    c.removeAll(map.keySet());
    tx.commit();
  }
   map0=c.getAll(map.keySet());
  assertTrue(map0.isEmpty());
  for (  Map.Entry<Integer,Integer> e : map.entrySet())   checkValue(e.getKey(),null);
}
