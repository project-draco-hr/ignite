{
  IgniteCache<Integer,Integer> c=grid(0).cache(null);
  checkValue(key,null);
  assertNull(c.getAndPut(key,key));
  checkValue(key,key);
  assertEquals(key,c.getAndRemove(key));
  checkValue(key,null);
  if (atomicityMode() == TRANSACTIONAL) {
    checkPutGetRemoveTx(key,PESSIMISTIC);
    checkPutGetRemoveTx(key,OPTIMISTIC);
  }
}
