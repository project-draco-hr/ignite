{
  IgniteCache<Integer,byte[]> c=grid(0).cache(null);
  checkValue(key,null);
  byte[] val=new byte[]{key.byteValue()};
  assertNull(c.getAndPut(key,val));
  checkValue(key,val);
  Assert.assertArrayEquals(val,c.getAndRemove(key));
  checkValue(key,null);
  if (atomicityMode() == TRANSACTIONAL) {
    checkPutGetRemoveTxByteArray(key,PESSIMISTIC);
    checkPutGetRemoveTxByteArray(key,OPTIMISTIC);
  }
}
