{
  if (includeCache) {
    boolean node=nodeMetricsAvailable(client);
    boolean cache=client.data(CACHE_NAME).cachedMetrics() != null;
    assertTrue("Inconsistency between cache and node metrics cache.",node == cache);
    return node && cache;
  }
 else {
    return nodeMetricsAvailable(client);
  }
}
