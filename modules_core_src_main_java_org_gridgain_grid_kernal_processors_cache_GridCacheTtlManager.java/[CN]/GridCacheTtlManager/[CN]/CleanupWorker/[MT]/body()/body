{
  while (!isCancelled()) {
    long now=U.currentTimeMillis();
    GridCacheVersion obsoleteVer=null;
    for (Iterator<EntryWrapper<K,V>> it=pendingEntries.iterator(); it.hasNext(); ) {
      EntryWrapper<K,V> wrapper=it.next();
      if (wrapper.expireTime <= now) {
        if (log.isDebugEnabled())         log.debug("Trying to remove expired entry from cache: " + wrapper);
        if (obsoleteVer == null)         obsoleteVer=cctx.versions().next();
        System.out.println("Removing entry: " + wrapper.entry);
        if (wrapper.entry.onTtlExpired(obsoleteVer))         wrapper.entry.context().cache().removeEntry(wrapper.entry);
        it.remove();
      }
 else       break;
    }
synchronized (mux) {
      while (true) {
        EntryWrapper<K,V> first=pendingEntries.firstx();
        if (first != null) {
          long waitTime=first.expireTime - U.currentTimeMillis();
          if (waitTime > 0)           mux.wait(waitTime);
 else           break;
        }
 else         mux.wait(5000);
      }
    }
  }
}
