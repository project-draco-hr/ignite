{
  create(ggfs,paths(DIR,SUBDIR),null);
  GridTestUtils.assertThrows(log,new Callable<Object>(){
    @Override public Object call() throws Exception {
      GridGgfsOutputStream os=null;
      try {
        os=ggfs.create(FILE,true);
        IgniteUuid id=ggfs.context().meta().fileId(FILE);
        ggfs.delete(SUBDIR,true);
        while (ggfs.context().meta().exists(id))         U.sleep(100);
        os.close();
      }
  finally {
        U.closeQuiet(os);
      }
      return null;
    }
  }
,IOException.class,"File was concurrently deleted: " + FILE);
}
