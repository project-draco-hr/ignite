{
  IgniteConfiguration cfg=super.getConfiguration(gridName);
  ((TcpDiscoverySpi)cfg.getDiscoverySpi()).setIpFinder(IP_FINDER);
  CacheKeyConfiguration keyCfg=new CacheKeyConfiguration();
  keyCfg.setTypeName(TestKeyWithAffinity.class.getName());
  keyCfg.setAffinityKeyFieldName("affKey");
  cfg.setCacheKeyConfiguration(keyCfg);
  cfg.setClientMode(client);
  return cfg;
}
