{
  try {
    Object val=cache.get(key);
    if (val != null && type != null && !type.isInstance(val))     throw new IllegalStateException("Cached value is not of required type [cacheName=" + cache.name() + ", key="+ key+ ", val="+ val+ ", requiredType="+ type+ ']');
    return (T)val;
  }
 catch (  IgniteCheckedException e) {
    throw new IgniteException("Failed to get value from cache [cacheName=" + cache.name() + ", key="+ key+ ']',e);
  }
}
