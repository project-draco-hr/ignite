{
  int handle=writer.handle(obj);
  if (handle >= 0) {
    writer.doWriteByte(HANDLE);
    writer.doWriteInt(handle);
    return false;
  }
 else {
    writer.doWriteByte(OBJ);
    writer.doWriteBoolean(userType);
    writer.doWriteInt(typeId);
    writer.doWriteInt(obj.hashCode());
    writer.reserve(4);
    writer.doWriteInt(18);
    return true;
  }
}
