{
  if (!offheapEnabled && !swapEnabled)   return;
  checkIteratorQueue();
  final GridCacheQueryManager<K,V> qryMgr=cctx.queries();
  CI1<byte[]> c=qryMgr == null ? null : new CI1<byte[]>(){
    @Override public void apply(    byte[] rmv){
      if (rmv == null)       return;
      try {
        GridCacheSwapEntry<V> entry=swapEntry(unmarshalSwapEntry(rmv));
        if (entry == null)         return;
        qryMgr.onUnswap(key,entry.value(),entry.valueBytes());
      }
 catch (      GridException e) {
        throw new GridRuntimeException(e);
      }
    }
  }
;
  int part=cctx.affinity().partition(key);
  if (offheapEnabled) {
    byte[] val=offheap.remove(spaceName,part,key,keyBytes);
    if (val != null) {
      if (c != null)       c.apply(val);
      return;
    }
  }
  if (swapEnabled)   swapMgr.remove(spaceName,new GridSwapKey(key,part,keyBytes),c,cctx.deploy().globalLoader());
}
