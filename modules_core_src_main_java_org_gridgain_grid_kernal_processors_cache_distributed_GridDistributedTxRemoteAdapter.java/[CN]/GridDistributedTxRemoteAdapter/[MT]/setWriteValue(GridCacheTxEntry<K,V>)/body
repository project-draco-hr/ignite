{
  checkInternal(e.txKey());
  GridCacheTxEntry<K,V> entry=writeMap.get(e.txKey());
  if (entry == null) {
    GridCacheTxEntry<K,V> rmv=readMap.remove(e.txKey());
    if (rmv != null) {
      e.cached(rmv.cached(),rmv.keyBytes());
      writeMap.put(e.txKey(),e);
    }
 else {
      e.cached(e.context().cache().entryEx(e.key()),null);
      writeMap.put(e.txKey(),e);
    }
  }
 else {
    entry.value(e.value(),e.hasWriteValue(),e.hasReadValue());
    entry.transformClosures(e.transformClosures());
    entry.valueBytes(e.valueBytes());
    entry.op(e.op());
    entry.ttl(e.ttl());
    entry.explicitVersion(e.explicitVersion());
    entry.groupLockEntry(e.groupLockEntry());
    entry.drVersion(e.drVersion());
    entry.drExpireTime(e.drExpireTime());
  }
  addExplicit(e);
  return true;
}
