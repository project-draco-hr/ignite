{
  try {
    GridClient authClient=client(PASSCODE);
    authClient.data(CACHE_NAME).put("1",1);
    try {
      GridClient brokenClient=client("WRONG PASSCODE");
      brokenClient.data(CACHE_NAME).put("1",1);
    }
 catch (    GridClientDisconnectedException e) {
      assertTrue(X.hasCause(e,GridClientAuthenticationException.class));
    }
    assertEquals(1,authClient.data(CACHE_NAME).get("1"));
  }
  finally {
    GridClientFactory.stopAll();
  }
}
