{
  enterBusy();
  try {
    A.notNull(p,"p");
    if (mode(p) == PROXY)     secondaryFs.setPermission(toSecondary(p),perm);
 else {
      try {
        if (rmtClient.update(convert(p),permission(perm)).get() == null)         throw new IOException("Failed to set file permission (file not found?)" + " [path=" + p + ", perm="+ perm+ ']');
      }
 catch (      GridException e) {
        throw cast(e);
      }
    }
  }
  finally {
    leaveBusy();
  }
}
