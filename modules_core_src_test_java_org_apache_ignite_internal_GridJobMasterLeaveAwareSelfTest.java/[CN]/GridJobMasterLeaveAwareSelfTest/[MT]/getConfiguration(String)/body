{
  IgniteConfiguration cfg=super.getConfiguration(gridName);
  TcpDiscoverySpi discoSpi=new TcpDiscoverySpi();
  discoSpi.setIpFinder(ipFinder);
  cfg.setDiscoverySpi(discoSpi);
  cfg.setCommunicationSpi(new CommunicationSpi());
  cfg.setMarshaller(new IgniteOptimizedMarshaller(false));
  CacheConfiguration ccfg=defaultCacheConfiguration();
  ccfg.setCacheMode(PARTITIONED);
  cfg.setCacheConfiguration(ccfg);
  return cfg;
}
