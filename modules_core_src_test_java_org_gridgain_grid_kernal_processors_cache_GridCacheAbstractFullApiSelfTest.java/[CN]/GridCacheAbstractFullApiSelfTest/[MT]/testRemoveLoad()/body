{
  int cnt=10;
  Collection<String> keys=new ArrayList<>();
  for (int i=0; i < cnt; i++)   keys.add(String.valueOf(i));
  cache().removeAll(keys);
  for (  String key : keys)   putToStore(key,Integer.parseInt(key));
  for (int g=0; g < gridCount(); g++)   grid(g).cache(null).loadCache(null,0);
  for (int g=0; g < gridCount(); g++) {
    for (int i=0; i < cnt; i++) {
      String key=String.valueOf(i);
      if (cache().affinity().mapKeyToPrimaryAndBackups(key).contains(grid(g).localNode())) {
        assertEquals((Integer)i,cache(g).peek(key));
      }
 else       assertNull(cache(g).peek(key));
    }
  }
}
