{
  IgniteCache<Object,Object> cache=startGrid(0).cache(null);
  for (int i=0; i < KEY_CNT; i++) {
    cache.put(String.valueOf(i),String.valueOf(i));
    cache.put(new TestAffinityKey(i,String.valueOf(i)),i);
  }
  assertEquals(1,cache.get(new TestAffinityKey(1,"1")));
  startGrid(1);
  for (int i=0; i < KEY_CNT; i++)   grid(i % 2).compute().affinityRun((String)null,new TestAffinityKey(1,"1"),new NoopClosure());
}
