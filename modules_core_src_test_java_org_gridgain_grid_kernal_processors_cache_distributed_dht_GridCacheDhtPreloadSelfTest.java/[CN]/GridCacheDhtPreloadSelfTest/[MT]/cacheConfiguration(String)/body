{
  GridCacheConfiguration cacheCfg=defaultCacheConfiguration();
  cacheCfg.setCacheMode(PARTITIONED);
  cacheCfg.setPreloadBatchSize(preloadBatchSize);
  cacheCfg.setWriteSynchronizationMode(FULL_SYNC);
  cacheCfg.setPreloadMode(preloadMode);
  cacheCfg.setAffinity(new GridCacheConsistentHashAffinityFunction(false,partitions));
  cacheCfg.setBackups(backups);
  return cacheCfg;
}
