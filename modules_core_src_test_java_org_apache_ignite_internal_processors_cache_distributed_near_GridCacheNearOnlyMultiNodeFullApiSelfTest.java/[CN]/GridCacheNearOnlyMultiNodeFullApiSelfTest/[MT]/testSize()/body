{
  Cache<String,Integer> nearCache=cache();
  int size=10;
  Map<String,Integer> map=U.newLinkedHashMap(size);
  for (int i=0; i < size; i++)   map.put("key" + i,i);
  nearCache.putAll(map);
  affinityNodes();
  checkKeySize(map.keySet());
  checkSize(map.keySet());
  assertEquals("Primary keys found in near-only cache [" + "primaryEntries=" + nearCache.primaryEntrySet() + ", dht="+ dht(nearIdx).allEntries()+ "]",0,nearCache.primarySize());
  int fullCacheSize=0;
  for (int i=0; i < gridCount(); i++)   fullCacheSize+=cache(i).primarySize();
  assertEquals("Invalid cache size",10,fullCacheSize);
}
