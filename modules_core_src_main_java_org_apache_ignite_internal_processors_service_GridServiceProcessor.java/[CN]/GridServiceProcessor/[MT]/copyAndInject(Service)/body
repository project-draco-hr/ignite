{
  Marshaller m=ctx.config().getMarshaller();
  try {
    byte[] bytes=m.marshal(svc);
    Service cp=m.unmarshal(bytes,U.resolveClassLoader(svc.getClass().getClassLoader(),ctx.config()));
    ctx.resource().inject(cp);
    return cp;
  }
 catch (  IgniteCheckedException e) {
    log.error("Failed to copy service (will reuse same instance): " + svc.getClass(),e);
    return svc;
  }
}
