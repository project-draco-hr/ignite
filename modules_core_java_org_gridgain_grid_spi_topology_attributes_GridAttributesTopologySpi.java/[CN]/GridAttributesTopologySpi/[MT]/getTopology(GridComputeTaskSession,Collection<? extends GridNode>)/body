{
  Collection<GridNode> top=new ArrayList<>(grid.size());
  for (  GridNode node : grid) {
    Map<String,Object> nodeAttrs=node.attributes();
    if (attrs != null && nodeAttrs != null) {
      if (!U.containsAll(nodeAttrs,attrs))       continue;
    }
 else     if (nodeAttrs == null && attrs != null)     continue;
    top.add(node);
    if (log.isDebugEnabled())     log.debug("Included node into topology: " + node);
  }
  return top;
}
