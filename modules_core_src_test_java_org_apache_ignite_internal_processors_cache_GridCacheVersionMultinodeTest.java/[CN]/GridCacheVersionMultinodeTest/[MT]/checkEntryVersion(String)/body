{
  GridCacheVersion ver=null;
  boolean verified=false;
  for (int i=0; i < gridCount(); i++) {
    IgniteKernal grid=(IgniteKernal)grid(i);
    GridCacheAdapter<Object,Object> cache=grid.context().cache().internalCache();
    if (cache.affinity().isPrimaryOrBackup(grid.localNode(),key)) {
      GridCacheEntryEx<Object,Object> e=cache.peekEx(key);
      assertNotNull(e);
      if (ver != null) {
        assertEquals("Non-equal versions for key " + key,ver,e.version());
        verified=true;
      }
 else       ver=e.version();
    }
  }
  assertTrue(verified);
}
