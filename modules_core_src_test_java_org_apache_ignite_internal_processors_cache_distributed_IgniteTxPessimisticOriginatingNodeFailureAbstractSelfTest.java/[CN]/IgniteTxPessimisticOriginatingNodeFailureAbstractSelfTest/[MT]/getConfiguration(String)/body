{
  IgniteConfiguration cfg=super.getConfiguration(gridName);
  cfg.setCommunicationSpi(new TcpCommunicationSpi(){
    @Override public void sendMessage(    ClusterNode node,    Message msg,    IgniteInClosure<IgniteException> ackClosure) throws IgniteSpiException {
      if (getSpiContext().localNode().id().equals(failingNodeId)) {
        if (ignoredMessage((GridIoMessage)msg) && ignoreMsgNodeIds != null) {
          for (          UUID ignored : ignoreMsgNodeIds) {
            if (node.id().equals(ignored))             return;
          }
        }
      }
      super.sendMessage(node,msg,ackClosure);
    }
  }
);
  cfg.getTransactionConfiguration().setDefaultTxConcurrency(PESSIMISTIC);
  return cfg;
}
