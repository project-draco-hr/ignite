{
  IgniteConfiguration cfg=super.getConfiguration(gridName);
  cfg.setIndexingSpi(indexing(null,true),indexing(SPI_NO_PRIMITIVES,false),indexing(SPI_COMPLEX_KEYS,false));
  cfg.setMarshaller(new IgniteOptimizedMarshaller(false));
  if (hasCache)   cfg.setCacheConfiguration(cache(null,null),cache(CACHE,null),cache(EMPTY_CACHE,null),cache(CACHE_NO_PRIMITIVES,SPI_NO_PRIMITIVES),cache(CACHE_COMPLEX_KEYS,SPI_COMPLEX_KEYS));
 else   cfg.setCacheConfiguration();
  cfg.setDiscoverySpi(discovery());
  return cfg;
}
