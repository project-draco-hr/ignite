{
  CacheConfiguration cache=defaultCacheConfiguration();
  cache.setName(name);
  cache.setCacheMode(cacheMode());
  cache.setAtomicityMode(atomicityMode());
  cache.setWriteSynchronizationMode(GridCacheWriteSynchronizationMode.FULL_SYNC);
  cache.setPreloadMode(SYNC);
  GridCacheQueryConfiguration qcfg=new GridCacheQueryConfiguration();
  qcfg.setIndexPrimitiveKey(true);
  qcfg.setIndexPrimitiveValue(true);
  qcfg.setIndexFixedTyping(true);
  cache.setQueryConfiguration(qcfg);
  if (cacheMode() == PARTITIONED)   cache.setBackups(1);
  return cache;
}
