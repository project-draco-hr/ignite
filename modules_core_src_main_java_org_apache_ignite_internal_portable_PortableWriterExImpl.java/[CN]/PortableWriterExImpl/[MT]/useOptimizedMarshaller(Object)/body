{
  Class<?> cls=obj.getClass();
  Boolean use=useOptMarshCache.get(cls);
  if (use != null)   return use;
  if (ctx.isPredefinedClass(cls))   use=false;
 else {
    try {
      Method writeObj=cls.getDeclaredMethod("writeObject",ObjectOutputStream.class);
      Method readObj=cls.getDeclaredMethod("readObject",ObjectInputStream.class);
      if (!Modifier.isStatic(writeObj.getModifiers()) && !Modifier.isStatic(readObj.getModifiers()) && writeObj.getReturnType() == void.class && readObj.getReturnType() == void.class)       use=true;
 else       use=false;
    }
 catch (    NoSuchMethodException e) {
      use=false;
    }
  }
  useOptMarshCache.putIfAbsent(cls,use);
  return use;
}
