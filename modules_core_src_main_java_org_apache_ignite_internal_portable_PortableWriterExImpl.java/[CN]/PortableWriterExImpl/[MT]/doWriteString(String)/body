{
  if (val == null)   doWriteByte(NULL);
 else {
    doWriteByte(STRING);
    if (ctx.isConvertString()) {
      doWriteBoolean(true);
      byte[] strArr=val.getBytes(UTF_8);
      doWriteInt(strArr.length);
      wCtx.out.writeByteArray(strArr);
    }
 else {
      doWriteBoolean(false);
      char[] strArr=val.toCharArray();
      doWriteInt(strArr.length);
      wCtx.out.writeCharArray(strArr);
    }
  }
}
