{
  IgniteConfiguration cfg=super.getConfiguration(gridName);
  cfg.setMarshaller(new IgniteOptimizedMarshaller(false));
  GridTcpDiscoverySpi disco=new GridTcpDiscoverySpi();
  disco.setIpFinder(ipFinder);
  cfg.setDiscoverySpi(disco);
  cfg.setSwapSpaceSpi(new GridFileSwapSpaceSpi());
  cfg.setCacheConfiguration(cacheConfiguration(ATOMIC_CACHE_NAME,ATOMIC),cacheConfiguration(TRANSACTIONAL_CACHE_NAME,TRANSACTIONAL));
  if (portableEnabled()) {
    PortableConfiguration pCfg=new PortableConfiguration();
    pCfg.setClassNames(Arrays.asList(Key.class.getName(),Person.class.getName()));
    cfg.setPortableConfiguration(pCfg);
  }
  return cfg;
}
