{
  GridFutureAdapter<String> fut=new GridFutureAdapter<>();
  fut.onDone();
  assertNull(fut.get());
  fut=new GridFutureAdapter<>();
  fut.onDone("test");
  assertEquals("test",fut.get());
  fut=new GridFutureAdapter<>();
  fut.onDone(new GridException("TestMessage"));
  final GridFutureAdapter<String> callFut1=fut;
  GridTestUtils.assertThrows(log,new Callable<Object>(){
    @Override public Object call() throws Exception {
      return callFut1.get();
    }
  }
,GridException.class,"TestMessage");
  fut=new GridFutureAdapter<>();
  fut.onDone("test",new GridException("TestMessage"));
  final GridFutureAdapter<String> callFut2=fut;
  GridTestUtils.assertThrows(log,new Callable<Object>(){
    @Override public Object call() throws Exception {
      return callFut2.get();
    }
  }
,GridException.class,"TestMessage");
  fut=new GridFutureAdapter<>();
  fut.onDone("test");
  fut.onCancelled();
  assertEquals("test",fut.get());
}
