{
  kernalGateway.readLock();
  try {
    Cache<K,V> cache=getCache0(cacheName);
    if (cache != null) {
      if (!keyType.isAssignableFrom(cache.getConfiguration(Configuration.class).getKeyType()))       throw new ClassCastException();
      if (!valType.isAssignableFrom(cache.getConfiguration(Configuration.class).getValueType()))       throw new ClassCastException();
    }
    return cache;
  }
  finally {
    kernalGateway.readUnlock();
  }
}
