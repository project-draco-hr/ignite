{
  GridCache<Integer,String> cache=cache(0);
  String val=Integer.toString(key);
  cache.put(key,val);
  assertEquals(val,dht(0).peek(key));
  assertEquals(val,dht(1).peek(key));
  assertNull(near(0).peekNearOnly(key));
  assertNull(near(1).peekNearOnly(key));
  GridCacheTx tx=cache.txStart(PESSIMISTIC,REPEATABLE_READ);
  try {
    assertEquals(val,cache.get(key));
    assertTrue(cache.removex(key));
    tx.commit();
  }
  finally {
    tx.close();
  }
  assertNull(dht(0).peek(key));
  assertNull(dht(1).peek(key));
  assertNull(near(0).peekNearOnly(key));
  assertNull(near(1).peekNearOnly(key));
}
