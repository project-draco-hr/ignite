{
  if (f instanceof FairAffinityFunction) {
    out.writeByte((byte)1);
    FairAffinityFunction f0=(FairAffinityFunction)f;
    out.writeInt(f0.getPartitions());
    out.writeBoolean(f0.isExcludeNeighbors());
  }
 else   if (f instanceof RendezvousAffinityFunction) {
    out.writeByte((byte)2);
    RendezvousAffinityFunction f0=(RendezvousAffinityFunction)f;
    out.writeInt(f0.getPartitions());
    out.writeBoolean(f0.isExcludeNeighbors());
  }
 else   if (f instanceof PlatformAffinityFunction) {
    out.writeByte((byte)3);
    PlatformAffinityFunction f0=(PlatformAffinityFunction)f;
    out.writeObject(f0.getUserFunc());
    out.writeInt(f.partitions());
  }
 else {
    out.writeByte((byte)0);
  }
}
