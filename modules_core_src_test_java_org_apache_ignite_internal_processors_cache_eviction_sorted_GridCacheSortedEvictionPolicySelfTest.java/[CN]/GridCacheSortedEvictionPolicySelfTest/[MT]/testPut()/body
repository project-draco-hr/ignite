{
  mode=LOCAL;
  syncCommit=true;
  plcMax=100;
  Ignite ignite=startGrid();
  try {
    IgniteCache<Object,Object> cache=ignite.cache(null);
    int cnt=500;
    int min=Integer.MAX_VALUE;
    int minIdx=0;
    for (int i=0; i < cnt; i++) {
      cache.put(i,i);
      int cacheSize=cache.size();
      if (i > plcMax && cacheSize < min) {
        min=cacheSize;
        minIdx=i;
      }
    }
    assertTrue("Min cache size is too small: " + min,min >= plcMax);
    info("Min cache size [min=" + min + ", idx="+ minIdx+ ']');
    info("Current cache size " + cache.size());
    info("Current cache key size " + cache.size());
    min=Integer.MAX_VALUE;
    minIdx=0;
    for (int i=cnt; --i > cnt - plcMax; ) {
      cache.get(i);
      int cacheSize=cache.size();
      if (cacheSize < min) {
        min=cacheSize;
        minIdx=i;
      }
    }
    info("----");
    info("Min cache size [min=" + min + ", idx="+ minIdx+ ']');
    info("Current cache size " + cache.size());
    info("Current cache key size " + cache.size());
    assertTrue("Min cache size is too small: " + min,min >= plcMax);
  }
  finally {
    stopAllGrids();
  }
}
