{
  final List<IgniteEvent> evtList=new ArrayList<>();
  final int evtsCnt=6 + 1 + 1;
  final CountDownLatch latch=new CountDownLatch(evtsCnt);
  grid(1).events().localListen(lsnr=new IgnitePredicate<IgniteEvent>(){
    @Override public boolean apply(    IgniteEvent evt){
      log.info("Received event [evt=" + evt + ']');
      evtList.add(evt);
      latch.countDown();
      return true;
    }
  }
,EVTS_GGFS);
  IgniteFsPath dir=new IgniteFsPath("/dir1/dir2/dir3");
  IgniteFsPath file=new IgniteFsPath(dir,"file1");
  ggfs.create(file,true).close();
  IgniteFsPath mvFile=new IgniteFsPath(dir,"mvFile1");
  ggfs.rename(file,mvFile);
  assertTrue(ggfs.delete(dir.parent(),true));
  assertTrue(latch.await(10,TimeUnit.SECONDS));
  assertEquals(evtsCnt,evtList.size());
  IgniteFsEvent evt=(IgniteFsEvent)evtList.get(0);
  assertEquals(EVT_GGFS_DIR_CREATED,evt.type());
  assertEquals(new IgniteFsPath("/dir1"),evt.path());
  assertTrue(evt.isDirectory());
  evt=(IgniteFsEvent)evtList.get(1);
  assertEquals(EVT_GGFS_DIR_CREATED,evt.type());
  assertEquals(new IgniteFsPath("/dir1/dir2"),evt.path());
  evt=(IgniteFsEvent)evtList.get(2);
  assertEquals(EVT_GGFS_DIR_CREATED,evt.type());
  assertEquals(new IgniteFsPath("/dir1/dir2/dir3"),evt.path());
  evt=(IgniteFsEvent)evtList.get(3);
  assertEquals(EVT_GGFS_FILE_CREATED,evt.type());
  assertEquals(new IgniteFsPath("/dir1/dir2/dir3/file1"),evt.path());
  assertFalse(evt.isDirectory());
  evt=(IgniteFsEvent)evtList.get(4);
  assertEquals(EVT_GGFS_FILE_OPENED_WRITE,evt.type());
  assertEquals(new IgniteFsPath("/dir1/dir2/dir3/file1"),evt.path());
  evt=(IgniteFsEvent)evtList.get(5);
  assertEquals(EVT_GGFS_FILE_CLOSED_WRITE,evt.type());
  assertEquals(new IgniteFsPath("/dir1/dir2/dir3/file1"),evt.path());
  assertEquals(0,evt.dataSize());
  evt=(IgniteFsEvent)evtList.get(6);
  assertEquals(EVT_GGFS_FILE_RENAMED,evt.type());
  assertEquals(new IgniteFsPath("/dir1/dir2/dir3/file1"),evt.path());
  assertEquals(new IgniteFsPath("/dir1/dir2/dir3/mvFile1"),evt.newPath());
  evt=(IgniteFsEvent)evtList.get(7);
  assertEquals(EVT_GGFS_DIR_DELETED,evt.type());
  assertEquals(new IgniteFsPath("/dir1/dir2"),evt.path());
}
