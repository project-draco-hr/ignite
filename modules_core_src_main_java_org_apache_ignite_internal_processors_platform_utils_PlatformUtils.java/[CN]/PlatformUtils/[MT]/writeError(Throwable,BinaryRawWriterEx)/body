{
  writer.writeObjectDetached(ex.getClass().getName());
  writer.writeObjectDetached(ex.getMessage());
  writer.writeObjectDetached(X.getFullStackTrace(ex));
  PlatformNativeException nativeCause=X.cause(ex,PlatformNativeException.class);
  if (nativeCause != null) {
    writer.writeBoolean(true);
    writer.writeObjectDetached(nativeCause.cause());
  }
 else   writer.writeBoolean(false);
}
