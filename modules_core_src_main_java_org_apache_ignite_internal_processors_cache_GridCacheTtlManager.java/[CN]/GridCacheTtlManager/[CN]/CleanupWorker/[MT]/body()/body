{
  while (!isCancelled()) {
    expire();
    long waitTime;
    while (true) {
      long curTime=U.currentTimeMillis();
      GridCacheTtlManager.EntryWrapper first=pendingEntries.firstx();
      if (first == null) {
        waitTime=500;
        nextExpireTime=curTime + 500;
      }
 else {
        long expireTime=first.expireTime;
        waitTime=expireTime - curTime;
        nextExpireTime=expireTime;
      }
synchronized (mux) {
        if (pendingEntries.firstx() == first) {
          if (waitTime > 0)           mux.wait(waitTime);
          break;
        }
      }
    }
  }
}
