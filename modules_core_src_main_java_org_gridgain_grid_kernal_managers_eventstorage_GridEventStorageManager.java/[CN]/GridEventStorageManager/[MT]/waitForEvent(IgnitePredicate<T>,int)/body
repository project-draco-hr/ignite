{
  final GridFutureAdapter<T> fut=new GridFutureAdapter<>(ctx);
  addLocalEventListener(new GridLocalEventListener(){
    @Override public void onEvent(    IgniteEvent evt){
      if (p == null || p.apply((T)evt)) {
        fut.onDone((T)evt);
        removeLocalEventListener(this);
      }
    }
  }
,F.isEmpty(types) ? GridEventType.EVTS_ALL : types);
  return fut;
}
