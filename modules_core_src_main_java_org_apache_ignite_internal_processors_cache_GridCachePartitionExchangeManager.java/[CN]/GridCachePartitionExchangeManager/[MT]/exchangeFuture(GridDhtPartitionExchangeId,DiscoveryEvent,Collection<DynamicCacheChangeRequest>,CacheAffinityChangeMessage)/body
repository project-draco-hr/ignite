{
  GridDhtPartitionsExchangeFuture fut;
  GridDhtPartitionsExchangeFuture old=exchFuts.addx(fut=new GridDhtPartitionsExchangeFuture(cctx,busyLock,exchId,reqs,affChangeMsg));
  if (old != null) {
    fut=old;
    if (reqs != null)     fut.cacheChangeRequests(reqs);
    if (affChangeMsg != null)     fut.affinityChangeMessage(affChangeMsg);
  }
  if (discoEvt != null)   fut.onEvent(exchId,discoEvt);
  if (stopErr != null)   fut.onDone(stopErr);
  return fut;
}
