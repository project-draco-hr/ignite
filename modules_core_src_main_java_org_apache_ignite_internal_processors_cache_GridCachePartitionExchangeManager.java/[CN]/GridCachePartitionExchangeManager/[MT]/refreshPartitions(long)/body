{
  long last=lastRefresh.get();
  long now=U.currentTimeMillis();
  if (last != -1 && now - last >= timeout && lastRefresh.compareAndSet(last,now)) {
    if (log.isDebugEnabled())     log.debug("Refreshing partitions [last=" + last + ", now="+ now+ ", delta="+ (now - last)+ ", timeout="+ timeout+ ", lastRefresh="+ lastRefresh+ ']');
    refreshPartitions();
  }
 else   if (log.isDebugEnabled())   log.debug("Partitions were not refreshed [last=" + last + ", now="+ now+ ", delta="+ (now - last)+ ", timeout="+ timeout+ ", lastRefresh="+ lastRefresh+ ']');
}
