{
  if (clsById.putIfAbsent(id,F.t(cls,false)) == null) {
    U.debug("REGISTER: " + cls.getName());
    try {
      if (cache == null)       U.awaitQuiet(latch);
      String old=cache.putIfAbsent(id,cls.getName());
      if (old != null && !old.equals(cls.getName()))       throw new IgniteException("Type ID collision occurred in OptimizedMarshaller. Use " + "OptimizedMarshallerIdMapper to resolve it [id=" + id + ", clsName1="+ cls.getName()+ "clsName2="+ old+ ']');
    }
 catch (    IgniteCheckedException e) {
      throw U.convertException(e);
    }
  }
}
