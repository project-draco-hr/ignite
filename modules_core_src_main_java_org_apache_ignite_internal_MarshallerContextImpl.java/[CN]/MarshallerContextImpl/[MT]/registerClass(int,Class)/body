{
  if (!clsNameById.containsKey(id)) {
    try {
      U.debug("REG: " + cls.getName());
      if (cache == null)       U.awaitQuiet(latch);
      String old=cache.putIfAbsent(id,cls.getName());
      if (old != null && !old.equals(cls.getName()))       throw new IgniteException("Type ID collision occurred in OptimizedMarshaller. Use " + "OptimizedMarshallerIdMapper to resolve it [id=" + id + ", clsName1="+ cls.getName()+ "clsName2="+ old+ ']');
      clsNameById.putIfAbsent(id,cls.getName());
    }
 catch (    IgniteCheckedException e) {
      throw U.convertException(e);
    }
  }
}
