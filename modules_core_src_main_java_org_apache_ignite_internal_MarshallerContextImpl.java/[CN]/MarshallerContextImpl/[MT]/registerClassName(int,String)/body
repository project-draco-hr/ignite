{
  GridCacheAdapter<Integer,String> cache0=cache;
  if (cache0 == null)   return false;
  String old;
  try {
    old=cache0.tryPutIfAbsent(id,clsName);
    if (old != null && !old.equals(clsName)) {
      U.warn(log,"Type ID collision occurred in marshaller (this can cause performance degradation). " + "Use marshaller configuration to resolve it [id=" + id + ", clsName1="+ clsName+ "clsName2="+ old+ ']');
      return false;
    }
    failedCnt=0;
    return true;
  }
 catch (  CachePartialUpdateCheckedException|GridCacheTryPutFailedException e) {
    if (failedCnt++ >= 10)     U.warn(log,e,"Marshaller failed to register class for more than 10 times " + "(this can cause performance degradation).");
    return false;
  }
}
