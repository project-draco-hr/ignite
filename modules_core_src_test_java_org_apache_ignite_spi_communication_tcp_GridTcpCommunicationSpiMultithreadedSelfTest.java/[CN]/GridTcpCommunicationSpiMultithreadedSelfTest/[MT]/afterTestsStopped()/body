{
  for (  CommunicationSpi<GridTcpCommunicationMessageAdapter> spi : spis.values()) {
    spi.onContextDestroyed();
    spi.setListener(null);
    spi.spiStop();
  }
  for (  IgniteTestResources rsrcs : spiRsrcs)   rsrcs.stopThreads();
  lsnrs.clear();
  spiRsrcs.clear();
  spis.clear();
  nodes.clear();
}
