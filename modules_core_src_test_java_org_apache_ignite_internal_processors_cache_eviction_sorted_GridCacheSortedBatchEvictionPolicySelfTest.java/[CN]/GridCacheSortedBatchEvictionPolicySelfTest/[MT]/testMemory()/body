{
  try {
    startGrid();
    SortedEvictionPolicy<String,String> p=policy();
    int max=10;
    int batchSize=2;
    p.setMaxSize(max);
    p.setBatchSize(batchSize);
    int cnt=max + batchSize;
    for (int i=0; i < cnt; i++)     p.onEntryAccessed(false,new GridCacheEvictionAbstractTest.MockEntry(Integer.toString(i),Integer.toString(i)));
    info(p);
    assertEquals(cnt - batchSize,p.getCurrentSize());
  }
  finally {
    stopAllGrids();
  }
}
