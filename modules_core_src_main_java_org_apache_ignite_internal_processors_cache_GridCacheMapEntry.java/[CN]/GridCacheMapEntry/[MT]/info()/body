{
  GridCacheEntryInfo info=null;
  long time=U.currentTimeMillis();
  try {
synchronized (this) {
      if (!obsolete()) {
        info=new GridCacheEntryInfo();
        info.key(key);
        info.cacheId(cctx.cacheId());
        long expireTime=expireTimeExtras();
        boolean expired=expireTime != 0 && expireTime <= time;
        info.ttl(ttlExtras());
        info.expireTime(expireTime);
        info.version(ver);
        info.setNew(isStartVersion());
        info.setDeleted(deletedUnlocked());
        if (!expired) {
          CacheObject val0=val;
          if (val0 == null && valPtr != 0) {
            IgniteBiTuple<byte[],Boolean> t=valueBytes0();
            if (t.get2())             val0=cctx.toCacheObject(t.get1(),null);
 else             val0=cctx.toCacheObject(null,t.get1());
          }
          info.value(val0);
        }
      }
    }
  }
 catch (  Exception e) {
    throw new IgniteException("Failed to unmarshal object while creating entry info: " + this,e);
  }
  return info;
}
