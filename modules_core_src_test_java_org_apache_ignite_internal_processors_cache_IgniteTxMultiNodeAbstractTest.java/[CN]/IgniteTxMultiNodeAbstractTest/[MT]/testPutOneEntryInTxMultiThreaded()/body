{
  startGrids(GRID_CNT);
  Collection<Thread> threads=new LinkedList<>();
  try {
    grid(0).cache(null).put(CNTR_KEY,0);
    for (int i=0; i < GRID_CNT; i++) {
      final int gridId=i;
      threads.add(new Thread("thread-#" + i){
        @Override public void run(){
          try {
            retries(grid(gridId),false);
          }
 catch (          IgniteCheckedException e) {
            throw new IgniteException(e);
          }
        }
      }
);
    }
    for (    Thread th : threads)     th.start();
    for (    Thread th : threads)     th.join();
    printCounter();
  }
  finally {
    stopAllGrids();
  }
}
