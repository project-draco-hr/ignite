{
  if (isDone()) {
    U.warn(log,"Received error when future is done [fut=" + this + ", err="+ e+ ", tx="+ tx+ ']');
    return;
  }
  if (log.isDebugEnabled())   log.debug("Error on tx prepare [fut=" + this + ", err="+ e+ ", tx="+ tx+ ']');
  if (ERR_UPD.compareAndSet(GridNearPessimisticTxPrepareFuture.this,null,e))   tx.setRollbackOnly();
  onDone(e);
}
