{
  GridNodeMetricsMBean mbean=new GridLocalNodeMetrics(ctx.discovery().localNode());
  try {
    locNodeMBean=U.registerMBean(cfg.getMBeanServer(),cfg.getGridName(),"Kernal",mbean.getClass().getSimpleName(),mbean,GridNodeMetricsMBean.class);
    if (log.isDebugEnabled())     log.debug("Registered local node MBean: " + locNodeMBean);
  }
 catch (  JMException e) {
    locNodeMBean=null;
    throw new GridException("Failed to register local node MBean.",e);
  }
}
