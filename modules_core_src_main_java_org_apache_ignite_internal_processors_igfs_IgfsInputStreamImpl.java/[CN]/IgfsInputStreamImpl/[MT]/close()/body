{
  if (!closed) {
    try {
      if (secReader != null) {
        secReader.close();
        for (        IgniteInternalFuture<byte[]> fut : locCache.values()) {
          try {
            fut.get();
          }
 catch (          IgniteCheckedException ignore) {
          }
        }
        while (!pendingFuts.isEmpty()) {
          pendingFutsLock.lock();
          try {
            pendingFutsCond.await(100,TimeUnit.MILLISECONDS);
          }
 catch (          InterruptedException ignore) {
          }
 finally {
            pendingFutsLock.unlock();
          }
        }
      }
    }
 catch (    Exception e) {
      throw new IOException("File to close the file: " + path,e);
    }
 finally {
      closed=true;
      IgfsLocalMetrics metrics=igfsCtx.metrics();
      metrics.addReadBytesTime(bytes,time);
      metrics.decrementFilesOpenedForRead();
      locCache.clear();
      GridEventStorageManager evts=igfsCtx.kernalContext().event();
      if (evts.isRecordable(EVT_IGFS_FILE_CLOSED_READ))       evts.record(new IgfsEvent(path,igfsCtx.localNode(),EVT_IGFS_FILE_CLOSED_READ,bytes()));
    }
  }
}
