{
  if (!closed.compareAndSet(false,true))   return;
  GridIpcSharedMemoryUtils.ipcClose(shmemPtr);
  lock.writeLock().lock();
  try {
    GridIpcSharedMemoryUtils.freeSystemResources(tokFileName,shmemPtr,force);
  }
  finally {
    lock.writeLock().unlock();
  }
  if (DEBUG && log.isDebugEnabled())   log.debug("Shared memory space has been closed: " + this);
}
