{
  IgniteConfiguration cfg=super.getConfiguration(gridName);
  BinaryTypeConfiguration typeCfg=new BinaryTypeConfiguration();
  typeCfg.setClassName(AffinityTestKey.class.getName());
  CacheKeyConfiguration keyCfg=new CacheKeyConfiguration(AffinityTestKey.class.getName(),"affKey");
  cfg.setCacheKeyCfg(keyCfg);
  PortableMarshaller marsh=new PortableMarshaller();
  marsh.setTypeConfigurations(Collections.singleton(typeCfg));
  cfg.setMarshaller(marsh);
  return cfg;
}
