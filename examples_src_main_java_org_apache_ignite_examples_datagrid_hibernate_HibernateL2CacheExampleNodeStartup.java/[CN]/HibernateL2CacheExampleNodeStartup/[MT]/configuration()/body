{
  IgniteConfiguration cfg=new IgniteConfiguration();
  cfg.setGridName("hibernate-grid");
  cfg.setLocalHost("127.0.0.1");
  cfg.setRestEnabled(false);
  TcpDiscoverySpi discoSpi=new TcpDiscoverySpi();
  TcpDiscoveryVmIpFinder ipFinder=new TcpDiscoveryVmIpFinder();
  ipFinder.setAddresses(Collections.singletonList("127.0.0.1:47500..47509"));
  discoSpi.setIpFinder(ipFinder);
  cfg.setDiscoverySpi(discoSpi);
  cfg.setCacheConfiguration(cacheConfiguration("org.hibernate.cache.spi.UpdateTimestampsCache",ATOMIC),cacheConfiguration("org.hibernate.cache.internal.StandardQueryCache",ATOMIC),cacheConfiguration("org.apache.ignite.examples.datagrid.hibernate.User",TRANSACTIONAL),cacheConfiguration("org.apache.ignite.examples.datagrid.hibernate.User.posts",TRANSACTIONAL),cacheConfiguration("org.apache.ignite.examples.datagrid.hibernate.Post",TRANSACTIONAL));
  return cfg;
}
