{
  IgniteConfiguration c=super.getConfiguration(gridName);
  TcpDiscoverySpi disco=new TcpDiscoverySpi();
  disco.setIpFinder(ipFinder);
  c.setDiscoverySpi(disco);
  CacheConfiguration<?,?> ccfg=new CacheConfiguration<>();
  ccfg.setName("offheap-cache");
  ccfg.setCacheMode(CacheMode.PARTITIONED);
  ccfg.setAtomicityMode(CacheAtomicityMode.ATOMIC);
  ccfg.setSwapEnabled(false);
  ccfg.setQueryIndexEnabled(true);
  ccfg.setMemoryMode(CacheMemoryMode.OFFHEAP_TIERED);
  c.setCacheConfiguration(ccfg);
  QueryConfiguration qcfg=new QueryConfiguration();
  qcfg.setMaxOffHeapMemory(0);
  c.setQueryConfiguration(qcfg);
  return c;
}
