{
  A.notNull(endpointCfg,"endpointCfg");
  String endpointType=endpointCfg.get("type");
  if (endpointType == null)   throw new IgniteCheckedException("Failed to create server endpoint (type is not specified)");
switch (endpointType) {
case "shmem":
{
      GridIpcSharedMemoryServerEndpoint endpoint=new GridIpcSharedMemoryServerEndpoint();
      endpoint.setupConfiguration(endpointCfg);
      return endpoint;
    }
case "tcp":
{
    GridIpcServerTcpEndpoint endpoint=new GridIpcServerTcpEndpoint();
    endpoint.setupConfiguration(endpointCfg);
    return endpoint;
  }
default :
throw new IgniteCheckedException("Failed to create server endpoint (type is unknown): " + endpointType);
}
}
