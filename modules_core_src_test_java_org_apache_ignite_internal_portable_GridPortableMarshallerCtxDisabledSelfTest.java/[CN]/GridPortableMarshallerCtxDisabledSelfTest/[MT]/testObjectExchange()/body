{
  PortableMarshaller marsh=new PortableMarshaller();
  marsh.setContext(new MarshallerContextWithNoStorage());
  PortableContext context=new PortableContext(META_HND,null);
  IgniteUtils.invoke(PortableMarshaller.class,marsh,"setPortableContext",context);
  SimpleObject obj0=new SimpleObject();
  obj0.b=2;
  obj0.bArr=new byte[]{2,3,4,5,5};
  obj0.c='A';
  obj0.enumVal=TestEnum.D;
  obj0.objArr=new Object[]{"hello","world","from","me"};
  obj0.enumArr=new TestEnum[]{TestEnum.C,TestEnum.B};
  byte[] arr=marsh.marshal(obj0);
  SimpleObject obj2=marsh.unmarshal(arr,null);
  assertEquals(obj0.b,obj2.b);
  assertEquals(obj0.c,obj2.c);
  assertEquals(obj0.enumVal,obj2.enumVal);
  for (int i=0; i < obj0.bArr.length; i++)   assertEquals(obj0.bArr[i],obj2.bArr[i]);
  for (int i=0; i < obj0.objArr.length; i++)   assertEquals(obj0.objArr[i],obj2.objArr[i]);
  for (int i=0; i < obj0.enumArr.length; i++)   assertEquals(obj0.enumArr[i],obj2.enumArr[i]);
}
