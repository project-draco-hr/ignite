{
  if (!allNames.add(name))   throw new GridPortableException("Duplicate field name: " + name);
  if (useNames) {
    byte[] nameArr=name.getBytes(UTF_8);
    names.add(nameArr);
    hdrLen+=nameArr.length;
  }
 else {
    if (hashCodes.add(name.hashCode()))     hdrLen+=4;
 else     throw new GridPortableException("Hash code collision for field: " + name);
  }
  int offPos=hdrLen;
  hdrLen+=4;
  return offPos;
}
