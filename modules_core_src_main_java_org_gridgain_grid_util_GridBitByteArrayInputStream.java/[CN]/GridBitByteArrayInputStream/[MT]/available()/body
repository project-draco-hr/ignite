{
  int available=0;
  int wholeBytes=bytesLength - dataIdx;
  if (byteIdx > 0) {
    wholeBytes--;
    available+=(8 - byteIdx);
  }
  if (lastByteLength > 0) {
    wholeBytes--;
    available+=lastByteLength;
    if (dataIdx == bytesLength - 1 && byteIdx > 0)     available-=8;
  }
  if (wholeBytes >= 0)   available+=8 * wholeBytes;
  return available;
}
