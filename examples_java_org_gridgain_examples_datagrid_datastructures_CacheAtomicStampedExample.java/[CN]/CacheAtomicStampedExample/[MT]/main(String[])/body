{
  try (Grid g=GridGain.start("examples/config/example-cache.xml")){
    print("Starting atomic stamped example on nodes: " + g.nodes().size());
    String stampedName=UUID.randomUUID().toString();
    String val=UUID.randomUUID().toString();
    String stamp=UUID.randomUUID().toString();
    GridCacheAtomicStamped<String,String> stamped=g.cache(CACHE_NAME).dataStructures().atomicStamped(stampedName,val,stamp,true);
    print("Atomic stamped initial [value=" + stamped.value() + ", stamp="+ stamped.stamp()+ ']');
    Runnable c=new StampedUpdateClosure(CACHE_NAME,stampedName);
    g.compute().run(c).get();
    String newVal=UUID.randomUUID().toString();
    String newStamp=UUID.randomUUID().toString();
    print("Try to change value and stamp of atomic stamped with wrong expected value and stamp.");
    stamped.compareAndSet("WRONG EXPECTED VALUE",newVal,"WRONG EXPECTED STAMP",newStamp);
    g.compute().run(c).get();
    print("Try to change value and stamp of atomic stamped with correct value and stamp.");
    stamped.compareAndSet(val,newVal,stamp,newStamp);
    g.compute().run(c).get();
  }
   print("");
  print("Finished atomic stamped example...");
  print("Check all nodes for output (this node is also part of the grid).");
  print("");
}
