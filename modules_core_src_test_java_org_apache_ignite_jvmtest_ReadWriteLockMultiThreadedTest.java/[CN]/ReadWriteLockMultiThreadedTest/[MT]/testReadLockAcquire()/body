{
  final ReadWriteLock lock=new ReentrantReadWriteLock();
  lock.writeLock().lock();
  X.println("Write lock acquired: " + lock);
  IgniteFuture fut=GridTestUtils.runMultiThreadedAsync(new Callable<Object>(){
    @Nullable @Override public Object call() throws Exception {
      X.println("Attempting to acquire read lock: " + lock);
      lock.readLock().lock();
      try {
        X.println("Read lock acquired: " + lock);
        return null;
      }
  finally {
        lock.readLock().unlock();
      }
    }
  }
,1,"read-lock");
  Thread.sleep(2000);
  X.println(">>> Dump threads now! <<<");
  Thread.sleep(15 * 1000);
  X.println("Write lock released.");
  lock.writeLock().unlock();
  fut.get();
}
