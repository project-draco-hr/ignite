{
  return new Comparator<InetSocketAddress>(){
    @Override public int compare(    InetSocketAddress addr1,    InetSocketAddress addr2){
      boolean addr1Loopback=addr1.getAddress().isLoopbackAddress();
      boolean addr2Loopback=addr2.getAddress().isLoopbackAddress();
      if (addr1Loopback == addr2Loopback)       return 0;
      if (sameHost)       return addr1Loopback ? -1 : 1;
 else       return addr1Loopback ? 1 : -1;
    }
  }
;
}
