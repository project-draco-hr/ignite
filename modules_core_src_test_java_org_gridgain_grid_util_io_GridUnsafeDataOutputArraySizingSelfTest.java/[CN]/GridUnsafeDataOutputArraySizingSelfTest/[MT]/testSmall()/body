{
  GridUnsafeDataOutput out=new GridUnsafeDataOutput(512);
  for (int i=0; i < 11; i++) {
    Thread.sleep(100);
    writeSmall(out);
  }
  assertEquals(256,out.internalArray().length);
  for (int i=0; i < 11; i++) {
    Thread.sleep(100);
    writeSmall(out);
  }
  assertEquals(128,out.internalArray().length);
  for (int i=0; i < 11; i++) {
    Thread.sleep(100);
    writeSmall(out);
  }
  assertEquals(64,out.internalArray().length);
  for (int i=0; i < 11; i++) {
    Thread.sleep(100);
    writeSmall(out);
  }
  assertEquals(64,out.internalArray().length);
}
