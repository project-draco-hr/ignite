{
  buf.compact();
  while (off < end) {
    int res0=read(buf,off);
    if (res0 == -1) {
      if (!file.exists())       throw new NoDataException();
      throw new IllegalStateException();
    }
    off+=res0;
  }
  buf.flip();
}
