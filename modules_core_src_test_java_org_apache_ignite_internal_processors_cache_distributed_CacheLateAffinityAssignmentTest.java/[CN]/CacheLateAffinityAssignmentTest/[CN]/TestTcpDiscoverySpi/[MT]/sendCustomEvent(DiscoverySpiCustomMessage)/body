{
synchronized (mux) {
    if (blockCustomEvt) {
      DiscoveryCustomMessage msg0=GridTestUtils.getFieldValue(msg,"delegate");
      if (msg0 instanceof CacheAffinityChangeMessage) {
        log.info("Block custom message: " + msg0);
        blockedMsgs.add(msg);
        mux.notifyAll();
        return;
      }
    }
  }
  super.sendCustomEvent(msg);
}
