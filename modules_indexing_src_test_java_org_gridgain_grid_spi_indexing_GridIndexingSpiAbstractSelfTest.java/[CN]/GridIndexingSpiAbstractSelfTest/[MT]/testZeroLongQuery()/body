{
  X spi=getSpi();
  if (!(spi instanceof GridH2IndexingSpi))   return;
  long longQryExecTime=-1;
  GridStringLogger log=new GridStringLogger(false,this.log);
  GridLogger oldLog=GridTestUtils.getFieldValue(spi,"log");
  ((GridH2IndexingSpi)spi).setLongQueryExecutionTimeout(longQryExecTime);
  ((GridH2IndexingSpi)spi).setLongQueryExplain(true);
  try {
    GridTestUtils.setFieldValue(spi,"log",log);
    String sql="SELECT * FROM MyNonExistingTable";
    GridIndexingFieldsResult res=spi.queryFields(null,sql,Collections.emptyList());
    assertFalse(res.iterator().hasNext());
    String logStr=log.toString();
    F.println(logStr);
    assertTrue(logStr.contains("Failed to explain plan because required table does not exist"));
  }
  finally {
    GridTestUtils.setFieldValue(spi,"log",oldLog);
    ((GridH2IndexingSpi)spi).setLongQueryExecutionTimeout(3000);
  }
}
