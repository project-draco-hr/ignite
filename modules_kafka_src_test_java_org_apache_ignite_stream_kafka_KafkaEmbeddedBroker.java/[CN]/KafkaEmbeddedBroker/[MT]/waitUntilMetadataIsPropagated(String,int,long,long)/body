{
  int attempt=1;
  long startTime=System.currentTimeMillis();
  while (true) {
    if (isMetadataPropagated(topic,part))     return;
    long duration=System.currentTimeMillis() - startTime;
    if (duration < timeout)     Thread.sleep(interval);
 else     throw new TimeoutException("Metadata propagation is timed out, attempt " + attempt);
    attempt++;
  }
}
