{
  try (Grid g=GridGain.start("examples/config/example-cache.xml")){
    System.out.println();
    System.out.println(">>> Cache events example started.");
    GridCache<Integer,String> cache=g.cache(CACHE_NAME);
    GridFuture<UUID> fut=GridGain.grid().forCache(CACHE_NAME).events().consumeRemote(new GridBiPredicate<UUID,GridCacheEvent>(){
      @Override public boolean apply(      UUID uuid,      GridCacheEvent evt){
        System.out.println("Received event [evt=" + evt.name() + ", key="+ evt.key()+ ", oldVal="+ evt.oldValue()+ ", newVal="+ evt.newValue());
        return true;
      }
    }
,new GridPredicate<GridCacheEvent>(){
      @Override public boolean apply(      GridCacheEvent evt){
        System.out.println("Cache event [name=" + evt.name() + ", key="+ evt.key()+ ']');
        int key=evt.key();
        return key >= 10 && g.cache(CACHE_NAME).affinity().isPrimary(g.localNode(),key);
      }
    }
,EVT_CACHE_OBJECT_PUT,EVT_CACHE_OBJECT_READ,EVT_CACHE_OBJECT_REMOVED);
    fut.get();
    int keyCnt=20;
    for (int i=0; i < keyCnt; i++)     cache.putx(i,Integer.toString(i));
    Thread.sleep(2000);
  }
 }
