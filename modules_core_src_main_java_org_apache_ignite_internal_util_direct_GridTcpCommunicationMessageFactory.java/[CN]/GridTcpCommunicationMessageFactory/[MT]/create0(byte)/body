{
  if (type >= 0 && type < COMMON.length) {
    GridTcpCommunicationMessageProducer producer=COMMON[type];
    if (producer != null)     return producer.create(type);
 else     throw new IllegalStateException("Common message type producer is not registered: " + type);
  }
 else {
    GridTcpCommunicationMessageProducer c=CUSTOM.get(type);
    if (c != null)     return c.create(type);
 else     throw new IllegalStateException("Custom message type producer is not registered: " + type);
  }
}
