{
  GridClientNode node=aff.node(key,nodes);
  int part=srvAff.partition(key);
  CacheAffinityFunctionContext ctx=new GridCacheAffinityFunctionContextImpl(new ArrayList<>(srvNodes),null,null,new AffinityTopologyVersion(1),0);
  ClusterNode srvNode=F.first(srvAff.assignPartitions(ctx).get(part));
  if (node == null)   assertNull(srvNode);
 else {
    assertNotNull(srvNode);
    assertEquals(node.nodeId(),srvNode.id());
  }
}
