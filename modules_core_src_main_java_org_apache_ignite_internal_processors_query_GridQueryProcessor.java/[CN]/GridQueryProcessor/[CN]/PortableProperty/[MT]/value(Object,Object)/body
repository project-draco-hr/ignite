{
  Object obj;
  if (parent != null) {
    obj=parent.value(key,val);
    if (obj == null)     return null;
    if (!ctx.cacheObjects().isPortableObject(obj))     throw new IgniteCheckedException("Non-portable object received as a result of property extraction " + "[parent=" + parent + ", propName="+ propName+ ", obj="+ obj+ ']');
  }
 else {
    int isKeyProp0=isKeyProp;
    if (isKeyProp0 == 0) {
      if (key instanceof BinaryObject && ((BinaryObject)key).hasField(propName))       isKeyProp=isKeyProp0=1;
 else       if (val instanceof BinaryObject && ((BinaryObject)val).hasField(propName))       isKeyProp=isKeyProp0=-1;
 else {
        U.warn(log,"Neither key nor value have property " + "[propName=" + propName + ", key="+ key+ ", val="+ val+ "]");
        return null;
      }
    }
    obj=isKeyProp0 == 1 ? key : val;
  }
  return ctx.cacheObjects().field(obj,propName);
}
