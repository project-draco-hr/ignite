{
  Map<TypeId,GridCacheQueryTypeMetadata> declaredTypesById=this.declaredTypesById;
  if (declaredTypesById == null) {
    declaredTypesById=new HashMap<>();
    for (    CacheConfiguration ccfg : ctx.config().getCacheConfiguration()) {
      GridCacheQueryConfiguration qryCfg=ccfg.getQueryConfiguration();
      if (qryCfg != null) {
        for (        GridCacheQueryTypeMetadata meta : qryCfg.getTypeMetadata())         declaredTypesById.put(new TypeId(ccfg.getName(),ctx.portable().typeId(meta.getType())),meta);
      }
    }
    this.declaredTypesById=declaredTypesById;
  }
  return declaredTypesById.get(new TypeId(space,typeId));
}
