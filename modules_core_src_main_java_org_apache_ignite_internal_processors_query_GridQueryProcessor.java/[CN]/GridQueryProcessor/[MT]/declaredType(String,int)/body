{
  Map<TypeId,CacheTypeMetadata> declaredTypesById=this.declaredTypesById;
  if (declaredTypesById == null) {
    declaredTypesById=new HashMap<>();
    for (    CacheConfiguration<?,?> ccfg : ctx.config().getCacheConfiguration()) {
      CacheQueryConfiguration qryCfg=ccfg.getQueryConfiguration();
      if (qryCfg != null && ccfg.getTypeMetadata() != null) {
        for (        CacheTypeMetadata meta : ccfg.getTypeMetadata())         declaredTypesById.put(new TypeId(ccfg.getName(),ctx.portable().typeId(meta.getValueType())),meta);
      }
    }
    this.declaredTypesById=declaredTypesById;
  }
  return declaredTypesById.get(new TypeId(space,typeId));
}
