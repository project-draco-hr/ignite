{
  writeNullableCollection(writer,cfg.getAssemblies());
  PlatformDotNetPortableConfiguration portableCfg=cfg.getPortableConfiguration();
  if (portableCfg != null) {
    writer.writeBoolean(true);
    writeNullableCollection(writer,portableCfg.getTypesConfiguration(),new PlatformWriterClosure<PlatformDotNetPortableTypeConfiguration>(){
      @Override public void write(      PortableRawWriterEx writer,      PlatformDotNetPortableTypeConfiguration typ){
        writer.writeString(typ.getAssemblyName());
        writer.writeString(typ.getTypeName());
        writer.writeString(typ.getNameMapper());
        writer.writeString(typ.getIdMapper());
        writer.writeString(typ.getSerializer());
        writer.writeString(typ.getAffinityKeyFieldName());
        writer.writeObject(typ.getMetadataEnabled());
        writer.writeObject(typ.getKeepDeserialized());
      }
    }
);
    writeNullableCollection(writer,portableCfg.getTypes());
    writer.writeString(portableCfg.getDefaultNameMapper());
    writer.writeString(portableCfg.getDefaultIdMapper());
    writer.writeString(portableCfg.getDefaultSerializer());
    writer.writeBoolean(portableCfg.isDefaultMetadataEnabled());
    writer.writeBoolean(portableCfg.isDefaultKeepDeserialized());
  }
 else   writer.writeBoolean(false);
}
