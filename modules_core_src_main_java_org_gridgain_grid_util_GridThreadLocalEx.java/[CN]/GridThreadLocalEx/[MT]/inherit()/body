{
  ThreadContext ctx=threadCtx.get();
  Collection<GridThreadLocalEx<?>> threadLocals=ctx.threadLocals();
  Map<GridThreadLocalEx<?>,Object> ret=F.isEmpty(threadLocals) ? Collections.<GridThreadLocalEx<?>,Object>emptyMap() : U.<GridThreadLocalEx<?>,Object>newHashMap(threadLocals.size());
  for (  GridThreadLocalEx<?> t : threadLocals)   ret.put(t,t.get());
  return ret;
}
