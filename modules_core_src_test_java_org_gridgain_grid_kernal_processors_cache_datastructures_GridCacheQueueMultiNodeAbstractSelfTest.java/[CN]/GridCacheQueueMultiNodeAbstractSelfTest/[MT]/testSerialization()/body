{
  String queueName=UUID.randomUUID().toString();
  final GridCacheQueue<Integer> queue=grid(0).cache(null).dataStructures().queue(queueName,0,false,true);
  assertNotNull(queue);
  try {
    for (int i=0; i < 10; i++)     queue.add(i);
    Collection<Integer> c=grid(0).compute().broadcast(new QueueJob(queue));
    assertEquals(GRID_CNT,c.size());
    for (    Integer size : c)     assertEquals((Integer)10,size);
  }
  finally {
    grid(0).cache(null).dataStructures().removeQueue(queueName);
  }
}
