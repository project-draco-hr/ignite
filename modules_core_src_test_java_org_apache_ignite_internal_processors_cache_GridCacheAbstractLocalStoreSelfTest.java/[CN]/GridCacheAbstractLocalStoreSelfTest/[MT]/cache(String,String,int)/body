{
  CacheConfiguration cacheCfg=new CacheConfiguration();
  cacheCfg.setName(cacheName);
  cacheCfg.setCacheMode(getCacheMode());
  cacheCfg.setAtomicityMode(getAtomicMode());
  cacheCfg.setDistributionMode(getDistributionMode());
  cacheCfg.setWriteSynchronizationMode(FULL_SYNC);
  cacheCfg.setRebalanceMode(SYNC);
  if (gridName.endsWith("1"))   cacheCfg.setCacheStoreFactory(new FactoryBuilder.SingletonFactory<CacheStore>(LOCAL_STORE_1));
 else   if (gridName.endsWith("2"))   cacheCfg.setCacheStoreFactory(new FactoryBuilder.SingletonFactory<CacheStore>(LOCAL_STORE_2));
 else   cacheCfg.setCacheStoreFactory(new FactoryBuilder.SingletonFactory<CacheStore>(LOCAL_STORE_3));
  cacheCfg.setWriteThrough(true);
  cacheCfg.setReadThrough(true);
  cacheCfg.setBackups(backups);
  cacheCfg.setOffHeapMaxMemory(0);
  cacheCfg.setSwapEnabled(true);
  if (isOffHeapTieredMode())   cacheCfg.setMemoryMode(OFFHEAP_TIERED);
  return cacheCfg;
}
