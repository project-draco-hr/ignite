{
  IgniteConfiguration cfg=super.getConfiguration(gridName);
  CacheConfiguration cacheCfg=cache(gridName,null,0);
  cacheCfg.setAffinity(new RendezvousAffinityFunction());
  CacheConfiguration cacheBackupCfg=cache(gridName,BACKUP_CACHE,2);
  cacheBackupCfg.setAffinity(new RendezvousAffinityFunction());
  cfg.setCacheConfiguration(cacheCfg,cacheBackupCfg);
  TcpDiscoverySpi spi=new TcpDiscoverySpi();
  spi.setIpFinder(IP_FINDER);
  cfg.setDiscoverySpi(spi);
  return cfg;
}
