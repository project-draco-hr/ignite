{
  try (PlatformMemory mem=ctx.memory().allocate()){
    PlatformOutputStream out=mem.output();
    PortableRawWriterEx outWriter=ctx.writer(out);
    outWriter.writeString(err.getClass().getName());
    outWriter.writeString(err.getMessage());
    PlatformUtils.writeErrorData(err,outWriter);
    out.synchronize();
    ctx.gateway().futureError(futPtr,mem.pointer());
  }
 }
