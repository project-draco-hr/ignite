{
  try {
    locHost=locAddr == null ? U.getLocalHost() : U.resolveLocalHost(locAddr);
  }
 catch (  IOException e) {
    throw new GridException("Failed to initialize local address: " + locAddr,e);
  }
  try {
    nioSrvr=resetNioServer();
  }
 catch (  GridException e) {
    throw new GridException("Failed to initialize TCP server: " + locHost,e);
  }
  locProcDesc.address(locHost.getHostAddress());
  locProcDesc.sharedMemoryPort(boundTcpShmemPort);
  locProcDesc.tcpPort(boundTcpPort);
  locIdMsg=new ProcessHandshakeMessage(locProcDesc);
  if (shmemSrv != null) {
    shmemAcceptWorker=new ShmemAcceptWorker(shmemSrv);
    new GridThread(shmemAcceptWorker).start();
  }
  nioSrvr.start();
}
