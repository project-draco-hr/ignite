{
  CacheConfiguration cfg=defaultCacheConfiguration();
  CacheStore<?,?> store=cacheStore();
  if (store != null) {
    cfg.setCacheStoreFactory(new FactoryBuilder.SingletonFactory(store));
    cfg.setReadThrough(true);
    cfg.setWriteThrough(true);
  }
  cfg.setSwapEnabled(swapEnabled());
  cfg.setCacheMode(cacheMode());
  cfg.setAtomicityMode(atomicityMode());
  cfg.setWriteSynchronizationMode(writeSynchronization());
  cfg.setDistributionMode(distributionMode());
  cfg.setPortableEnabled(portableEnabled());
  if (cacheMode() == PARTITIONED)   cfg.setBackups(1);
  return cfg;
}
