{
  if (busyLock.enterBusy()) {
    try {
      validTxState(false);
      String[] components=path.componentsArray();
      String[] parts=new String[components.length + 1];
      System.arraycopy(components,0,parts,1,components.length);
      IgniteUuid[] ids=new IgniteUuid[parts.length];
      ids[0]=IgfsUtils.ROOT_ID;
      for (int i=1; i < ids.length; i++) {
        IgniteUuid id=fileId(ids[i - 1],parts[i],false);
        if (id != null)         ids[i]=id;
 else         break;
      }
      return new IgfsPathIds(path,parts,ids);
    }
  finally {
      busyLock.leaveBusy();
    }
  }
 else   throw new IllegalStateException("Failed to get file IDS because Grid is stopping: " + path);
}
