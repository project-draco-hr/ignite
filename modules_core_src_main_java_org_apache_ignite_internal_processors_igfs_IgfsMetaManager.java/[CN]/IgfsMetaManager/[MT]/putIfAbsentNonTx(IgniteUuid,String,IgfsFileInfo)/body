{
  if (log.isDebugEnabled())   log.debug("Locking parent id [parentId=" + parentId + ", fileName="+ fileName+ ", newFileInfo="+ newFileInfo+ ']');
  validTxState(true);
  IgfsFileInfo parentInfo=info(parentId);
  if (parentInfo == null)   throw fsException(new IgfsPathNotFoundException("Failed to lock parent directory (not found): " + parentId));
  if (!parentInfo.isDirectory())   throw fsException(new IgfsPathIsNotDirectoryException("Parent file is not a directory: " + parentInfo));
  IgfsListingEntry childEntry=parentInfo.listing().get(fileName);
  if (childEntry != null)   return childEntry.fileId();
  createNewEntry(newFileInfo,parentId,fileName);
  return null;
}
