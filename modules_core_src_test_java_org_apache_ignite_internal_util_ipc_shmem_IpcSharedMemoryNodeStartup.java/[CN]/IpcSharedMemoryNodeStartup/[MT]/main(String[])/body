{
  IgniteConfiguration cfg=new IgniteConfiguration();
  FileSystemConfiguration igfsCfg=new FileSystemConfiguration();
  TcpDiscoverySpi discoSpi=new TcpDiscoverySpi();
  discoSpi.setIpFinder(new TcpDiscoveryVmIpFinder(true));
  cfg.setDiscoverySpi(discoSpi);
  Map<String,String> endpointCfg=new HashMap<>();
  endpointCfg.put("type","shmem");
  endpointCfg.put("port","10500");
  igfsCfg.setIpcEndpointConfiguration(endpointCfg);
  igfsCfg.setDataCacheName("partitioned");
  igfsCfg.setMetaCacheName("partitioned");
  igfsCfg.setName("igfs");
  cfg.setFileSystemConfiguration(igfsCfg);
  CacheConfiguration cacheCfg=new CacheConfiguration();
  cacheCfg.setName("partitioned");
  cacheCfg.setCacheMode(PARTITIONED);
  cacheCfg.setDistributionMode(PARTITIONED_ONLY);
  cacheCfg.setWriteSynchronizationMode(FULL_SYNC);
  cacheCfg.setEvictionPolicy(null);
  cacheCfg.setBackups(0);
  cfg.setCacheConfiguration(cacheCfg);
  cfg.setIncludeEventTypes(EVT_TASK_FAILED,EVT_TASK_FINISHED,EVT_JOB_MAPPED);
  try (Ignite ignored=G.start(cfg)){
    X.println("Press any key to stop grid...");
    System.in.read();
  }
 }
