{
  if (newEntry.dataCenterId() != oldEntry.dataCenterId())   ctx.useNew();
 else {
    if (oldEntry.isStartVersion())     ctx.useNew();
 else {
      if (atomicVerComparator) {
        if (GridCacheMapEntry.ATOMIC_VER_COMPARATOR.compare(oldEntry.version(),newEntry.version()) >= 0)         ctx.useOld();
 else         ctx.useNew();
      }
 else {
        long topVerDiff=newEntry.topologyVersion() - oldEntry.topologyVersion();
        if (topVerDiff > 0)         ctx.useNew();
 else         if (topVerDiff < 0)         ctx.useOld();
 else         if (newEntry.order() > oldEntry.order())         ctx.useNew();
 else         ctx.useOld();
      }
    }
  }
}
