{
  TcpCommunicationSpi spi=new TcpCommunicationSpi();
  spi.setSharedMemoryPort(-1);
  spi.setLocalPort(GridTestUtils.getNextCommPort(getClass()));
  spi.setIdleConnectionTimeout(idleTimeout);
  spi.setTcpNoDelay(true);
  spi.setAckSendThreshold(ackCnt);
  spi.setMessageQueueLimit(queueLimit);
  return spi;
}
