{
  checkInternal(e.txKey());
  IgniteTxEntry entry=writeMap.get(e.txKey());
  if (entry == null) {
    IgniteTxEntry rmv=readMap.remove(e.txKey());
    if (rmv != null) {
      e.cached(rmv.cached());
      writeMap.put(e.txKey(),e);
    }
 else {
      e.cached(e.context().cache().entryEx(e.key()));
      writeMap.put(e.txKey(),e);
    }
  }
 else {
    entry.value(e.value(),e.hasWriteValue(),e.hasReadValue());
    entry.entryProcessors(e.entryProcessors());
    entry.op(e.op());
    entry.ttl(e.ttl());
    entry.explicitVersion(e.explicitVersion());
    entry.conflictVersion(e.conflictVersion());
    entry.conflictExpireTime(e.conflictExpireTime());
  }
  addExplicit(e);
  return true;
}
