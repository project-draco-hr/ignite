{
  try {
    IgniteFsOutputStream stream=delegate.target();
    stream.flush();
  }
 catch (  IllegalStateException|IOException e) {
    IgfsHadoopStreamEventListener lsnr=lsnrs.get(delegate);
    if (lsnr != null)     lsnr.onError(e.getMessage());
    if (e instanceof IllegalStateException)     throw new IOException("Failed to flush data to GGFS stream because Grid is stopping.",e);
 else     throw e;
  }
}
