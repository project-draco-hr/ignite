{
  Collection<UUID> top=ses.getTopology();
  Collection<? extends GridNode> subgrid=top != null ? ctx.discovery().nodes(top) : ctx.discovery().allNodes();
  if (F.isEmpty(subgrid))   throw new GridEmptyProjectionException("Topology projection is empty.");
  List<GridNode> shuffledNodes=new ArrayList<>(subgrid.size());
  for (  GridNode node : subgrid)   shuffledNodes.add(node);
  if (shuffledNodes.size() > 1)   Collections.shuffle(shuffledNodes);
  return shuffledNodes;
}
