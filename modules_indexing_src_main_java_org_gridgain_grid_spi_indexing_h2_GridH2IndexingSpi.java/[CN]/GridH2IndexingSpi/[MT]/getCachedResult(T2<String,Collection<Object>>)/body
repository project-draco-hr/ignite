{
  GridFutureAdapterEx<QueryResult> fut=qryResCache.get(qryParams);
  if (fut == null) {
    fut=new GridFutureAdapterEx<>();
    GridFutureAdapterEx<QueryResult> fut0=qryResCache.putIfAbsent(qryParams,fut);
    if (fut0 == null)     return fut;
    fut=fut0;
  }
  try {
    return fut.get();
  }
 catch (  GridException e) {
    throw new GridSpiException(e);
  }
}
