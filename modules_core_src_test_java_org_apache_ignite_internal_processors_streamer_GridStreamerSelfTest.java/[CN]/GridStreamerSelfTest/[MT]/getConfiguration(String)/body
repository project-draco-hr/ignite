{
  IgniteConfiguration cfg=super.getConfiguration(gridName);
  cfg.setStreamerConfiguration(streamerConfiguration());
  TcpDiscoverySpi discoSpi=new TcpDiscoverySpi();
  discoSpi.setIpFinder(IP_FINDER);
  cfg.setDiscoverySpi(discoSpi);
  cfg.setPeerClassLoadingEnabled(p2pEnabled);
  if (p2pEnabled)   cfg.setDeploymentMode(SHARED);
  cfg.setMarshaller(new IgniteOptimizedMarshaller(false));
  return cfg;
}
