{
  try {
    byte[] buf=new byte[1024];
    while (!isInterrupted()) {
      int read=in.read(buf);
      if (read == -1) {
        out.flush();
        break;
      }
      out.write(buf,0,read);
    }
  }
 catch (  IOException e) {
    U.warn(null,"Thread was interrupted due to IO exception" + " [thread=" + getName() + ", msg="+ e.getMessage()+ ']');
  }
 finally {
    proc.destroy();
  }
}
