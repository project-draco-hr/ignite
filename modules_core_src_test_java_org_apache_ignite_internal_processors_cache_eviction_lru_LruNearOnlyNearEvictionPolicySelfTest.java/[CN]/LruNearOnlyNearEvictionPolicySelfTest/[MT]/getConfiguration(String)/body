{
  IgniteConfiguration c=super.getConfiguration(gridName);
  if (cnt == 0)   c.setClientMode(true);
 else {
    CacheConfiguration cc=new CacheConfiguration();
    cc.setCacheMode(cacheMode);
    cc.setAtomicityMode(atomicityMode);
    cc.setMemoryMode(memMode);
    cc.setWriteSynchronizationMode(PRIMARY_SYNC);
    cc.setRebalanceMode(SYNC);
    cc.setStartSize(100);
    cc.setBackups(0);
    c.setCacheConfiguration(cc);
  }
  c.setDiscoverySpi(new TcpDiscoverySpi().setIpFinder(ipFinder).setForceServerMode(true));
  cnt++;
  return c;
}
