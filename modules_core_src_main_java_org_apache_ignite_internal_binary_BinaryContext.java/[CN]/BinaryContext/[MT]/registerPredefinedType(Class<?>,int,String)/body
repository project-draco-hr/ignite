{
  String typeName=typeName(cls.getName());
  if (id == 0)   id=BinaryInternalIdMapper.defaultInstance().typeId(typeName);
  BinaryClassDescriptor desc=new BinaryClassDescriptor(this,cls,false,id,typeName,affFieldName,BinaryInternalIdMapper.defaultInstance(),new BinaryReflectiveSerializer(),false,true);
  predefinedTypeNames.put(typeName,id);
  predefinedTypes.put(id,desc);
  descByCls.put(cls,desc);
  if (affFieldName != null)   affKeyFieldNames.putIfAbsent(id,affFieldName);
  return desc;
}
