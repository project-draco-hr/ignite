{
  for (  T spi : spis) {
    ctx.resource().inject(spi);
    inject(spi);
    try {
      Map<String,Object> retval=spi.getNodeAttributes();
      if (retval != null) {
        for (        Map.Entry<String,Object> e : retval.entrySet()) {
          if (attrs.containsKey(e.getKey()))           throw new GridException("SPI attribute collision for attribute [spi=" + spi + ", attr="+ e.getKey()+ ']'+ ". Attribute set by one SPI implementation has the same name (name collision) as "+ "attribute set by other SPI implementation. Such overriding is not allowed. "+ "Please check your GridGain configuration and/or SPI implementation to avoid "+ "attribute name collisions.");
          attrs.put(e.getKey(),e.getValue());
        }
      }
    }
 catch (    IgniteSpiException e) {
      throw new GridException("Failed to get SPI attributes.",e);
    }
  }
}
