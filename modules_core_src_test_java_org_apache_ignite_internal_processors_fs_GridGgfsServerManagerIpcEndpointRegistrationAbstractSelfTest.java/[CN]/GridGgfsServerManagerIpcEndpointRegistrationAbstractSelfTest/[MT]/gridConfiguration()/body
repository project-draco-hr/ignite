{
  IgniteConfiguration cfg=getConfiguration(getTestGridName());
  TcpDiscoverySpi discoSpi=new TcpDiscoverySpi();
  discoSpi.setIpFinder(IP_FINDER);
  cfg.setDiscoverySpi(discoSpi);
  CacheConfiguration cc=defaultCacheConfiguration();
  cc.setName("partitioned");
  cc.setCacheMode(GridCacheMode.PARTITIONED);
  cc.setAffinityMapper(new IgniteFsGroupDataBlocksKeyMapper(128));
  cc.setBackups(0);
  cc.setAtomicityMode(TRANSACTIONAL);
  cc.setQueryIndexEnabled(false);
  CacheConfiguration metaCfg=defaultCacheConfiguration();
  metaCfg.setName("replicated");
  metaCfg.setCacheMode(GridCacheMode.REPLICATED);
  metaCfg.setAtomicityMode(TRANSACTIONAL);
  metaCfg.setQueryIndexEnabled(false);
  cfg.setCacheConfiguration(metaCfg,cc);
  return cfg;
}
