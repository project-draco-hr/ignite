{
  GridPortableTestClasses.TestObjectOuter outer=new GridPortableTestClasses.TestObjectOuter();
  outer.inner=new GridPortableTestClasses.TestObjectInner();
  outer.inner.outer=outer;
  outer.foo="a";
  BinaryObjectBuilder builder=builder(toPortable(outer));
  builder.setField("foo","b");
  GridPortableTestClasses.TestObjectOuter res=builder.build().deserialize();
  assertEquals("b",res.foo);
  assertSame(res,res.inner.outer);
}
