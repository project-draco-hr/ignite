{
  if (entrySet == null) {
    entrySet=new GridSerializableSet<Entry<IgniteTxKey<K>,IgniteTxEntry<K,V>>>(){
      private Set<Entry<IgniteTxKey<K>,IgniteTxEntry<K,V>>> set=txMap.entrySet();
      @Override public Iterator<Entry<IgniteTxKey<K>,IgniteTxEntry<K,V>>> iterator(){
        return new GridSerializableIterator<Entry<IgniteTxKey<K>,IgniteTxEntry<K,V>>>(){
          private Iterator<Entry<IgniteTxKey<K>,IgniteTxEntry<K,V>>> it=set.iterator();
          private Entry<IgniteTxKey<K>,IgniteTxEntry<K,V>> cur;
{
            advance();
          }
          @Override public boolean hasNext(){
            return cur != null;
          }
          @Override public Entry<IgniteTxKey<K>,IgniteTxEntry<K,V>> next(){
            if (cur == null)             throw new NoSuchElementException();
            Entry<IgniteTxKey<K>,IgniteTxEntry<K,V>> e=cur;
            advance();
            return e;
          }
          @Override public void remove(){
            throw new UnsupportedOperationException();
          }
          private void advance(){
            cur=null;
            while (cur == null && it.hasNext()) {
              Entry<IgniteTxKey<K>,IgniteTxEntry<K,V>> e=it.next();
              if (filter.apply(e.getValue()))               cur=e;
            }
          }
        }
;
      }
      @Override public int size(){
        return !sealed ? F.size(iterator()) : size == -1 ? size=F.size(iterator()) : size;
      }
      @Override public boolean isEmpty(){
        return !sealed ? !iterator().hasNext() : empty == null ? empty=!iterator().hasNext() : empty;
      }
    }
;
  }
  return entrySet;
}
