{
  EnumSet<GridClientCacheFlag> flagSet=F.isEmpty(flags) ? EnumSet.noneOf(GridClientCacheFlag.class) : EnumSet.copyOf(Arrays.asList(flags));
  int bits=GridClientConnection.encodeCacheFlags(flagSet);
  CacheFlag[] out=GridCacheCommandHandler.parseCacheFlags(bits);
  assertEquals(flagSet.contains(KEEP_PORTABLES) ? flagSet.size() - 1 : flagSet.size(),out.length);
  for (  CacheFlag f : out) {
    assertTrue(flagSet.contains(GridClientCacheFlag.valueOf(f.name())));
  }
}
