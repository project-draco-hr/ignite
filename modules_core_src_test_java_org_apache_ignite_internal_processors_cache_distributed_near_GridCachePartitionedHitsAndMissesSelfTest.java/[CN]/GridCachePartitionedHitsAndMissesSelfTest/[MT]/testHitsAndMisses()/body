{
  startGrids(GRID_CNT);
  awaitPartitionMapExchange();
  try {
    final Ignite g=grid(0);
    realTimePopulate(g);
    long hits=0;
    long misses=0;
    for (int i=0; i < GRID_CNT; i++) {
      CacheMetrics m=grid(i).cache(null).localMetrics();
      hits+=m.getCacheHits();
      misses+=m.getCacheMisses();
    }
    assertEquals(CNT / 2,hits);
    assertEquals(CNT / 2,misses);
  }
  finally {
    stopAllGrids();
  }
}
