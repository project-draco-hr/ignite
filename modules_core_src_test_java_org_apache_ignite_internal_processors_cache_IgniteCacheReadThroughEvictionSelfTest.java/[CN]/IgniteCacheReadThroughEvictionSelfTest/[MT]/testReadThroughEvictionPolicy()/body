{
  Ignite ig=ignite(GRID_CNT - 1);
  CacheConfiguration<Object,Object> cc=cacheConfiguration();
  cc.setEvictionPolicy(new FifoEvictionPolicy(1));
  final IgniteCache<Object,Object> cache=ig.getOrCreateCache(cc);
  try {
    for (int i=0; i < 1000; i++)     cache.put(i,i);
    assertTrue(GridTestUtils.waitForCondition(new PA(){
      @Override public boolean apply(){
        int size=cache.size();
        System.out.println("Cache size: " + size);
        return size <= GRID_CNT;
      }
    }
,getTestTimeout()));
    for (int i=0; i < 1000; i++)     assertEquals(i,cache.get(i));
  }
  finally {
    ig.destroyCache(null);
  }
}
