{
  try {
    if (checkExplicitTaskMonitoring(ignite))     res.taskMonitoringEnabled(true);
 else {
      res.taskMonitoringEnabled(arg.taskMonitoringEnabled());
      if (arg.taskMonitoringEnabled()) {
        ClusterNodeLocalMap<String,VisorComputeMonitoringHolder> storage=ignite.nodeLocalMap();
        VisorComputeMonitoringHolder holder=storage.get(COMPUTE_MONITORING_HOLDER_KEY);
        if (holder == null) {
          VisorComputeMonitoringHolder holderNew=new VisorComputeMonitoringHolder();
          VisorComputeMonitoringHolder holderOld=storage.putIfAbsent(COMPUTE_MONITORING_HOLDER_KEY,holderNew);
          holder=holderOld == null ? holderNew : holderOld;
        }
        holder.startCollect(ignite,arg.eventsOrderKey());
        res.taskMonitoringEnabled(ignite.allEventsUserRecordable(VISOR_TASK_EVTS));
      }
    }
    res.events().addAll(collectEvents(ignite,arg.eventsOrderKey(),arg.eventsThrottleCounterKey(),arg.taskMonitoringEnabled()));
  }
 catch (  Throwable eventsEx) {
    res.eventsEx(eventsEx);
  }
}
