{
  try {
    IgniteConfiguration cfg=ignite.configuration();
    GridCacheProcessor cacheProc=((IgniteKernal)ignite).context().cache();
    for (    String cacheName : cacheProc.cacheNames()) {
      if (arg.systemCaches() || !(isSystemCache(cacheName) || isIgfsCache(cfg,cacheName))) {
        long start0=U.currentTimeMillis();
        try {
          res.caches().add(VisorCache.from(ignite,cacheName,arg.sample()));
        }
  finally {
          if (debug)           log(ignite.log(),"Collected cache: " + cacheName,getClass(),start0);
        }
      }
    }
  }
 catch (  Throwable cachesEx) {
    res.cachesEx(cachesEx);
  }
}
