{
  waitInitialization();
  checkSupportsQueue();
  final boolean collocMode=cctx.cache().configuration().getCacheMode() != PARTITIONED || colloc;
  if (cctx.atomic())   return queue0(name,cap,collocMode,create);
  return CU.outTx(new Callable<GridCacheQueue<T>>(){
    @Override public GridCacheQueue<T> call() throws Exception {
      return queue0(name,cap,collocMode,create);
    }
  }
,cctx);
}
