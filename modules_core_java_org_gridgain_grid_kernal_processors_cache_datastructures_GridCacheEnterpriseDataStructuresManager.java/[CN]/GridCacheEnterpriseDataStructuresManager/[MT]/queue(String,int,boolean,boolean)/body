{
  GridCacheQueueKey key=new GridCacheQueueKey(name);
  GridCacheQueueHeader2 header=new GridCacheQueueHeader2(GridUuid.randomUuid(),cap,colloc,0,0);
  GridCacheQueueHeader2 old=queueView.putIfAbsent(key,header);
  if (old != null)   header=old;
  if (cctx.atomic())   return new GridAtomicCacheQueueImpl<>(name,header.uuid(),cap,colloc,cctx);
 else   return new GridTransactionalCacheQueueImpl<>(name,header.uuid(),cap,colloc,cctx);
}
