{
  if (stackTrace == null)   stackTrace=stackTrace();
  rwLock.readLock();
  if (state != STARTED) {
    rwLock.readUnlock();
    throw illegalState();
  }
  enterThreadLocals();
}
