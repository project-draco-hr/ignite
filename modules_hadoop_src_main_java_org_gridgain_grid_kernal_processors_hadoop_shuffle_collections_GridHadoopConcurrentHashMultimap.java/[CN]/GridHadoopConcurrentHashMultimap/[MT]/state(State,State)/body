{
  if (!state.compareAndSet(oldState,newState))   throw new IllegalStateException();
}
