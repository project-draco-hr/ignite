{
  Sync<X> sync0=sync;
  if (sync0.flip())   takeSnapshotAndReplaceSync(sync0);
  return sync0.get();
}
