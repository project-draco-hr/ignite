{
  IgniteConfiguration cfg=super.getConfiguration(gridName,rsrcs);
  cfg.setDeploymentMode(depMode);
  cfg.setCacheConfiguration();
  cfg.setIncludeProperties();
  cfg.setPeerClassLoadingLocalClassPathExclude("org.gridgain.grid.kernal.processors.resource.*");
  if (garFile != null) {
    GridUriDeploymentSpi depSpi=new GridUriDeploymentSpi();
    depSpi.setUriList(Collections.singletonList(garFile));
    cfg.setDeploymentSpi(depSpi);
  }
  return cfg;
}
