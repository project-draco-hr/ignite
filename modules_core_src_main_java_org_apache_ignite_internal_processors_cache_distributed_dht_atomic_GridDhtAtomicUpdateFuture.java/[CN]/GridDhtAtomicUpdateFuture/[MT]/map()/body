{
  if (!mappings.isEmpty()) {
    for (    GridDhtAtomicUpdateRequest req : mappings.values()) {
      try {
        if (log.isDebugEnabled())         log.debug("Sending DHT atomic update request [nodeId=" + req.nodeId() + ", req="+ req+ ']');
        cctx.io().send(req.nodeId(),req,cctx.ioPolicy());
      }
 catch (      ClusterTopologyCheckedException ignored) {
        U.warn(log,"Failed to send update request to backup node because it left grid: " + req.nodeId());
        registerResponse(req.nodeId());
      }
catch (      IgniteCheckedException e) {
        U.error(log,"Failed to send update request to backup node (did node leave the grid?): " + req.nodeId(),e);
        registerResponse(req.nodeId());
      }
    }
  }
 else   onDone();
  if (updateReq.writeSynchronizationMode() != FULL_SYNC)   completionCb.apply(updateReq,updateRes);
}
