{
  ctx.denyOnFlags(F.asList(READ,SKIP_SWAP));
  A.notNull(key,"key");
  validateCacheKey(key);
  GridCacheSwapEntry<V> unswapped=ctx.swap().readAndRemove(key);
  if (unswapped == null)   return null;
  GridCacheEntryEx<K,V> entry=entryEx(key);
  try {
    if (!entry.initialValue(key,ctx.discovery().topologyVersion(),unswapped))     return null;
  }
 catch (  GridCacheEntryRemovedException ignored) {
    if (log.isDebugEnabled())     log.debug("Entry has been concurrently removed.");
    return null;
  }
  return ctx.cloneOnFlag(unswapped.value());
}
