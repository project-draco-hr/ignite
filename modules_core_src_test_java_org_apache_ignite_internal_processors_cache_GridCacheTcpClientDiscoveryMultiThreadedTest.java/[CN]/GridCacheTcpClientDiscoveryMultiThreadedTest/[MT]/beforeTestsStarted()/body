{
  gridsCnt=new AtomicInteger();
  nearCacheNode=new boolean[CLIENT_NODES_COUNT];
  for (int i=0; i < SERVER_NODES_COUNT; i++)   startGrid(i);
  startGridsMultiThreaded(SERVER_NODES_COUNT,CLIENT_NODES_COUNT);
  checkTopology(gridCount());
  awaitPartitionMapExchange();
  for (int i=SERVER_NODES_COUNT; i < gridCount(); i++) {
    if (i % 2 == 0) {
      grid(i).createNearCache(null,new NearCacheConfiguration<>());
      nearCacheNode[i - SERVER_NODES_COUNT]=true;
    }
  }
}
