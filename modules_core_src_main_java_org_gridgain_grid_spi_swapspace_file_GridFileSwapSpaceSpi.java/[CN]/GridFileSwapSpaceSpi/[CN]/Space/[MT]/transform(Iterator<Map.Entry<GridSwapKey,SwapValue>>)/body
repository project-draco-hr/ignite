{
  return new Iterator<Map.Entry<GridSwapKey,byte[]>>(){
    /** 
 */
    private Map.Entry<GridSwapKey,byte[]> next;
    /** 
 */
    private Map.Entry<GridSwapKey,byte[]> last;
{
      advance();
    }
    @Override public boolean hasNext(){
      return next != null;
    }
    /** 
 * Gets next entry.
 */
    private void advance(){
      while (iter.hasNext()) {
        Map.Entry<GridSwapKey,SwapValue> entry=iter.next();
        byte[] bytes;
        try {
          bytes=entry.getValue().value(Space.this);
        }
 catch (        IgniteSpiException e) {
          throw new GridRuntimeException(e);
        }
        if (bytes != null) {
          next=new T2<>(entry.getKey(),bytes);
          break;
        }
      }
    }
    @Override public Map.Entry<GridSwapKey,byte[]> next(){
      final Map.Entry<GridSwapKey,byte[]> res=next;
      if (res == null)       throw new NoSuchElementException();
      next=null;
      advance();
      last=res;
      return res;
    }
    @Override public void remove(){
      if (last == null)       throw new IllegalStateException();
      try {
        Space.this.remove(last.getKey(),false);
      }
 catch (      IgniteSpiException e) {
        throw new GridRuntimeException(e);
      }
 finally {
        last=null;
      }
    }
  }
;
}
