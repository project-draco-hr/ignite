{
  lock.lock();
  try {
    while (size + val.len > maxSize)     mayAdd.await();
    size+=val.len;
    deq.addLast(val);
    if (size >= minTakeSize)     mayTake.signalAll();
  }
 catch (  InterruptedException e) {
    throw new GridSpiException(e);
  }
 finally {
    lock.unlock();
  }
}
