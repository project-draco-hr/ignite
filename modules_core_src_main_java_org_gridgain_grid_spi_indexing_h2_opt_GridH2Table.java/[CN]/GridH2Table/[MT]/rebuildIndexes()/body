{
  GridUnsafeMemory memory=desc == null ? null : desc.memory();
  lock.writeLock().lock();
  try {
    if (memory == null && actualSnapshot == null)     actualSnapshot=takeIndexesSnapshot();
    for (int i=1, len=idxs.size(); i < len; i++) {
      GridH2IndexBase newIdx=index(i).rebuild(memory);
      idxs.set(i,newIdx);
      if (i == 1)       idxs.set(0,new ScanIndex(newIdx));
    }
  }
 catch (  InterruptedException ignored) {
  }
 finally {
    lock.writeLock().unlock();
    actualSnapshot=null;
  }
}
