{
  try {
    Thread.currentThread().setContextClassLoader(jobConf().getClassLoader());
    try {
      task=createTask();
    }
 catch (    Throwable e) {
      if (e instanceof Error)       throw e;
      throw transformException(e);
    }
    if (cancelled)     throw new HadoopTaskCancelledException("Task cancelled.");
    try {
      task.run(this);
    }
 catch (    Throwable e) {
      if (e instanceof Error)       throw e;
      throw transformException(e);
    }
  }
  finally {
    task=null;
    Thread.currentThread().setContextClassLoader(null);
  }
}
