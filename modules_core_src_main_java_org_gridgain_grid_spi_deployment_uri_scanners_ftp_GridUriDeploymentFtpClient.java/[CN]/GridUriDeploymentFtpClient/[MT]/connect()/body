{
  ftp=new FTPClient();
  try {
    ftp.setRemoteHost(cfg.getHost());
    ftp.setRemotePort(cfg.getPort());
    ftp.setTimeout(TIMEOUT);
    ftp.connect();
    ftp.login(cfg.getUsername(),cfg.getPassword());
    ftp.setConnectMode(FTPConnectMode.PASV);
    ftp.setType(FTPTransferType.BINARY);
    if (!ftp.connected()) {
      ftp.quit();
      throw new GridUriDeploymentFtpException("FTP server refused connection [host=" + cfg.getHost() + ", port="+ cfg.getPort()+ ", username="+ cfg.getUsername()+ ']');
    }
  }
 catch (  IOException|FTPException e) {
    throw new GridUriDeploymentFtpException("Failed to connect to host [host=" + cfg.getHost() + ", port="+ cfg.getPort()+ ']',e);
  }
  isConnected=true;
}
