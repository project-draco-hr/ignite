{
  if (obj == null)   doWriteByte(NULL);
 else {
    WriterContext wCtx=detached ? new WriterContext(this.wCtx) : this.wCtx;
    GridPortableWriterImpl writer=new GridPortableWriterImpl(ctx,wCtx);
    writer.marshal(obj,detached);
    if (detached) {
      this.wCtx.arr=wCtx.arr;
      this.wCtx.off=wCtx.off;
    }
  }
}
