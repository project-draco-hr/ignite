{
  try {
    Ignite server=startGrid("server");
    server.services().deployClusterSingleton("my-service",MyServiceFactory.create());
    Ignition.setClientMode(true);
    Ignite client=startGrid("client");
    MyService svc=client.services().serviceProxy("my-service",MyService.class,true);
    assertEquals(42,svc.hello());
  }
  finally {
    stopAllGrids();
  }
}
