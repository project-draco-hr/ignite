{
  A.notNull(m,"m");
  Map<K,V> res;
  if (!cp) {
    res=m;
    if (isEmpty(p))     res.clear();
 else     if (!isAlwaysFalse(p))     for (Iterator<Map.Entry<K,V>> iter=m.entrySet().iterator(); iter.hasNext(); )     if (isAll(iter.next(),p))     iter.remove();
  }
 else {
    res=U.newHashMap(m.size());
    if (!isEmpty(p) && !isAlwaysTrue(p))     for (    Map.Entry<K,V> e : m.entrySet())     if (!F.isAll(e,p))     res.put(e.getKey(),e.getValue());
  }
  return res;
}
