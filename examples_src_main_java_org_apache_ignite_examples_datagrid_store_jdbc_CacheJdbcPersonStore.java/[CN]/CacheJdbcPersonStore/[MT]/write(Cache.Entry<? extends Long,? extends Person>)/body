{
  Long key=entry.getKey();
  Person val=entry.getValue();
  System.out.println(">>> Putting [key=" + key + ", val="+ val+ ']');
  try {
    Connection conn=ses.attachment();
    int updated;
    try (PreparedStatement st=conn.prepareStatement("update PERSONS set firstName=?, lastName=? where id=?")){
      st.setString(1,val.getFirstName());
      st.setString(2,val.getLastName());
      st.setLong(3,val.getId());
      updated=st.executeUpdate();
    }
     if (updated == 0) {
      try (PreparedStatement st=conn.prepareStatement("insert into PERSONS (id, firstName, lastName) values(?, ?, ?)")){
        st.setLong(1,val.getId());
        st.setString(2,val.getFirstName());
        st.setString(3,val.getLastName());
        st.executeUpdate();
      }
     }
  }
 catch (  SQLException e) {
    throw new CacheLoaderException("Failed to put object [key=" + key + ", val="+ val+ ']',e);
  }
}
