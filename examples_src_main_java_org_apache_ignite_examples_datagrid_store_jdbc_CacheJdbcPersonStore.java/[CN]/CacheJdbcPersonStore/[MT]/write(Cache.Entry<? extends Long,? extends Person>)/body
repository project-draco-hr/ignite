{
  Long key=entry.getKey();
  Person val=entry.getValue();
  System.out.println(">>> Store write [key=" + key + ", val="+ val+ ']');
  try {
    Connection conn=ses.attachment();
    int updated;
    try (PreparedStatement st=conn.prepareStatement("update PERSONS set firstName = ?, lastName = ? where id = ?")){
      st.setString(1,val.firstName);
      st.setString(2,val.lastName);
      st.setLong(3,val.id);
      updated=st.executeUpdate();
    }
     if (updated == 0) {
      try (PreparedStatement st=conn.prepareStatement("insert into PERSONS (id, firstName, lastName) values (?, ?, ?)")){
        st.setLong(1,val.id);
        st.setString(2,val.firstName);
        st.setString(3,val.lastName);
        st.executeUpdate();
      }
     }
  }
 catch (  SQLException e) {
    throw new CacheWriterException("Failed to write object [key=" + key + ", val="+ val+ ']',e);
  }
}
