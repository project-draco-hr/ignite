{
  if (dist && tx == null)   cctx.colocated().removeLocks(threadId,lockVer,keys);
 else {
    if (tx != null) {
      if (tx.setRollbackOnly()) {
        if (log.isDebugEnabled())         log.debug("Marked transaction as rollback only because locks could not be acquired: " + tx);
      }
 else       if (log.isDebugEnabled())       log.debug("Transaction was not marked rollback-only while locks were not acquired: " + tx);
    }
  }
  cctx.mvcc().recheckPendingLocks();
}
