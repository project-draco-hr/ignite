{
  preloadMode=SYNC;
  backups=1;
  try {
    final int cnt=1000;
    lbean=new GridLifecycleBean(){
      @GridInstanceResource private Ignite ignite;
      @Override public void onLifecycleEvent(      GridLifecycleEventType evt) throws GridException {
        if (evt == GridLifecycleEventType.AFTER_GRID_START) {
          GridCache<Integer,String> c=ignite.cache(null);
          if (c.putxIfAbsent(-1,"true")) {
            populate(ignite.<Integer,String>cache(null),cnt);
            info(">>> POPULATED GRID <<<");
          }
        }
      }
    }
;
    int gridCnt=3;
    for (int i=0; i < gridCnt; i++) {
      startGrid(i);
      for (int j=0; j < i; j++)       info("Grid size [i=" + i + ", size="+ grid(j).cache(null).size()+ ']');
    }
    long wait=3000;
    waitForUnload(gridCnt,cnt,wait);
  }
  finally {
    lbean=null;
    stopAllGrids();
  }
}
